(self.webpackChunkep_web=self.webpackChunkep_web||[]).push([["../libs/wp/@pixi/extract/extract"],{"./node_modules/@pixi/extract/lib/extract.es.js":function(e,t,r){"use strict";r.d(t,{Q:function(){return o}});var n=r("./node_modules/@pixi/utils/lib/utils.es.js"),a=r("./node_modules/@pixi/math/lib/math.es.js"),i=r("./node_modules/@pixi/core/lib/core.es.js"),s=new a.Ae,o=function(){function Extract(e){this.renderer=e,e.extract=this}return Extract.prototype.image=function(e,t,r){var n=new Image;return n.src=this.base64(e,t,r),n},Extract.prototype.base64=function(e,t,r){return this.canvas(e).toDataURL(t,r)},Extract.prototype.canvas=function(e){var t,r,a,o=this.renderer,d=!1,h=!1;e&&(e instanceof i.TI?a=e:(a=this.renderer.generateTexture(e),h=!0)),a?(t=a.baseTexture.resolution,r=a.frame,d=!1,o.renderTexture.bind(a)):(t=this.renderer.resolution,d=!0,(r=s).width=this.renderer.width,r.height=this.renderer.height,o.renderTexture.bind(null));var u=Math.floor(r.width*t+1e-4),c=Math.floor(r.height*t+1e-4),x=new n.CanvasRenderTarget(u,c,1),l=new Uint8Array(4*u*c),p=o.gl;p.readPixels(r.x*t,r.y*t,u,c,p.RGBA,p.UNSIGNED_BYTE,l);var f=x.context.getImageData(0,0,u,c);if(Extract.arrayPostDivide(l,f.data),x.context.putImageData(f,0,0),d){var g=new n.CanvasRenderTarget(x.width,x.height,1);g.context.scale(1,-1),g.context.drawImage(x.canvas,0,-c),x.destroy(),x=g}return h&&a.destroy(!0),x.canvas},Extract.prototype.pixels=function(e){var t,r,n,a=this.renderer,o=!1;e&&(e instanceof i.TI?n=e:(n=this.renderer.generateTexture(e),o=!0)),n?(t=n.baseTexture.resolution,r=n.frame,a.renderTexture.bind(n)):(t=a.resolution,(r=s).width=a.width,r.height=a.height,a.renderTexture.bind(null));var d=r.width*t,h=r.height*t,u=new Uint8Array(4*d*h),c=a.gl;return c.readPixels(r.x*t,r.y*t,d,h,c.RGBA,c.UNSIGNED_BYTE,u),o&&n.destroy(!0),Extract.arrayPostDivide(u,u),u},Extract.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},Extract.arrayPostDivide=function(e,t){for(var r=0;r<e.length;r+=4){var n=t[r+3]=e[r+3];0!==n?(t[r]=Math.round(Math.min(255*e[r]/n,255)),t[r+1]=Math.round(Math.min(255*e[r+1]/n,255)),t[r+2]=Math.round(Math.min(255*e[r+2]/n,255))):(t[r]=e[r],t[r+1]=e[r+1],t[r+2]=e[r+2])}},Extract}()}}]);