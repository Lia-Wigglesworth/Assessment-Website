(self.webpackChunkep_web=self.webpackChunkep_web||[]).push([["../libs/wp/prosemirror-state/prosemirror-state"],{"./node_modules/prosemirror-state/dist/index.es.js":function(e,t,n){"use strict";n.r(t),n.d(t,{AllSelection:function(){return h},EditorState:function(){return v},NodeSelection:function(){return u},Plugin:function(){return T},PluginKey:function(){return N},Selection:function(){return s},SelectionRange:function(){return a},TextSelection:function(){return l},Transaction:function(){return S}});var o=n("./node_modules/prosemirror-model/dist/index.es.js"),r=n("./node_modules/prosemirror-transform/dist/index.es.js"),i=Object.create(null),s=function Selection(e,t,n){this.ranges=n||[new a(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},c={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};c.anchor.get=function(){return this.$anchor.pos},c.head.get=function(){return this.$head.pos},c.from.get=function(){return this.$from.pos},c.to.get=function(){return this.$to.pos},c.$from.get=function(){return this.ranges[0].$from},c.$to.get=function(){return this.ranges[0].$to},c.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},s.prototype.content=function content(){return this.$from.node(0).slice(this.from,this.to,!0)},s.prototype.replace=function replace(e,t){void 0===t&&(t=o.Slice.empty);for(var n=t.content.lastChild,r=null,i=0;i<t.openEnd;i++)r=n,n=n.lastChild;for(var s=e.steps.length,c=this.ranges,a=0;a<c.length;a++){var l=c[a],p=l.$from,u=l.$to,f=e.mapping.slice(s);e.replaceRange(f.map(p.pos),f.map(u.pos),a?o.Slice.empty:t),0==a&&selectionToInsertionEnd(e,s,(n?n.isInline:r&&r.isTextblock)?-1:1)}},s.prototype.replaceWith=function replaceWith(e,t){for(var n=e.steps.length,o=this.ranges,r=0;r<o.length;r++){var i=o[r],s=i.$from,c=i.$to,a=e.mapping.slice(n),l=a.map(s.pos),p=a.map(c.pos);r?e.deleteRange(l,p):(e.replaceRangeWith(l,p,t),selectionToInsertionEnd(e,n,t.isInline?-1:1))}},s.findFrom=function findFrom(e,t,n){var o=e.parent.inlineContent?new l(e):findSelectionIn(e.node(0),e.parent,e.pos,e.index(),t,n);if(o)return o;for(var r=e.depth-1;r>=0;r--){var i=t<0?findSelectionIn(e.node(0),e.node(r),e.before(r+1),e.index(r),t,n):findSelectionIn(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,n);if(i)return i}},s.near=function near(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new h(e.node(0))},s.atStart=function atStart(e){return findSelectionIn(e,e,0,0,1)||new h(e)},s.atEnd=function atEnd(e){return findSelectionIn(e,e,e.content.size,e.childCount,-1)||new h(e)},s.fromJSON=function fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=i[t.type];if(!n)throw new RangeError("No selection type "+t.type+" defined");return n.fromJSON(e,t)},s.jsonID=function jsonID(e,t){if(e in i)throw new RangeError("Duplicate use of selection JSON ID "+e);return i[e]=t,t.prototype.jsonID=e,t},s.prototype.getBookmark=function getBookmark(){return l.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(s.prototype,c),s.prototype.visible=!0;var a=function SelectionRange(e,t){this.$from=e,this.$to=t},l=function(e){function TextSelection(t,n){void 0===n&&(n=t),e.call(this,t,n)}e&&(TextSelection.__proto__=e),TextSelection.prototype=Object.create(e&&e.prototype),TextSelection.prototype.constructor=TextSelection;var t={$cursor:{configurable:!0}};return t.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},TextSelection.prototype.map=function map(t,n){var o=t.resolve(n.map(this.head));if(!o.parent.inlineContent)return e.near(o);var r=t.resolve(n.map(this.anchor));return new TextSelection(r.parent.inlineContent?r:o,o)},TextSelection.prototype.replace=function replace(t,n){if(void 0===n&&(n=o.Slice.empty),e.prototype.replace.call(this,t,n),n==o.Slice.empty){var r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}},TextSelection.prototype.eq=function eq(e){return e instanceof TextSelection&&e.anchor==this.anchor&&e.head==this.head},TextSelection.prototype.getBookmark=function getBookmark(){return new p(this.anchor,this.head)},TextSelection.prototype.toJSON=function toJSON(){return{type:"text",anchor:this.anchor,head:this.head}},TextSelection.fromJSON=function fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(e.resolve(t.anchor),e.resolve(t.head))},TextSelection.create=function create(e,t,n){void 0===n&&(n=t);var o=e.resolve(t);return new this(o,n==t?o:e.resolve(n))},TextSelection.between=function between(t,n,o){var r=t.pos-n.pos;if(o&&!r||(o=r>=0?1:-1),!n.parent.inlineContent){var i=e.findFrom(n,o,!0)||e.findFrom(n,-o,!0);if(!i)return e.near(n,o);n=i.$head}return t.parent.inlineContent||(0==r||(t=(e.findFrom(t,-o,!0)||e.findFrom(t,o,!0)).$anchor).pos<n.pos!=r<0)&&(t=n),new TextSelection(t,n)},Object.defineProperties(TextSelection.prototype,t),TextSelection}(s);s.jsonID("text",l);var p=function TextBookmark(e,t){this.anchor=e,this.head=t};p.prototype.map=function map(e){return new p(e.map(this.anchor),e.map(this.head))},p.prototype.resolve=function resolve(e){return l.between(e.resolve(this.anchor),e.resolve(this.head))};var u=function(e){function NodeSelection(t){var n=t.nodeAfter,o=t.node(0).resolve(t.pos+n.nodeSize);e.call(this,t,o),this.node=n}return e&&(NodeSelection.__proto__=e),NodeSelection.prototype=Object.create(e&&e.prototype),NodeSelection.prototype.constructor=NodeSelection,NodeSelection.prototype.map=function map(t,n){var o=n.mapResult(this.anchor),r=o.deleted,i=o.pos,s=t.resolve(i);return r?e.near(s):new NodeSelection(s)},NodeSelection.prototype.content=function content(){return new o.Slice(o.Fragment.from(this.node),0,0)},NodeSelection.prototype.eq=function eq(e){return e instanceof NodeSelection&&e.anchor==this.anchor},NodeSelection.prototype.toJSON=function toJSON(){return{type:"node",anchor:this.anchor}},NodeSelection.prototype.getBookmark=function getBookmark(){return new f(this.anchor)},NodeSelection.fromJSON=function fromJSON(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(e.resolve(t.anchor))},NodeSelection.create=function create(e,t){return new this(e.resolve(t))},NodeSelection.isSelectable=function isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable},NodeSelection}(s);u.prototype.visible=!1,s.jsonID("node",u);var f=function NodeBookmark(e){this.anchor=e};f.prototype.map=function map(e){var t=e.mapResult(this.anchor),n=t.deleted,o=t.pos;return n?new p(o,o):new f(o)},f.prototype.resolve=function resolve(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&u.isSelectable(n)?new u(t):s.near(t)};var h=function(e){function AllSelection(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(AllSelection.__proto__=e),AllSelection.prototype=Object.create(e&&e.prototype),AllSelection.prototype.constructor=AllSelection,AllSelection.prototype.replace=function replace(t,n){if(void 0===n&&(n=o.Slice.empty),n==o.Slice.empty){t.delete(0,t.doc.content.size);var r=e.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else e.prototype.replace.call(this,t,n)},AllSelection.prototype.toJSON=function toJSON(){return{type:"all"}},AllSelection.fromJSON=function fromJSON(e){return new AllSelection(e)},AllSelection.prototype.map=function map(e){return new AllSelection(e)},AllSelection.prototype.eq=function eq(e){return e instanceof AllSelection},AllSelection.prototype.getBookmark=function getBookmark(){return d},AllSelection}(s);s.jsonID("all",h);var d={map:function map(){return this},resolve:function resolve(e){return new h(e)}};function findSelectionIn(e,t,n,o,r,i){if(t.inlineContent)return l.create(e,n);for(var s=o-(r>0?0:1);r>0?s<t.childCount:s>=0;s+=r){var c=t.child(s);if(c.isAtom){if(!i&&u.isSelectable(c))return u.create(e,n-(r<0?c.nodeSize:0))}else{var a=findSelectionIn(e,c,n+r,r<0?c.childCount:0,r,i);if(a)return a}n+=c.nodeSize*r}}function selectionToInsertionEnd(e,t,n){var o=e.steps.length-1;if(!(o<t)){var i,c=e.steps[o];if(c instanceof r.ReplaceStep||c instanceof r.ReplaceAroundStep)e.mapping.maps[o].forEach((function(e,t,n,o){null==i&&(i=o)})),e.setSelection(s.near(e.doc.resolve(i),n))}}var S=function(e){function Transaction(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(Transaction.__proto__=e),Transaction.prototype=Object.create(e&&e.prototype),Transaction.prototype.constructor=Transaction;var t={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return t.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},Transaction.prototype.setSelection=function setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},t.selectionSet.get=function(){return(1&this.updated)>0},Transaction.prototype.setStoredMarks=function setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this},Transaction.prototype.ensureMarks=function ensureMarks(e){return o.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},Transaction.prototype.addStoredMark=function addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},Transaction.prototype.removeStoredMark=function removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},t.storedMarksSet.get=function(){return(2&this.updated)>0},Transaction.prototype.addStep=function addStep(t,n){e.prototype.addStep.call(this,t,n),this.updated=-3&this.updated,this.storedMarks=null},Transaction.prototype.setTime=function setTime(e){return this.time=e,this},Transaction.prototype.replaceSelection=function replaceSelection(e){return this.selection.replace(this,e),this},Transaction.prototype.replaceSelectionWith=function replaceSelectionWith(e,t){var n=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||o.Mark.none))),n.replaceWith(this,e),this},Transaction.prototype.deleteSelection=function deleteSelection(){return this.selection.replace(this),this},Transaction.prototype.insertText=function insertText(e,t,n){void 0===n&&(n=t);var o=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var r=this.storedMarks;if(!r){var i=this.doc.resolve(t);r=n==t?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,o.text(e,r)),this.selection.empty||this.setSelection(s.near(this.selection.$to)),this},Transaction.prototype.setMeta=function setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},Transaction.prototype.getMeta=function getMeta(e){return this.meta["string"==typeof e?e:e.key]},t.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},Transaction.prototype.scrollIntoView=function scrollIntoView(){return this.updated|=4,this},t.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(Transaction.prototype,t),Transaction}(r.Transform);function bind(e,t){return t&&e?e.bind(t):e}var m=function FieldDesc(e,t,n){this.name=e,this.init=bind(t.init,n),this.apply=bind(t.apply,n)},y=[new m("doc",{init:function init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function apply(e){return e.doc}}),new m("selection",{init:function init(e,t){return e.selection||s.atStart(t.doc)},apply:function apply(e){return e.selection}}),new m("storedMarks",{init:function init(e){return e.storedMarks||null},apply:function apply(e,t,n,o){return o.selection.$cursor?e.storedMarks:null}}),new m("scrollToSelection",{init:function init(){return 0},apply:function apply(e,t){return e.scrolledIntoView?t+1:t}})],g=function Configuration(e,t){var n=this;this.schema=e,this.fields=y.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach((function(e){if(n.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");n.plugins.push(e),n.pluginsByKey[e.key]=e,e.spec.state&&n.fields.push(new m(e.key,e.spec.state,e))}))},v=function EditorState(e){this.config=e},k={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};k.schema.get=function(){return this.config.schema},k.plugins.get=function(){return this.config.plugins},v.prototype.apply=function apply(e){return this.applyTransaction(e).state},v.prototype.filterTransaction=function filterTransaction(e,t){void 0===t&&(t=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=t){var o=this.config.plugins[n];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0},v.prototype.applyTransaction=function applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),o=null;;){for(var r=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var c=o?o[i].n:0,a=o?o[i].state:this,l=c<t.length&&s.spec.appendTransaction.call(s,c?t.slice(c):t,a,n);if(l&&n.filterTransaction(l,i)){if(l.setMeta("appendedTransaction",e),!o){o=[];for(var p=0;p<this.config.plugins.length;p++)o.push(p<i?{state:n,n:t.length}:{state:this,n:0})}t.push(l),n=n.applyInner(l),r=!0}o&&(o[i]={state:n,n:t.length})}}if(!r)return{state:n,transactions:t}}},v.prototype.applyInner=function applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new v(this.config),n=this.config.fields,o=0;o<n.length;o++){var r=n[o];t[r.name]=r.apply(e,this[r.name],this,t)}for(var i=0;i<w.length;i++)w[i](this,e,t);return t},k.tr.get=function(){return new S(this)},v.create=function create(e){for(var t=new g(e.schema||e.doc.type.schema,e.plugins),n=new v(t),o=0;o<t.fields.length;o++)n[t.fields[o].name]=t.fields[o].init(e,n);return n},v.prototype.reconfigure=function reconfigure(e){for(var t=new g(e.schema||this.schema,e.plugins),n=t.fields,o=new v(t),r=0;r<n.length;r++){var i=n[r].name;o[i]=this.hasOwnProperty(i)?this[i]:n[r].init(e,o)}return o},v.prototype.toJSON=function toJSON(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var o=e[n],r=o.spec.state;r&&r.toJSON&&(t[n]=r.toJSON.call(o,this[o.key]))}return t},v.fromJSON=function fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var r=new g(e.schema,e.plugins),i=new v(r);return r.fields.forEach((function(r){if("doc"==r.name)i.doc=o.Node.fromJSON(e.schema,t.doc);else if("selection"==r.name)i.selection=s.fromJSON(i.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(var c in n){var a=n[c],l=a.spec.state;if(a.key==r.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(t,c))return void(i[r.name]=l.fromJSON.call(a,e,t[c],i))}i[r.name]=r.init(e,i)}})),i},v.addApplyListener=function addApplyListener(e){w.push(e)},v.removeApplyListener=function removeApplyListener(e){var t=w.indexOf(e);t>-1&&w.splice(t,1)},Object.defineProperties(v.prototype,k);var w=[];function bindProps(e,t,n){for(var o in e){var r=e[o];r instanceof Function?r=r.bind(t):"handleDOMEvents"==o&&(r=bindProps(r,t,{})),n[o]=r}return n}var T=function Plugin(e){this.props={},e.props&&bindProps(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:createKey("plugin")};T.prototype.getState=function getState(e){return e[this.key]};var b=Object.create(null);function createKey(e){return e in b?e+"$"+ ++b[e]:(b[e]=0,e+"$")}var N=function PluginKey(e){void 0===e&&(e="key"),this.key=createKey(e)};N.prototype.get=function get(e){return e.config.pluginsByKey[this.key]},N.prototype.getState=function getState(e){return e[this.key]}}}]);