/*! For license information please see tiptap-extensions.dafa2bef9e9700d65201.js.LICENSE.txt */
(self.webpackChunkep_web=self.webpackChunkep_web||[]).push([["../libs/wp/@educationperfect/tiptap-extensions/tiptap-extensions"],{"./node_modules/@educationperfect/tiptap-extensions/dist/extensions.esm.js":function(e,t,n){"use strict";n.r(t),n.d(t,{Blockquote:function(){return h},Bold:function(){return H},BulletList:function(){return y},Code:function(){return P},CodeBlock:function(){return m},CodeBlockHighlight:function(){return k},Collaboration:function(){return E},Focus:function(){return q},HardBreak:function(){return v},Heading:function(){return _},Highlight:function(){return HighlightPlugin},History:function(){return z},HorizontalRule:function(){return b},Image:function(){return O},Italic:function(){return L},Link:function(){return N},ListItem:function(){return S},Mention:function(){return T},OrderedList:function(){return w},Placeholder:function(){return W},Search:function(){return F},Strike:function(){return j},Suggestions:function(){return SuggestionsPlugin},Table:function(){return D},TableCell:function(){return x},TableHeader:function(){return M},TableRow:function(){return A},TodoItem:function(){return I},TodoList:function(){return B},TrailingNode:function(){return K},Underline:function(){return $}});var r=n("./node_modules/@educationperfect/tiptap/dist/tiptap.esm.js"),o=n("./node_modules/@educationperfect/tiptap-commands/dist/commands.esm.js"),a=n("./node_modules/lowlight/lib/core.js"),i=n.n(a),u=n("./node_modules/prosemirror-view/dist/index.es.js"),s=n("./node_modules/prosemirror-utils/dist/index.js"),c=n("./node_modules/prosemirror-state/dist/index.es.js"),l=n("./node_modules/prosemirror-tables/dist/index.es.js"),d=n("./node_modules/@educationperfect/tiptap-utils/dist/utils.esm.js"),f=n("./node_modules/prosemirror-transform/dist/index.es.js"),p=n("./node_modules/prosemirror-collab/dist/index.es.js"),g=n("./node_modules/prosemirror-history/dist/index.es.js");function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _createSuper(e){return function(){var t,n=_getPrototypeOf(e);if(_isNativeReflectConstruct()){var r=_getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||_unsupportedIterableToArray(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||_unsupportedIterableToArray(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=function(e){_inherits(Blockquote,e);var t=_createSuper(Blockquote);function Blockquote(){return _classCallCheck(this,Blockquote),t.apply(this,arguments)}return _createClass(Blockquote,[{key:"commands",value:function commands(e){var t=e.type,n=e.schema;return function(){return(0,o.toggleWrap)(t,n.nodes.paragraph)}}},{key:"keys",value:function keys(e){var t=e.type;return{"Ctrl->":(0,o.toggleWrap)(t)}}},{key:"inputRules",value:function inputRules(e){var t=e.type;return[(0,o.wrappingInputRule)(/^\s*>\s$/,t)]}},{key:"name",get:function get(){return"blockquote"}},{key:"schema",get:function get(){return{content:"block*",group:"block",defining:!0,draggable:!1,parseDOM:[{tag:"blockquote"}],toDOM:function toDOM(){return["blockquote",0]}}}}]),Blockquote}(r.Node),y=function(e){_inherits(BulletList,e);var t=_createSuper(BulletList);function BulletList(){return _classCallCheck(this,BulletList),t.apply(this,arguments)}return _createClass(BulletList,[{key:"commands",value:function commands(e){var t=e.type,n=e.schema;return function(){return(0,o.toggleList)(t,n.nodes.list_item)}}},{key:"keys",value:function keys(e){var t=e.type,n=e.schema;return{"Shift-Ctrl-8":(0,o.toggleList)(t,n.nodes.list_item)}}},{key:"inputRules",value:function inputRules(e){var t=e.type;return[(0,o.wrappingInputRule)(/^\s*([-+*])\s$/,t)]}},{key:"name",get:function get(){return"bullet_list"}},{key:"schema",get:function get(){return{content:"list_item+",group:"block",parseDOM:[{tag:"ul"}],toDOM:function toDOM(){return["ul",0]}}}}]),BulletList}(r.Node),m=function(e){_inherits(CodeBlock,e);var t=_createSuper(CodeBlock);function CodeBlock(){return _classCallCheck(this,CodeBlock),t.apply(this,arguments)}return _createClass(CodeBlock,[{key:"commands",value:function commands(e){var t=e.type,n=e.schema;return function(){return(0,o.toggleBlockType)(t,n.nodes.paragraph)}}},{key:"keys",value:function keys(e){var t=e.type;return{"Shift-Ctrl-\\":(0,o.setBlockType)(t)}}},{key:"inputRules",value:function inputRules(e){var t=e.type;return[(0,o.textblockTypeInputRule)(/^```$/,t)]}},{key:"name",get:function get(){return"code_block"}},{key:"schema",get:function get(){return{content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function toDOM(){return["pre",["code",0]]}}}}]),CodeBlock}(r.Node);function getDecorations(e){var t=e.doc,n=e.name,r=[],o=(0,s.findBlockNodes)(t).filter((function(e){return e.node.type.name===n})),a=function flatten(e){return e.reduce((function(e,t){return e.concat(Array.isArray(t)?flatten(t):t)}),[])};function parseNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.map((function(e){var n=[].concat(_toConsumableArray(t),_toConsumableArray(e.properties?e.properties.className:[]));return e.children?parseNodes(e.children,n):{text:e.value,classes:n}}))}return o.forEach((function(e){var t=e.pos+1,n=i().highlightAuto(e.node.textContent).value;a(parseNodes(n)).map((function(e){var n=t,r=n+e.text.length;return t=r,_objectSpread2({},e,{from:n,to:r})})).forEach((function(e){var t=u.Decoration.inline(e.from,e.to,{class:e.classes.join(" ")});r.push(t)}))})),u.DecorationSet.create(t,r)}function HighlightPlugin(e){var t=e.name;return new r.Plugin({name:new r.PluginKey("highlight"),state:{init:function init(e,n){return getDecorations({doc:n.doc,name:t})},apply:function apply(e,n,r,o){var a=r.selection.$head.parent.type.name,i=o.selection.$head.parent.type.name,u=(0,s.findBlockNodes)(r.doc).filter((function(e){return e.node.type.name===t})),c=(0,s.findBlockNodes)(o.doc).filter((function(e){return e.node.type.name===t}));return e.docChanged&&([a,i].includes(t)||c.length!==u.length)?getDecorations({doc:e.doc,name:t}):n.map(e.mapping,e.doc)}},props:{decorations:function decorations(e){return this.getState(e)}}})}var k=function(e){_inherits(CodeBlockHighlight,e);var t=_createSuper(CodeBlockHighlight);function CodeBlockHighlight(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,CodeBlockHighlight),e=t.call(this,n);try{Object.entries(e.options.languages).forEach((function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];i().registerLanguage(n,r)}))}catch(e){throw new Error("Invalid syntax highlight definitions: define at least one highlight.js language mapping")}return e}return _createClass(CodeBlockHighlight,[{key:"commands",value:function commands(e){var t=e.type,n=e.schema;return function(){return(0,o.toggleBlockType)(t,n.nodes.paragraph)}}},{key:"keys",value:function keys(e){var t=e.type;return{"Shift-Ctrl-\\":(0,o.setBlockType)(t)}}},{key:"inputRules",value:function inputRules(e){var t=e.type;return[(0,o.textblockTypeInputRule)(/^```$/,t)]}},{key:"name",get:function get(){return"code_block"}},{key:"defaultOptions",get:function get(){return{languages:{}}}},{key:"schema",get:function get(){return{content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function toDOM(){return["pre",["code",0]]}}}},{key:"plugins",get:function get(){return[HighlightPlugin({name:this.name})]}}]),CodeBlockHighlight}(r.Node),v=function(e){_inherits(HardBreak,e);var t=_createSuper(HardBreak);function HardBreak(){return _classCallCheck(this,HardBreak),t.apply(this,arguments)}return _createClass(HardBreak,[{key:"keys",value:function keys(e){var t=e.type,n=(0,o.chainCommands)(o.exitCode,(function(e,n){return n(e.tr.replaceSelectionWith(t.create()).scrollIntoView()),!0}));return{"Mod-Enter":n,"Shift-Enter":n}}},{key:"name",get:function get(){return"hard_break"}},{key:"schema",get:function get(){return{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function toDOM(){return["br"]}}}}]),HardBreak}(r.Node),_=function(e){_inherits(Heading,e);var t=_createSuper(Heading);function Heading(){return _classCallCheck(this,Heading),t.apply(this,arguments)}return _createClass(Heading,[{key:"commands",value:function commands(e){var t=e.type,n=e.schema;return function(e){return(0,o.toggleBlockType)(t,n.nodes.paragraph,e)}}},{key:"keys",value:function keys(e){var t=e.type;return this.options.levels.reduce((function(e,n){return _objectSpread2({},e,{},_defineProperty({},"Shift-Ctrl-".concat(n),(0,o.setBlockType)(t,{level:n})))}),{})}},{key:"inputRules",value:function inputRules(e){var t=e.type;return this.options.levels.map((function(e){return(0,o.textblockTypeInputRule)(new RegExp("^(#{1,".concat(e,"})\\s$")),t,(function(){return{level:e}}))}))}},{key:"name",get:function get(){return"heading"}},{key:"defaultOptions",get:function get(){return{levels:[1,2,3,4,5,6]}}},{key:"schema",get:function get(){return{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,draggable:!1,parseDOM:this.options.levels.map((function(e){return{tag:"h".concat(e),attrs:{level:e}}})),toDOM:function toDOM(e){return["h".concat(e.attrs.level),0]}}}}]),Heading}(r.Node),b=function(e){_inherits(HorizontalRule,e);var t=_createSuper(HorizontalRule);function HorizontalRule(){return _classCallCheck(this,HorizontalRule),t.apply(this,arguments)}return _createClass(HorizontalRule,[{key:"commands",value:function commands(e){var t=e.type;return function(){return function(e,n){return n(e.tr.replaceSelectionWith(t.create()))}}}},{key:"inputRules",value:function inputRules(e){var t=e.type;return[(0,o.nodeInputRule)(/^(?:---|___\s|\*\*\*\s)$/,t)]}},{key:"name",get:function get(){return"horizontal_rule"}},{key:"schema",get:function get(){return{group:"block",parseDOM:[{tag:"hr"}],toDOM:function toDOM(){return["hr"]}}}}]),HorizontalRule}(r.Node),C=/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/,O=function(e){_inherits(Image,e);var t=_createSuper(Image);function Image(){return _classCallCheck(this,Image),t.apply(this,arguments)}return _createClass(Image,[{key:"commands",value:function commands(e){var t=e.type;return function(e){return function(n,r){var o=n.selection,a=o.$cursor?o.$cursor.pos:o.$to.pos,i=t.create(e);r(n.tr.insert(a,i))}}}},{key:"inputRules",value:function inputRules(e){var t=e.type;return[(0,o.nodeInputRule)(C,t,(function(e){var t=_slicedToArray(e,4),n=t[1];return{src:t[2],alt:n,title:t[3]}}))]}},{key:"name",get:function get(){return"image"}},{key:"schema",get:function get(){return{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function getAttrs(e){return{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")}}}],toDOM:function toDOM(e){return["img",e.attrs]}}}},{key:"plugins",get:function get(){return[new r.Plugin({props:{handleDOMEvents:{drop:function drop(e,t){if(t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files.length){var n=Array.from(t.dataTransfer.files).filter((function(e){return/image/i.test(e.type)}));if(0!==n.length){t.preventDefault();var r=e.state.schema,o=e.posAtCoords({left:t.clientX,top:t.clientY});n.forEach((function(t){var n=new FileReader;n.onload=function(t){var n=r.nodes.image.create({src:t.target.result}),a=e.state.tr.insert(o.pos,n);e.dispatch(a)},n.readAsDataURL(t)}))}}}}}})]}}]),Image}(r.Node),S=function(e){_inherits(ListItem,e);var t=_createSuper(ListItem);function ListItem(){return _classCallCheck(this,ListItem),t.apply(this,arguments)}return _createClass(ListItem,[{key:"keys",value:function keys(e){var t=e.type;return{Enter:(0,o.splitListItem)(t),Tab:(0,o.sinkListItem)(t),"Shift-Tab":(0,o.liftListItem)(t)}}},{key:"name",get:function get(){return"list_item"}},{key:"schema",get:function get(){return{content:"paragraph block*",defining:!0,draggable:!1,parseDOM:[{tag:"li"}],toDOM:function toDOM(){return["li",0]}}}}]),ListItem}(r.Node);function SuggestionsPlugin(e){var t=e.matcher,n=void 0===t?{char:"@",allowSpaces:!1,startOfLine:!1}:t,r=e.appendText,a=void 0===r?null:r,i=e.suggestionClass,s=void 0===i?"suggestion":i,l=e.command,d=void 0===l?function(){return!1}:l,f=e.items,p=void 0===f?[]:f,g=e.onEnter,h=void 0===g?function(){return!1}:g,y=e.onChange,m=void 0===y?function(){return!1}:y,k=e.onExit,v=void 0===k?function(){return!1}:k,_=e.onKeyDown,b=void 0===_?function(){return!1}:_,C=e.onFilter,O=void 0===C?function(e,t){return t?e.filter((function(e){return JSON.stringify(e).toLowerCase().includes(t.toLowerCase())})):e}:C;return new c.Plugin({key:new c.PluginKey("suggestions"),view:function view(){var e=this;return{update:function update(t,n){var r=e.key.getState(n),i=e.key.getState(t.state),u=r.active&&i.active&&r.range.from!==i.range.from,s=!r.active&&i.active,c=r.active&&!i.active,l=s||u,f=!s&&!c&&r.query!==i.query&&!u,g=c||u;if(l||f||g){var y=g?r:i,k=document.querySelector('[data-decoration-id="'.concat(y.decorationId,'"]')),_=k?{getBoundingClientRect:function getBoundingClientRect(){return k.getBoundingClientRect()},clientWidth:k.clientWidth,clientHeight:k.clientHeight}:null,b={view:t,range:y.range,query:y.query,text:y.text,decorationNode:k,virtualNode:_,items:O(Array.isArray(p)?p:p(),y.query),command:function command(e){var n=e.range,r=e.attrs;d({range:n,attrs:r,schema:t.state.schema})(t.state,t.dispatch,t),a&&(0,o.insertText)(a)(t.state,t.dispatch,t)}};g&&v(b),f&&m(b),l&&h(b)}}}},state:{init:function init(){return{active:!1,range:{},query:null,text:null}},apply:function apply(e,t){var r=e.selection,o=_objectSpread2({},t);if(r.from===r.to){(r.from<t.range.from||r.from>t.range.to)&&(o.active=!1);var a=r.$from,i=function triggerCharacter(e){var t=e.char,n=void 0===t?"@":t,r=e.allowSpaces,o=void 0!==r&&r,a=e.startOfLine,i=void 0!==a&&a;return function(e){if(e.depth<=0)return!1;for(var t,r="\\".concat(n),a=new RegExp("\\s".concat(r,"$")),u=i?"^":"",s=o?new RegExp("".concat(u).concat(r,".*?(?=\\s").concat(r,"|$)"),"gm"):new RegExp("".concat(u,"(?:^)?").concat(r,"[^\\s").concat(r,"]*"),"gm"),c=e.before(),l=e.end(),d=e.doc.textBetween(c,l,"\0","\0"),f=s.exec(d);null!==f;){var p=f.input.slice(Math.max(0,f.index-1),f.index);if(/^[\s\0]?$/.test(p)){var g=f.index+e.start(),h=g+f[0].length;o&&a.test(d.slice(h-1,h+1))&&(f[0]+=" ",h+=1),g<e.pos&&h>=e.pos&&(t={range:{from:g,to:h},query:f[0].slice(n.length),text:f[0]})}f=s.exec(d)}return t}}(n)(a),u=(Math.random()+1).toString(36).substr(2,5);i?(o.active=!0,o.decorationId=t.decorationId?t.decorationId:u,o.range=i.range,o.query=i.query,o.text=i.text):o.active=!1}else o.active=!1;return o.active||(o.decorationId=null,o.range={},o.query=null,o.text=null),o}},props:{handleKeyDown:function handleKeyDown(e,t){var n=this.getState(e.state),r=n.active,o=n.range;return!!r&&b({view:e,event:t,range:o})},decorations:function decorations(e){var t=this.getState(e),n=t.active,r=t.range,o=t.decorationId;return n?u.DecorationSet.create(e.doc,[u.Decoration.inline(r.from,r.to,{nodeName:"span",class:s,"data-decoration-id":o})]):null}}})}var T=function(e){_inherits(Mention,e);var t=_createSuper(Mention);function Mention(){return _classCallCheck(this,Mention),t.apply(this,arguments)}return _createClass(Mention,[{key:"commands",value:function commands(e){var t=this,n=e.schema;return function(e){return(0,o.replaceText)(null,n.nodes[t.name],e)}}},{key:"name",get:function get(){return"mention"}},{key:"defaultOptions",get:function get(){return{matcher:{char:"@",allowSpaces:!1,startOfLine:!1},mentionClass:"mention",suggestionClass:"mention-suggestion"}}},{key:"schema",get:function get(){var e=this;return{attrs:{id:{},label:{}},group:"inline",inline:!0,selectable:!1,atom:!0,toDOM:function toDOM(t){return["span",{class:e.options.mentionClass,"data-mention-id":t.attrs.id},"".concat(e.options.matcher.char).concat(t.attrs.label)]},parseDOM:[{tag:"span[data-mention-id]",getAttrs:function getAttrs(t){return{id:t.getAttribute("data-mention-id"),label:t.innerText.split(e.options.matcher.char).join("")}}}]}}},{key:"plugins",get:function get(){var e=this;return[SuggestionsPlugin({command:function command(t){var n=t.range,r=t.attrs,a=t.schema;return(0,o.replaceText)(n,a.nodes[e.name],r)},appendText:" ",matcher:this.options.matcher,items:this.options.items,onEnter:this.options.onEnter,onChange:this.options.onChange,onExit:this.options.onExit,onKeyDown:this.options.onKeyDown,onFilter:this.options.onFilter,suggestionClass:this.options.suggestionClass})]}}]),Mention}(r.Node),w=function(e){_inherits(OrderedList,e);var t=_createSuper(OrderedList);function OrderedList(){return _classCallCheck(this,OrderedList),t.apply(this,arguments)}return _createClass(OrderedList,[{key:"commands",value:function commands(e){var t=e.type,n=e.schema;return function(){return(0,o.toggleList)(t,n.nodes.list_item)}}},{key:"keys",value:function keys(e){var t=e.type,n=e.schema;return{"Shift-Ctrl-9":(0,o.toggleList)(t,n.nodes.list_item)}}},{key:"inputRules",value:function inputRules(e){var t=e.type;return[(0,o.wrappingInputRule)(/^(\d+)\.\s$/,t,(function(e){return{order:+e[1]}}),(function(e,t){return t.childCount+t.attrs.order===+e[1]}))]}},{key:"name",get:function get(){return"ordered_list"}},{key:"schema",get:function get(){return{attrs:{order:{default:1}},content:"list_item+",group:"block",parseDOM:[{tag:"ol",getAttrs:function getAttrs(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM:function toDOM(e){return 1===e.attrs.order?["ol",0]:["ol",{start:e.attrs.order},0]}}}}]),OrderedList}(r.Node),R=(0,l.tableNodes)({tableGroup:"block",cellContent:"block+",cellAttributes:{background:{default:null,getFromDOM:function getFromDOM(e){return e.style.backgroundColor||null},setDOMAttr:function setDOMAttr(e,t){if(e){var n={style:"".concat(t.style||"","background-color: ").concat(e,";")};Object.assign(t,n)}}}}}),D=function(e){_inherits(Table,e);var t=_createSuper(Table);function Table(){return _classCallCheck(this,Table),t.apply(this,arguments)}return _createClass(Table,[{key:"commands",value:function commands(e){var t=e.schema;return{createTable:function createTable$1(e){var n=e.rowsCount,r=e.colsCount,o=e.withHeaderRow;return function(e,a){var i=e.tr.selection.anchor+1,u=(0,s.createTable)(t,n,r,o),l=e.tr.replaceSelectionWith(u).scrollIntoView(),d=l.doc.resolve(i);l.setSelection(c.TextSelection.near(d)),a(l)}},addColumnBefore:function addColumnBefore$1(){return l.addColumnBefore},addColumnAfter:function addColumnAfter$1(){return l.addColumnAfter},deleteColumn:function deleteColumn$1(){return l.deleteColumn},addRowBefore:function addRowBefore$1(){return l.addRowBefore},addRowAfter:function addRowAfter$1(){return l.addRowAfter},deleteRow:function deleteRow$1(){return l.deleteRow},deleteTable:function deleteTable$1(){return l.deleteTable},toggleCellMerge:function toggleCellMerge(){return function(e,t){(0,l.mergeCells)(e,t)||(0,l.splitCell)(e,t)}},mergeCells:function mergeCells$1(){return l.mergeCells},splitCell:function splitCell$1(){return l.splitCell},toggleHeaderColumn:function toggleHeaderColumn$1(){return l.toggleHeaderColumn},toggleHeaderRow:function toggleHeaderRow$1(){return l.toggleHeaderRow},toggleHeaderCell:function toggleHeaderCell$1(){return l.toggleHeaderCell},setCellAttr:function setCellAttr$1(){return l.setCellAttr},fixTables:function fixTables$1(){return l.fixTables}}}},{key:"keys",value:function keys(){return{Tab:(0,l.goToNextCell)(1),"Shift-Tab":(0,l.goToNextCell)(-1)}}},{key:"name",get:function get(){return"table"}},{key:"defaultOptions",get:function get(){return{resizable:!1}}},{key:"schema",get:function get(){return R.table}},{key:"plugins",get:function get(){return[].concat(_toConsumableArray(this.options.resizable?[(0,l.columnResizing)()]:[]),[(0,l.tableEditing)()])}}]),Table}(r.Node),M=function(e){_inherits(TableHeader,e);var t=_createSuper(TableHeader);function TableHeader(){return _classCallCheck(this,TableHeader),t.apply(this,arguments)}return _createClass(TableHeader,[{key:"name",get:function get(){return"table_header"}},{key:"schema",get:function get(){return R.table_header}}]),TableHeader}(r.Node),x=function(e){_inherits(TableCell,e);var t=_createSuper(TableCell);function TableCell(){return _classCallCheck(this,TableCell),t.apply(this,arguments)}return _createClass(TableCell,[{key:"name",get:function get(){return"table_cell"}},{key:"schema",get:function get(){return R.table_cell}}]),TableCell}(r.Node),A=function(e){_inherits(TableRow,e);var t=_createSuper(TableRow);function TableRow(){return _classCallCheck(this,TableRow),t.apply(this,arguments)}return _createClass(TableRow,[{key:"name",get:function get(){return"table_row"}},{key:"schema",get:function get(){return R.table_row}}]),TableRow}(r.Node),I=function(e){_inherits(TodoItem,e);var t=_createSuper(TodoItem);function TodoItem(){return _classCallCheck(this,TodoItem),t.apply(this,arguments)}return _createClass(TodoItem,[{key:"keys",value:function keys(e){var t=e.type;return{Enter:(0,o.splitToDefaultListItem)(t),Tab:this.options.nested?(0,o.sinkListItem)(t):function(){},"Shift-Tab":(0,o.liftListItem)(t)}}},{key:"name",get:function get(){return"todo_item"}},{key:"defaultOptions",get:function get(){return{nested:!1}}},{key:"view",get:function get(){return{props:["node","updateAttrs","view"],methods:{onChange:function onChange(){this.updateAttrs({done:!this.node.attrs.done})}},template:'\n        <li :data-type="node.type.name" :data-done="node.attrs.done.toString()" data-drag-handle>\n          <span class="todo-checkbox" contenteditable="false" @click="onChange"></span>\n          <div class="todo-content" ref="content" :contenteditable="view.editable.toString()"></div>\n        </li>\n      '}}},{key:"schema",get:function get(){var e=this;return{attrs:{done:{default:!1}},draggable:!0,content:this.options.nested?"(paragraph|todo_list)+":"paragraph+",toDOM:function toDOM(t){var n=t.attrs.done;return["li",{"data-type":e.name,"data-done":n.toString()},["span",{class:"todo-checkbox",contenteditable:"false"}],["div",{class:"todo-content"},0]]},parseDOM:[{priority:51,tag:'[data-type="'.concat(this.name,'"]'),getAttrs:function getAttrs(e){return{done:"true"===e.getAttribute("data-done")}}}]}}}]),TodoItem}(r.Node),B=function(e){_inherits(TodoList,e);var t=_createSuper(TodoList);function TodoList(){return _classCallCheck(this,TodoList),t.apply(this,arguments)}return _createClass(TodoList,[{key:"commands",value:function commands(e){var t=e.type,n=e.schema;return function(){return(0,o.toggleList)(t,n.nodes.todo_item)}}},{key:"inputRules",value:function inputRules(e){var t=e.type;return[(0,o.wrappingInputRule)(/^\s*(\[ \])\s$/,t)]}},{key:"name",get:function get(){return"todo_list"}},{key:"schema",get:function get(){var e=this;return{group:"block",content:"todo_item+",toDOM:function toDOM(){return["ul",{"data-type":e.name},0]},parseDOM:[{priority:51,tag:'[data-type="'.concat(this.name,'"]')}]}}}]),TodoList}(r.Node),H=function(e){_inherits(Bold,e);var t=_createSuper(Bold);function Bold(){return _classCallCheck(this,Bold),t.apply(this,arguments)}return _createClass(Bold,[{key:"keys",value:function keys(e){var t=e.type;return{"Mod-b":(0,o.toggleMark)(t)}}},{key:"commands",value:function commands(e){var t=e.type;return function(){return(0,o.toggleMark)(t)}}},{key:"inputRules",value:function inputRules(e){var t=e.type;return[(0,o.markInputRule)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,t)]}},{key:"pasteRules",value:function pasteRules(e){var t=e.type;return[(0,o.markPasteRule)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)/g,t)]}},{key:"name",get:function get(){return"bold"}},{key:"schema",get:function get(){return{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function getAttrs(e){return"normal"!==e.style.fontWeight&&null}},{style:"font-weight",getAttrs:function getAttrs(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}],toDOM:function toDOM(){return["strong",0]}}}}]),Bold}(r.Mark),P=function(e){_inherits(Code,e);var t=_createSuper(Code);function Code(){return _classCallCheck(this,Code),t.apply(this,arguments)}return _createClass(Code,[{key:"keys",value:function keys(e){var t=e.type;return{"Mod-`":(0,o.toggleMark)(t)}}},{key:"commands",value:function commands(e){var t=e.type;return function(){return(0,o.toggleMark)(t)}}},{key:"inputRules",value:function inputRules(e){var t=e.type;return[(0,o.markInputRule)(/(?:`)([^`]+)(?:`)$/,t)]}},{key:"pasteRules",value:function pasteRules(e){var t=e.type;return[(0,o.markPasteRule)(/(?:`)([^`]+)(?:`)/g,t)]}},{key:"name",get:function get(){return"code"}},{key:"schema",get:function get(){return{excludes:"_",parseDOM:[{tag:"code"}],toDOM:function toDOM(){return["code",0]}}}}]),Code}(r.Mark),L=function(e){_inherits(Italic,e);var t=_createSuper(Italic);function Italic(){return _classCallCheck(this,Italic),t.apply(this,arguments)}return _createClass(Italic,[{key:"keys",value:function keys(e){var t=e.type;return{"Mod-i":(0,o.toggleMark)(t)}}},{key:"commands",value:function commands(e){var t=e.type;return function(){return(0,o.toggleMark)(t)}}},{key:"inputRules",value:function inputRules(e){var t=e.type;return[(0,o.markInputRule)(/(?:^|[^_])(_([^_]+)_)$/,t),(0,o.markInputRule)(/(?:^|[^*])(\*([^*]+)\*)$/,t)]}},{key:"pasteRules",value:function pasteRules(e){var t=e.type;return[(0,o.markPasteRule)(/_([^_]+)_/g,t),(0,o.markPasteRule)(/\*([^*]+)\*/g,t)]}},{key:"name",get:function get(){return"italic"}},{key:"schema",get:function get(){return{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function toDOM(){return["em",0]}}}}]),Italic}(r.Mark),N=function(e){_inherits(Link,e);var t=_createSuper(Link);function Link(){return _classCallCheck(this,Link),t.apply(this,arguments)}return _createClass(Link,[{key:"commands",value:function commands(e){var t=e.type;return function(e){return e.href?(0,o.updateMark)(t,e):(0,o.removeMark)(t)}}},{key:"pasteRules",value:function pasteRules(e){var t=e.type;return[(0,o.pasteRule)(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g,t,(function(e){return{href:e}}))]}},{key:"name",get:function get(){return"link"}},{key:"defaultOptions",get:function get(){return{openOnClick:!0}}},{key:"schema",get:function get(){return{attrs:{href:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function getAttrs(e){return{href:e.getAttribute("href")}}}],toDOM:function toDOM(e){return["a",_objectSpread2({},e.attrs,{rel:"noopener noreferrer nofollow"}),0]}}}},{key:"plugins",get:function get(){return this.options.openOnClick?[new r.Plugin({props:{handleClick:function handleClick(e,t,n){var r=e.state.schema,o=(0,d.getMarkAttrs)(e.state,r.marks.link);o.href&&n.target instanceof HTMLAnchorElement&&(n.stopPropagation(),window.open(o.href))}}})]:[]}}]),Link}(r.Mark),j=function(e){_inherits(Strike,e);var t=_createSuper(Strike);function Strike(){return _classCallCheck(this,Strike),t.apply(this,arguments)}return _createClass(Strike,[{key:"keys",value:function keys(e){var t=e.type;return{"Mod-d":(0,o.toggleMark)(t)}}},{key:"commands",value:function commands(e){var t=e.type;return function(){return(0,o.toggleMark)(t)}}},{key:"inputRules",value:function inputRules(e){var t=e.type;return[(0,o.markInputRule)(/~([^~]+)~$/,t)]}},{key:"pasteRules",value:function pasteRules(e){var t=e.type;return[(0,o.markPasteRule)(/~([^~]+)~/g,t)]}},{key:"name",get:function get(){return"strike"}},{key:"schema",get:function get(){return{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:function getAttrs(e){return"line-through"===e}}],toDOM:function toDOM(){return["s",0]}}}}]),Strike}(r.Mark),$=function(e){_inherits(Underline,e);var t=_createSuper(Underline);function Underline(){return _classCallCheck(this,Underline),t.apply(this,arguments)}return _createClass(Underline,[{key:"keys",value:function keys(e){var t=e.type;return{"Mod-u":(0,o.toggleMark)(t)}}},{key:"commands",value:function commands(e){var t=e.type;return function(){return(0,o.toggleMark)(t)}}},{key:"name",get:function get(){return"underline"}},{key:"schema",get:function get(){return{parseDOM:[{tag:"u"},{style:"text-decoration",getAttrs:function getAttrs(e){return"underline"===e}}],toDOM:function toDOM(){return["u",0]}}}}]),Underline}(r.Mark),E=function(e){_inherits(Collaboration,e);var t=_createSuper(Collaboration);function Collaboration(){return _classCallCheck(this,Collaboration),t.apply(this,arguments)}return _createClass(Collaboration,[{key:"init",value:function init(){var e=this;this.getSendableSteps=this.debounce((function(t){var n=(0,p._1)(t);n&&e.options.onSendable({editor:e.editor,sendable:{version:n.version,steps:n.steps.map((function(e){return e.toJSON()})),clientID:n.clientID}})}),this.options.debounce),this.editor.on("transaction",(function(t){var n=t.state;e.getSendableSteps(n)}))}},{key:"debounce",value:function debounce(e,t){var n;return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];n&&clearTimeout(n),n=setTimeout((function(){e.apply(void 0,o),n=null}),t)}}},{key:"name",get:function get(){return"collaboration"}},{key:"defaultOptions",get:function get(){var e=this;return{version:0,clientID:Math.floor(4294967295*Math.random()),debounce:250,onSendable:function onSendable(){},update:function update(t){var n=t.steps,r=t.version,o=e.editor,a=o.state,i=o.view,u=o.schema;(0,p.bo)(a)>r||i.dispatch((0,p.$E)(a,n.map((function(e){return f.Step.fromJSON(u,e.step)})),n.map((function(e){return e.clientID}))))}}}},{key:"plugins",get:function get(){return[(0,p.Cw)({version:this.options.version,clientID:this.options.clientID})]}}]),Collaboration}(r.Extension),q=function(e){_inherits(Focus,e);var t=_createSuper(Focus);function Focus(){return _classCallCheck(this,Focus),t.apply(this,arguments)}return _createClass(Focus,[{key:"name",get:function get(){return"focus"}},{key:"defaultOptions",get:function get(){return{className:"has-focus",nested:!1}}},{key:"plugins",get:function get(){var e=this;return[new r.Plugin({props:{decorations:function decorations(t){var n=t.doc,r=t.plugins,o=t.selection,a=r.find((function(e){return e.key.startsWith("editable$")})).props.editable()&&e.options.className,i=e.editor.focused,s=o.anchor,decorations=[];return!(!a||!i)&&(n.descendants((function(t,n){if(s>=n&&s<=n+t.nodeSize&&!t.isText){var r=u.Decoration.node(n,n+t.nodeSize,{class:e.options.className});decorations.push(r)}return e.options.nested})),u.DecorationSet.create(n,decorations))}}})]}}]),Focus}(r.Extension),z=function(e){_inherits(History,e);var t=_createSuper(History);function History(){return _classCallCheck(this,History),t.apply(this,arguments)}return _createClass(History,[{key:"keys",value:function keys(){return{"Mod-z":g.undo,"Mod-y":g.redo,"Shift-Mod-z":g.redo}}},{key:"commands",value:function commands(){return{undo:function undo$1(){return g.undo},redo:function redo$1(){return g.redo},undoDepth:function undoDepth$1(){return g.undoDepth},redoDepth:function redoDepth$1(){return g.redoDepth}}}},{key:"name",get:function get(){return"history"}},{key:"defaultOptions",get:function get(){return{depth:"",newGroupDelay:""}}},{key:"plugins",get:function get(){return[(0,g.history)({depth:this.options.depth,newGroupDelay:this.options.newGroupDelay})]}}]),History}(r.Extension),W=function(e){_inherits(Placeholder,e);var t=_createSuper(Placeholder);function Placeholder(){return _classCallCheck(this,Placeholder),t.apply(this,arguments)}return _createClass(Placeholder,[{key:"name",get:function get(){return"placeholder"}},{key:"defaultOptions",get:function get(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",emptyNodeText:"Write something â€¦",showOnlyWhenEditable:!0,showOnlyCurrent:!0}}},{key:"plugins",get:function get(){var e=this;return[new r.Plugin({props:{decorations:function decorations(t){var n=t.doc,r=t.plugins,o=t.selection,a=r.find((function(e){return e.key.startsWith("editable$")})).props.editable()||!e.options.showOnlyWhenEditable,i=o.anchor,decorations=[],s=0===n.textContent.length;return!!a&&(n.descendants((function(t,n){var r=i>=n&&i<=n+t.nodeSize,o=0===t.content.size;if((r||!e.options.showOnlyCurrent)&&o){var a=[e.options.emptyNodeClass];s&&a.push(e.options.emptyEditorClass);var c=u.Decoration.node(n,n+t.nodeSize,{class:a.join(" "),"data-empty-text":"function"==typeof e.options.emptyNodeText?e.options.emptyNodeText(t):e.options.emptyNodeText});decorations.push(c)}return!1})),u.DecorationSet.create(n,decorations))}}})]}}]),Placeholder}(r.Extension),F=function(e){_inherits(Search,e);var t=_createSuper(Search);function Search(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,Search),(e=t.call(this,n)).results=[],e.searchTerm=null,e._updating=!1,e}return _createClass(Search,[{key:"commands",value:function commands(){var e=this;return{find:function find(t){return e.find(t)},replace:function replace(t){return e.replace(t)},replaceAll:function replaceAll(t){return e.replaceAll(t)},clearSearch:function clearSearch(){return e.clear()}}}},{key:"_search",value:function _search(e){var t=this;this.results=[];var n=[],r=0;this.searchTerm&&(e.descendants((function(e,t){e.isText?n[r]?n[r]={text:n[r].text+e.text,pos:n[r].pos}:n[r]={text:e.text,pos:t}:r+=1})),n.forEach((function(e){for(var n,r=e.text,o=e.pos,a=t.findRegExp;(n=a.exec(r))&&""!==n[0];)t.results.push({from:o+n.index,to:o+n.index+n[0].length})})))}},{key:"replace",value:function replace(e){var t=this;return function(n,r){if(t.results[0]){var o=t.results[0],a=o.from,i=o.to;r(n.tr.insertText(e,a,i)),t.editor.commands.find(t.searchTerm)}}}},{key:"rebaseNextResult",value:function rebaseNextResult(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t+1;if(!this.results[r])return null;var o=this.results[t],a=o.from,i=o.to,u=i-a-e.length+n,s=this.results[r],c=s.from,l=s.to;return this.results[r]={to:l-u,from:c-u},u}},{key:"replaceAll",value:function replaceAll(e){var t=this;return function(n,r){var o,a=n.tr;t.results.length&&(t.results.forEach((function(n,r){var i=n.from,u=n.to;a.insertText(e,i,u),o=t.rebaseNextResult(e,r,o)})),r(a),t.editor.commands.find(t.searchTerm))}}},{key:"find",value:function find(e){var t=this;return function(n,r){t.searchTerm=t.options.disableRegex?e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"):e,t.updateView(n,r)}}},{key:"clear",value:function clear(){var e=this;return function(t,n){e.searchTerm=null,e.updateView(t,n)}}},{key:"updateView",value:function updateView(e,t){var n=e.tr;this._updating=!0,t(n),this._updating=!1}},{key:"createDeco",value:function createDeco(e){return this._search(e),this.decorations?u.DecorationSet.create(e,this.decorations):[]}},{key:"name",get:function get(){return"search"}},{key:"defaultOptions",get:function get(){return{autoSelectNext:!0,findClass:"find",searching:!1,caseSensitive:!1,disableRegex:!0,alwaysSearch:!1}}},{key:"findRegExp",get:function get(){return RegExp(this.searchTerm,this.options.caseSensitive?"gu":"gui")}},{key:"decorations",get:function get(){var e=this;return this.results.map((function(t){return u.Decoration.inline(t.from,t.to,{class:e.options.findClass})}))}},{key:"plugins",get:function get(){var e=this;return[new r.Plugin({state:{init:function init(){return u.DecorationSet.empty},apply:function apply(t,n){return e._updating||e.options.searching||t.docChanged&&e.options.alwaysSearch?e.createDeco(t.doc):t.docChanged?n.map(t.mapping,t.doc):n}},props:{decorations:function decorations(e){return this.getState(e)}}})]}}]),Search}(r.Extension),K=function(e){_inherits(TrailingNode,e);var t=_createSuper(TrailingNode);function TrailingNode(){return _classCallCheck(this,TrailingNode),t.apply(this,arguments)}return _createClass(TrailingNode,[{key:"name",get:function get(){return"trailing_node"}},{key:"defaultOptions",get:function get(){return{node:"paragraph",notAfter:["paragraph"]}}},{key:"plugins",get:function get(){var e=this,t=new r.PluginKey(this.name),n=Object.entries(this.editor.schema.nodes).map((function(e){return _slicedToArray(e,2)[1]})).filter((function(t){return e.options.notAfter.includes(t.name)}));return[new r.Plugin({key:t,view:function view(){return{update:function update(n){var r=n.state;if(t.getState(r)){var o=r.doc,a=r.schema,i=r.tr,u=a.nodes[e.options.node],s=i.insert(o.content.size,u.create());n.dispatch(s)}}}},state:{init:function init(e,t){var r=t.tr.doc.lastChild;return!(0,d.nodeEqualsType)({node:r,types:n})},apply:function apply(e,t){if(!e.docChanged)return t;var r=e.doc.lastChild;return!(0,d.nodeEqualsType)({node:r,types:n})}}})]}}]),TrailingNode}(r.Extension)}}]);