/*! For license information please see prepare.ff33148d7c9526bb3117.js.LICENSE.txt */
(self.webpackChunkep_web=self.webpackChunkep_web||[]).push([["../libs/wp/@pixi/prepare/prepare"],{"./node_modules/@pixi/prepare/lib/prepare.es.js":function(e,t,i){"use strict";i.d(t,{Zq:function(){return l},fh:function(){return p},B9:function(){return h},FI:function(){return d}});var r=i("./node_modules/@pixi/settings/lib/settings.es.js"),n=i("./node_modules/@pixi/core/lib/core.es.js"),s=i("./node_modules/@pixi/graphics/lib/graphics.es.js"),o=i("./node_modules/@pixi/ticker/lib/ticker.es.js"),u=i("./node_modules/@pixi/display/lib/display.es.js"),a=i("./node_modules/@pixi/text/lib/text.es.js");r.X.UPLOADS_PER_FRAME=4;var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};var p=function(){function CountLimiter(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return CountLimiter.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},CountLimiter.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},CountLimiter}();function findMultipleBaseTextures(e,t){var i=!1;if(e&&e._textures&&e._textures.length)for(var r=0;r<e._textures.length;r++)if(e._textures[r]instanceof n.xE){var s=e._textures[r].baseTexture;-1===t.indexOf(s)&&(t.push(s),i=!0)}return i}function findBaseTexture(e,t){if(e.baseTexture instanceof n.VL){var i=e.baseTexture;return-1===t.indexOf(i)&&t.push(i),!0}return!1}function findTexture(e,t){if(e._texture&&e._texture instanceof n.xE){var i=e._texture.baseTexture;return-1===t.indexOf(i)&&t.push(i),!0}return!1}function drawText(e,t){return t instanceof a.xv&&(t.updateText(!0),!0)}function calculateTextStyle(e,t){if(t instanceof a.pn){var i=t.toFontString();return a._A.measureFont(i),!0}return!1}function findText(e,t){if(e instanceof a.xv){-1===t.indexOf(e.style)&&t.push(e.style),-1===t.indexOf(e)&&t.push(e);var i=e._texture.baseTexture;return-1===t.indexOf(i)&&t.push(i),!0}return!1}function findTextStyle(e,t){return e instanceof a.pn&&(-1===t.indexOf(e)&&t.push(e),!0)}var l=function(){function BasePrepare(e){var t=this;this.limiter=new p(r.X.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){t.queue&&t.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}return BasePrepare.prototype.upload=function(e,t){"function"==typeof e&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,o.vB.system.addOnce(this.tick,this,o.uF.UTILITY))):t&&t()},BasePrepare.prototype.tick=function(){setTimeout(this.delayedTick,0)},BasePrepare.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var i=0,r=this.uploadHooks.length;i<r;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)o.vB.system.addOnce(this.tick,this,o.uF.UTILITY);else{this.ticking=!1;var n=this.completes.slice(0);this.completes.length=0;for(i=0,r=n.length;i<r;i++)n[i]()}},BasePrepare.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},BasePrepare.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},BasePrepare.prototype.add=function(e){for(var t=0,i=this.addHooks.length;t<i&&!this.addHooks[t](e,this.queue);t++);if(e instanceof u.W2)for(t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this},BasePrepare.prototype.destroy=function(){this.ticking&&o.vB.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},BasePrepare}();function uploadBaseTextures(e,t){return t instanceof n.VL&&(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0)}function uploadGraphics(e,t){if(!(t instanceof s.TC))return!1;var i=t.geometry;t.finishPoly(),i.updateBatches();for(var r=i.batches,n=0;n<r.length;n++){var o=r[n].style.texture;o&&uploadBaseTextures(e,o.baseTexture)}return i.batchable||e.geometry.bind(i,t._resolveDirectShader(e)),!0}function findGraphics(e,t){return e instanceof s.TC&&(t.push(e),!0)}var h=function(e){function Prepare(t){var i=e.call(this,t)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(findGraphics),i.registerUploadHook(uploadBaseTextures),i.registerUploadHook(uploadGraphics),i}return function __extends(e,t){function __(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}(Prepare,e),Prepare}(l),d=function(){function TimeLimiter(e){this.maxMilliseconds=e,this.frameStart=0}return TimeLimiter.prototype.beginFrame=function(){this.frameStart=Date.now()},TimeLimiter.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},TimeLimiter}()}}]);