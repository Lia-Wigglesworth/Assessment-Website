(self.webpackChunkep_web=self.webpackChunkep_web||[]).push([["../libs/wp/prosemirror-markdown/prosemirror-markdown"],{"./node_modules/prosemirror-markdown/dist/index.es.js":function(t,e,r){"use strict";r.r(e),r.d(e,{MarkdownParser:function(){return l},MarkdownSerializer:function(){return u},MarkdownSerializerState:function(){return p},defaultMarkdownParser:function(){return c},defaultMarkdownSerializer:function(){return h},schema:function(){return s}});var n=r("./node_modules/prosemirror-model/dist/index.es.js"),o=r("./node_modules/markdown-it/index.js"),i=r.n(o),s=new n.Schema({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function toDOM(){return["p",0]}},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM:function toDOM(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function toDOM(){return["div",["hr"]]}},heading:{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function toDOM(t){return["h"+t.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:function(t){return{params:t.getAttribute("data-params")||""}}}],toDOM:function toDOM(t){return["pre",t.attrs.params?{"data-params":t.attrs.params}:{},["code",0]]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs:function getAttrs(t){return{order:t.hasAttribute("start")?+t.getAttribute("start"):1,tight:t.hasAttribute("data-tight")}}}],toDOM:function toDOM(t){return["ol",{start:1==t.attrs.order?null:t.attrs.order,"data-tight":t.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:function(t){return{tight:t.hasAttribute("data-tight")}}}],toDOM:function toDOM(t){return["ul",{"data-tight":t.attrs.tight?"true":null},0]}},list_item:{content:"paragraph block*",defining:!0,parseDOM:[{tag:"li"}],toDOM:function toDOM(){return["li",0]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function getAttrs(t){return{src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")}}}],toDOM:function toDOM(t){return["img",t.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function toDOM(){return["br"]}}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:function(t){return"italic"==t&&null}}],toDOM:function toDOM(){return["em"]}},strong:{parseDOM:[{tag:"b"},{tag:"strong"},{style:"font-weight",getAttrs:function(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}}],toDOM:function toDOM(){return["strong"]}},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function getAttrs(t){return{href:t.getAttribute("href"),title:t.getAttribute("title")}}}],toDOM:function toDOM(t){return["a",t.attrs]}},code:{parseDOM:[{tag:"code"}],toDOM:function toDOM(){return["code"]}}}});var a=function MarkdownParseState(t,e){this.schema=t,this.stack=[{type:t.topNodeType,content:[]}],this.marks=n.Mark.none,this.tokenHandlers=e};function attrs(t,e){return t.getAttrs?t.getAttrs(e):t.attrs instanceof Function?t.attrs(e):t.attrs}function noOpenClose(t){return"code_inline"==t||"code_block"==t||"fence"==t}function withoutTrailingNewline(t){return"\n"==t[t.length-1]?t.slice(0,t.length-1):t}function noOp(){}a.prototype.top=function top(){return this.stack[this.stack.length-1]},a.prototype.push=function push(t){this.stack.length&&this.top().content.push(t)},a.prototype.addText=function addText(t){if(t){var e,r=this.top().content,o=r[r.length-1],i=this.schema.text(t,this.marks);o&&(e=function maybeMerge(t,e){if(t.isText&&e.isText&&n.Mark.sameSet(t.marks,e.marks))return t.withText(t.text+e.text)}(o,i))?r[r.length-1]=e:r.push(i)}},a.prototype.openMark=function openMark(t){this.marks=t.addToSet(this.marks)},a.prototype.closeMark=function closeMark(t){this.marks=t.removeFromSet(this.marks)},a.prototype.parseTokens=function parseTokens(t){for(var e=0;e<t.length;e++){var r=t[e],n=this.tokenHandlers[r.type];if(!n)throw new Error("Token type `"+r.type+"` not supported by Markdown parser");n(this,r)}},a.prototype.addNode=function addNode(t,e,r){var n=t.createAndFill(e,r,this.marks);return n?(this.push(n),n):null},a.prototype.openNode=function openNode(t,e){this.stack.push({type:t,attrs:e,content:[]})},a.prototype.closeNode=function closeNode(){this.marks.length&&(this.marks=n.Mark.none);var t=this.stack.pop();return this.addNode(t.type,t.attrs,t.content)};var l=function MarkdownParser(t,e,r){this.tokens=r,this.schema=t,this.tokenizer=e,this.tokenHandlers=function tokenHandlers(t,e){var r=Object.create(null),loop=function(n){var o=e[n];if(o.block){var i=t.nodeType(o.block);noOpenClose(n)?r[n]=function(t,e){t.openNode(i,attrs(o,e)),t.addText(withoutTrailingNewline(e.content)),t.closeNode()}:(r[n+"_open"]=function(t,e){return t.openNode(i,attrs(o,e))},r[n+"_close"]=function(t){return t.closeNode()})}else if(o.node){var s=t.nodeType(o.node);r[n]=function(t,e){return t.addNode(s,attrs(o,e))}}else if(o.mark){var a=t.marks[o.mark];noOpenClose(n)?r[n]=function(t,e){t.openMark(a.create(attrs(o,e))),t.addText(withoutTrailingNewline(e.content)),t.closeMark(a)}:(r[n+"_open"]=function(t,e){return t.openMark(a.create(attrs(o,e)))},r[n+"_close"]=function(t){return t.closeMark(a)})}else{if(!o.ignore)throw new RangeError("Unrecognized parsing spec "+JSON.stringify(o));noOpenClose(n)?r[n]=noOp:(r[n+"_open"]=noOp,r[n+"_close"]=noOp)}};for(var n in e)loop(n);return r.text=function(t,e){return t.addText(e.content)},r.inline=function(t,e){return t.parseTokens(e.children)},r.softbreak=r.softbreak||function(t){return t.addText("\n")},r}(t,r)};l.prototype.parse=function parse(t){var e,r=new a(this.schema,this.tokenHandlers);r.parseTokens(this.tokenizer.parse(t,{}));do{e=r.closeNode()}while(r.stack.length);return e};var c=new l(s,i()("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list"},ordered_list:{block:"ordered_list",getAttrs:function(t){return{order:+t.attrGet("start")||1}}},heading:{block:"heading",getAttrs:function(t){return{level:+t.tag.slice(1)}}},code_block:{block:"code_block"},fence:{block:"code_block",getAttrs:function(t){return{params:t.info||""}}},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:function(t){return{src:t.attrGet("src"),title:t.attrGet("title")||null,alt:t.children[0]&&t.children[0].content||null}}},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:function(t){return{href:t.attrGet("href"),title:t.attrGet("title")||null}}},code_inline:{mark:"code"}}),u=function MarkdownSerializer(t,e){this.nodes=t,this.marks=e};u.prototype.serialize=function serialize(t,e){var r=new p(this.nodes,this.marks,e);return r.renderContent(t),r.out};var h=new u({blockquote:function blockquote(t,e){t.wrapBlock("> ",null,e,(function(){return t.renderContent(e)}))},code_block:function code_block(t,e){t.write("```"+(e.attrs.params||"")+"\n"),t.text(e.textContent,!1),t.ensureNewLine(),t.write("```"),t.closeBlock(e)},heading:function heading(t,e){t.write(t.repeat("#",e.attrs.level)+" "),t.renderInline(e),t.closeBlock(e)},horizontal_rule:function horizontal_rule(t,e){t.write(e.attrs.markup||"---"),t.closeBlock(e)},bullet_list:function bullet_list(t,e){t.renderList(e,"  ",(function(){return(e.attrs.bullet||"*")+" "}))},ordered_list:function ordered_list(t,e){var r=e.attrs.order||1,n=String(r+e.childCount-1).length,o=t.repeat(" ",n+2);t.renderList(e,o,(function(e){var o=String(r+e);return t.repeat(" ",n-o.length)+o+". "}))},list_item:function list_item(t,e){t.renderContent(e)},paragraph:function paragraph(t,e){t.renderInline(e),t.closeBlock(e)},image:function image(t,e){t.write("!["+t.esc(e.attrs.alt||"")+"]("+t.esc(e.attrs.src)+(e.attrs.title?" "+t.quote(e.attrs.title):"")+")")},hard_break:function hard_break(t,e,r,n){for(var o=n+1;o<r.childCount;o++)if(r.child(o).type!=e.type)return void t.write("\\\n")},text:function text(t,e){t.text(e.text)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open:function open(t,e,r,n){return isPlainURL(e,r,n,1)?"<":"["},close:function close(t,e,r,n){return isPlainURL(e,r,n,-1)?">":"]("+t.esc(e.attrs.href)+(e.attrs.title?" "+t.quote(e.attrs.title):"")+")"}},code:{open:function open(t,e,r,n){return backticksFor(r.child(n),-1)},close:function close(t,e,r,n){return backticksFor(r.child(n-1),1)},escape:!1}});function backticksFor(t,e){var r,n=/`+/g,o=0;if(t.isText)for(;r=n.exec(t.text);)o=Math.max(o,r[0].length);for(var i=o>0&&e>0?" `":"`",s=0;s<o;s++)i+="`";return o>0&&e<0&&(i+=" "),i}function isPlainURL(t,e,r,n){if(t.attrs.title||!/^\w+:/.test(t.attrs.href))return!1;var o=e.child(r+(n<0?-1:0));if(!o.isText||o.text!=t.attrs.href||o.marks[o.marks.length-1]!=t)return!1;if(r==(n<0?1:e.childCount-1))return!0;var i=e.child(r+(n<0?-2:1));return!t.isInSet(i.marks)}var p=function MarkdownSerializerState(t,e,r){this.nodes=t,this.marks=e,this.delim=this.out="",this.closed=!1,this.inTightList=!1,this.options=r||{},void 0===this.options.tightLists&&(this.options.tightLists=!1)};p.prototype.flushClose=function flushClose(t){if(this.closed){if(this.atBlank()||(this.out+="\n"),null==t&&(t=2),t>1){var e=this.delim,r=/\s+$/.exec(e);r&&(e=e.slice(0,e.length-r[0].length));for(var n=1;n<t;n++)this.out+=e+"\n"}this.closed=!1}},p.prototype.wrapBlock=function wrapBlock(t,e,r,n){var o=this.delim;this.write(e||t),this.delim+=t,n(),this.delim=o,this.closeBlock(r)},p.prototype.atBlank=function atBlank(){return/(^|\n)$/.test(this.out)},p.prototype.ensureNewLine=function ensureNewLine(){this.atBlank()||(this.out+="\n")},p.prototype.write=function write(t){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),t&&(this.out+=t)},p.prototype.closeBlock=function closeBlock(t){this.closed=t},p.prototype.text=function text(t,e){for(var r=t.split("\n"),n=0;n<r.length;n++){var o=this.atBlank()||this.closed;this.write(),this.out+=!1!==e?this.esc(r[n],o):r[n],n!=r.length-1&&(this.out+="\n")}},p.prototype.render=function render(t,e,r){if("number"==typeof e)throw new Error("!");this.nodes[t.type.name](this,t,e,r)},p.prototype.renderContent=function renderContent(t){var e=this;t.forEach((function(r,n,o){return e.render(r,t,o)}))},p.prototype.renderInline=function renderInline(t){var e=this,r=[],n="",progress=function(o,i,s){var a=o?o.marks:[];o&&"hard_break"===o.type.name&&(a=a.filter((function(e){if(s+1==t.childCount)return!1;var r=t.child(s+1);return e.isInSet(r.marks)&&(!r.isText||/\S/.test(r.text))})));var l=n;if(n="",o&&o.isText&&a.some((function(t){var r=e.marks[t.type.name];return r&&r.expelEnclosingWhitespace}))){var c=/^(\s*)(.*?)(\s*)$/m.exec(o.text),u=(c[0],c[1]),h=c[2],p=c[3];l+=u,n=p,(u||p)&&((o=h?o.withText(h):null)||(a=r))}var d=a.length&&a[a.length-1],f=d&&!1===e.marks[d.type.name].escape,k=a.length-(f?1:0);t:for(var g=0;g<k;g++){var m=a[g];if(!e.marks[m.type.name].mixable)break;for(var b=0;b<r.length;b++){var v=r[b];if(!e.marks[v.type.name].mixable)break;if(m.eq(v)){g>b?a=a.slice(0,b).concat(m).concat(a.slice(b,g)).concat(a.slice(g+1,k)):b>g&&(a=a.slice(0,g).concat(a.slice(g+1,b)).concat(m).concat(a.slice(b,k)));continue t}}}for(var M=0;M<Math.min(r.length,k)&&a[M].eq(r[M]);)++M;for(;M<r.length;)e.text(e.markString(r.pop(),!1,t,s),!1);if(l&&e.text(l),o){for(;r.length<k;){var w=a[r.length];r.push(w),e.text(e.markString(w,!0,t,s),!1)}f&&o.isText?e.text(e.markString(d,!0,t,s)+o.text+e.markString(d,!1,t,s+1),!1):e.render(o,t,s)}};t.forEach(progress),progress(null,0,t.childCount)},p.prototype.renderList=function renderList(t,e,r){var n=this;this.closed&&this.closed.type==t.type?this.flushClose(3):this.inTightList&&this.flushClose(1);var o=void 0!==t.attrs.tight?t.attrs.tight:this.options.tightLists,i=this.inTightList;this.inTightList=o,t.forEach((function(i,s,a){a&&o&&n.flushClose(1),n.wrapBlock(e,r(a),t,(function(){return n.render(i,t,a)}))})),this.inTightList=i},p.prototype.esc=function esc(t,e){return t=t.replace(/[`*\\~\[\]]/g,"\\$&"),e&&(t=t.replace(/^[:#\-*+]/,"\\$&").replace(/^(\d+)\./,"$1\\.")),t},p.prototype.quote=function quote(t){var e=-1==t.indexOf('"')?'""':-1==t.indexOf("'")?"''":"()";return e[0]+t+e[1]},p.prototype.repeat=function repeat(t,e){for(var r="",n=0;n<e;n++)r+=t;return r},p.prototype.markString=function markString(t,e,r,n){var o=this.marks[t.type.name],i=e?o.open:o.close;return"string"==typeof i?i:i(this,t,r,n)},p.prototype.getEnclosingWhitespace=function getEnclosingWhitespace(t){return{leading:(t.match(/^(\s+)/)||[])[0],trailing:(t.match(/(\s+)$/)||[])[0]}}}}]);