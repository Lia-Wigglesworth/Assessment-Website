(self.webpackChunkep_web=self.webpackChunkep_web||[]).push([["../libs/wp/@educationperfect/ep-web-session/ep-web-session"],{"./node_modules/@educationperfect/ep-web-session/dist/ep-web-session.js":function(e,t,i){!function webpackUniversalModuleDefinition(t,r){e.exports=r(i("./node_modules/tslib/tslib.es6.js"),i("./node_modules/@educationperfect/ep-web-browser-utils/dist/ep-web-browser-utils.min.js"),i("./node_modules/@educationperfect/ep-web-common/dist/common.js"),i("./node_modules/@educationperfect/ep-web-services/lib/services.js"),i("./node_modules/@educationperfect/ep-web-utils/dist/ep-web-utils.min.js"),i("./node_modules/rxjs/_esm5/index.js"),i("./node_modules/vuex-module-decorators/dist/esm/index.js"),i("./node_modules/@educationperfect/ep-web-renderer/dist/renderer.js"))}("undefined"!=typeof self&&self,(function(e,t,i,r,n,s,o,u){return function(){"use strict";var a={953:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});const r=i(435),n=i(18);t.createEventDefinition=()=>e=>{const eventCreator=t=>({eventType:e,payload:t});return eventCreator.eventType=e,eventCreator.toString=()=>e,eventCreator};t.bus=(()=>{const e={};return{channel:(t="defaultRxmqChannel")=>(e[t]||(e[t]=(()=>{const e=new r.Subject;return{publishEvent:(t,i)=>{if(!t.trim().length)throw new Error("key parameter must be a string and must not be empty");e.next({eventType:t,payload:i})},publish:t=>{if(!t.eventType.trim().length)throw new Error("key parameter must be a string and must not be empty");e.next({eventType:t.eventType,payload:t.payload})},observe:t=>{const i=Array.isArray(t)?t:[t];return e.asObservable().pipe(n.filter((e=>keyMatchAll(e.eventType,i))))},keyMatch:keyMatch}})()),e[t])}})();const keyMatchAll=(e,t)=>t.some((t=>{const i=(e=>!!e&&e.eventType)(r=t)?r.eventType:r;var r;return keyMatch(e,i)})),keyMatch=(e,t)=>{const i=e.split(":"),r=t.split(":"),n=i.length,s=r.length,o=Math.max(n,s);for(let e=0;e<o;e++){const t=i[e],n=r[e];if("**"===n&&void 0!==t)return!0;if(a=t,"*"!==(u=n)&&u!==a)return!1}var u,a;return!0}},565:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.EPSession=class EPSession{}},50:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});const r=i(953);t.APP_SESSION_CHANNEL="app:session",t.busLoginSuccessStudentApp=r.createEventDefinition()("session.app.login.success"),t.busLoginFailureStudentApp=r.createEventDefinition()("session.app.login.failure"),t.busLogOutSuccessStudentApp=r.createEventDefinition()("session.app.logout.success"),t.busLoginPassiveFailureStudentApp=r.createEventDefinition()("session.app.login.passive.failure"),t.busSessionRenewalSuccessStudentApp=r.createEventDefinition()("session.app.renewal.success"),t.busSessionRenewalFailureStudentApp=r.createEventDefinition()("session.app.renewal.failure"),t.busSessionRenewalFailureReasonStudentApp=r.createEventDefinition()("session.app.renewal.failure.reason"),t.busSleepDetected=r.createEventDefinition()("session.sleep"),t.CP_SESSION_CHANNEL="cp:session",t.busLoginSuccessCP=r.createEventDefinition()("session.cp.login.success"),t.busLoginFailureCP=r.createEventDefinition()("session.cp.login.failure"),t.busLogOutRequestedCP=r.createEventDefinition()("session.cp.logout.requested"),t.busLogOutSuccessCP=r.createEventDefinition()("session.cp.logout.success"),t.busSessionRenewalSuccessCP=r.createEventDefinition()("session.cp.renewal.success"),t.busSessionRenewalFailureCP=r.createEventDefinition()("session.cp.renewal.failure"),t.busSchoolSelect=r.createEventDefinition()("session.cp.schoolSelect")},387:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});const r=i(780),n=i(774),s=i(805),o="DeviceSession",u={isCreatingDeviceSession:!1,deviceSessionID:void 0};class DeviceSessionStore extends s.VuexModule{constructor(){super(...arguments),this._isCreatingDeviceSession=u.isCreatingDeviceSession,this._deviceSessionID=u.deviceSessionID}get isCreatingDeviceSession(){return this._isCreatingDeviceSession}get hasValidDeviceSession(){return this.exists}get deviceSessionID(){return this._deviceSessionID}get hasDeviceSessionID(){return n.StringUtil.notEmpty(this.deviceSessionID)}get exists(){return!!this._deviceSessionID}setIsCreatingDeviceSession(e){this._isCreatingDeviceSession=e}cleanUpData(){this._isCreatingDeviceSession=!1}setID(e){this._deviceSessionID=e}findDeviceSessionID(){const e=n.DeviceStorageUtil.getSession(o)||n.DeviceStorageUtil.get(o);e&&this.context.commit("setID",e)}storeSessionID({deviceSessionID:e,rememberMe:t}){null!=e&&""!==e&&this._deviceSessionID!==e&&(this.context.commit("setID",e),t?n.DeviceStorageUtil.set(o,e):n.DeviceStorageUtil.setSession(o,e))}clearDeviceSession(){this.context.commit("setID",void 0),n.DeviceStorageUtil.remove(o),n.DeviceStorageUtil.removeSession(o)}}r.__decorate([s.Mutation,r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Boolean]),r.__metadata("design:returntype",void 0)],DeviceSessionStore.prototype,"setIsCreatingDeviceSession",null),r.__decorate([s.Mutation,r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[]),r.__metadata("design:returntype",void 0)],DeviceSessionStore.prototype,"cleanUpData",null),r.__decorate([s.Mutation,r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[String]),r.__metadata("design:returntype",void 0)],DeviceSessionStore.prototype,"setID",null),r.__decorate([s.Action,r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[]),r.__metadata("design:returntype",void 0)],DeviceSessionStore.prototype,"findDeviceSessionID",null),r.__decorate([s.Action,r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",void 0)],DeviceSessionStore.prototype,"storeSessionID",null),r.__decorate([s.Action,r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[]),r.__metadata("design:returntype",void 0)],DeviceSessionStore.prototype,"clearDeviceSession",null),t.DeviceSessionStore=DeviceSessionStore},414:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.LoginHelper=class LoginHelper{}},403:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});const r=i(234);class SessionServiceBase extends r.CommonServiceBase{getDirectLoginDataFromUrl(e){if(!e)return{};const t={sessionID:e.sid,hash:e.h,promiseID:"".concat(e.sessionpromise),impersonate:"t"===e.i};return e.sid=null,e.h=null,e.i=null,e.sessionpromise=null,t}}t.SessionServiceBase=SessionServiceBase},463:function(e,t,i){var r;Object.defineProperty(t,"__esModule",{value:!0});const n=i(780),s=i(458),o=i(805),u=i(387);let a=r=class DeviceSessionStoreCP extends u.DeviceSessionStore{};a.NAME="deviceSessionStoreCP",a=r=n.__decorate([o.Module({dynamic:!0,name:r.NAME,store:s.VuexRootStore(),namespaced:!0})],a),t.default=o.getModule(a)},38:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});const r=i(780),n=i(234),s=i(395),o=i(414),u=i(565),a=r.__importDefault(i(463)),c="no-direct-login-provided";class LoginHelperCP extends o.LoginHelper{get deviceSessionStore(){return a.default}loginWithUsernameAndPassword(e,t,i=!1){return r.__awaiter(this,void 0,void 0,(function*(){this.credentials={username:e,password:t};const r=yield s.CPSessionsPortal.instance.LoginExtra2(e,t,n.ApplicationIDs.CONTROL_PANEL_HTML,u.EPSession.CP_VERSION,this.handleLoginServerError,this);return{isDirectLogin:!1,isImpersonating:!1,rememberDeviceSession:i,credentials:this.credentials,loginData:r,saveThisDeviceSessionToBrowserCache:!0,resetState:!0}}))}handleLoginServerError(e){if(e&&!e.Success)throw new Error(e.Fault)}attemptPassiveLogin(e){return r.__awaiter(this,void 0,void 0,(function*(){let t;try{t=yield this.tryToLogInWithSessionPromise(e)}catch(i){try{t=yield this.tryToLogInWithDirectLogin(e)}catch(e){if(e.message!==c)throw new Error(e);t=yield this.tryToLogInWithDeviceSessionCookie()}}return t}))}tryToLogInWithSessionPromise(e){return r.__awaiter(this,void 0,void 0,(function*(){if(e.promiseID&&"undefined"!==e.promiseID){const t='"'.concat(e.promiseID,'"'),i=yield s.CPSessionsPortal.instance.LoginWithSessionPromise(t,n.ApplicationIDs.CONTROL_PANEL_HTML,u.EPSession.CP_VERSION,this.handleLoginServerError,this);return{isDirectLogin:!0,isImpersonating:e.impersonate,loginData:i,rememberDeviceSession:!1,saveThisDeviceSessionToBrowserCache:!0,resetState:!0}}throw Error(c)}))}tryToLogInWithDirectLogin(e){return r.__awaiter(this,void 0,void 0,(function*(){if(e.sessionID&&e.hash){this.credentials={username:"",password:""};const t=yield s.CPSessionsPortal.instance.DirectLogin2(Number(e.sessionID),e.hash,n.ApplicationIDs.CONTROL_PANEL_HTML,u.EPSession.CP_VERSION,this.handleLoginServerError,this);return{isDirectLogin:!1,isImpersonating:e.impersonate,rememberDeviceSession:!1,loginData:t,saveThisDeviceSessionToBrowserCache:!0,resetState:!0}}throw Error(c)}))}tryToLogInWithDeviceSessionCookie(e=!0){return r.__awaiter(this,void 0,void 0,(function*(){try{if(!this.deviceSessionStore.hasValidDeviceSession)throw Error("Invalid device session");this.credentials={username:"",password:""};const t='"'.concat(this.deviceSessionStore.deviceSessionID,'"'),i=yield s.CPSessionsPortal.instance.LoginWithDeviceSession2(t,n.ApplicationIDs.CONTROL_PANEL_HTML,u.EPSession.CP_VERSION,this.handleLoginServerError,this);return{isDirectLogin:!1,isImpersonating:!1,rememberDeviceSession:!1,loginData:i,saveThisDeviceSessionToBrowserCache:!1,resetState:e}}catch(e){throw this.deviceSessionStore.clearDeviceSession(),e}}))}impersonate(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return{isDirectLogin:!1,isImpersonating:!0,rememberDeviceSession:!1,loginData:yield s.CPSessionsPortal.instance.Impersonate(e,t.UserID,""),saveThisDeviceSessionToBrowserCache:!1,resetState:!1}}))}logout(e){s.CPSessionsPortal.instance.EndSession(e)}}t.LoginHelperCP=LoginHelperCP},375:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});class PermissionCodesCP{}t.PermissionCodesCP=PermissionCodesCP,PermissionCodesCP.FULL_ACCESS="*",PermissionCodesCP.MANAGE_USERS="USER",PermissionCodesCP.ADMIN_UTILITIES="UTIL",PermissionCodesCP.SCHOOL_FINANCES="FINC",PermissionCodesCP.SCHOOL_CRM="CRM",PermissionCodesCP.LEGACY_CONTENT_MANAGER="MCON",PermissionCodesCP.MANAGE_SUGGESTIONS="MSUG",PermissionCodesCP.MANAGE_FEEDBACK="MFEE",PermissionCodesCP.MANAGE_TEXT_FLAGS="MFLT",PermissionCodesCP.MANAGE_TEXT_FLAGS_NEW="MFT+",PermissionCodesCP.MANAGE_SOUND_FLAGS="MFLS",PermissionCodesCP.MANAGE_SOUND_FLAGS_NEW="MFS+",PermissionCodesCP.LP_CONNECT="LPC+",PermissionCodesCP.IMPERSONATE="IMPS",PermissionCodesCP.UPLOAD_USERS="UPLU",PermissionCodesCP.USAGE_HISTORY="USAG",PermissionCodesCP.NEWS="NEWS",PermissionCodesCP.VIEW_STUDENT_PROGRESS="VSP+",PermissionCodesCP.VIEW_TEACHER_COMMUNITY="VTC",PermissionCodesCP.REPORTS="RPT",PermissionCodesCP.ONLINE_USERS="ONUS",PermissionCodesCP.NEWS_FEED_PUBLISH="NPUB",PermissionCodesCP.FULL_ACCESS_DESCRIPTION="FULL ADMIN ACCESS",PermissionCodesCP.TEMPLATE_MANAGER="TMPL",PermissionCodesCP.COMPETITION_MANAGER="COMP",PermissionCodesCP.INTEGRATIONS="INTEG"},391:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});const r=i(774),n=i(375);t.PermissionsManagerCP=class PermissionsManagerCP{constructor(e){this.permissionLookup=r.DictionaryHelper.hashPrimitivesByValue(e),this.hasFullAccess=this.hasPermission(n.PermissionCodesCP.FULL_ACCESS)}hasAnyPermission(e){return e.some((e=>this.hasPermission(e)))}hasPermission(e){if(this.hasFullAccess)return!0;return null!=this.permissionLookup[e]}}},305:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});const r=i(780),n=i(395),s=i(774),o=i(953),u=i(50),a=i(943),c=i(24),l=i(391),h=i(855),p=r.__importDefault(i(204)),d=r.__importDefault(i(202));t.SessionManagerCP=class SessionManagerCP{constructor(e){this.sessionStore=e===h.SessionType.PRIMARY?d.default:p.default,this.extendSessionTimer=new s.Timer(6e4),this.extendSessionTimer.timerEvent.addEventListener(this.onSessionUpdateTimer,this),this.busChannel=o.bus.channel(u.CP_SESSION_CHANNEL)}setupSettingsManager(e){this.permissionsManager=new l.PermissionsManagerCP(e.PermissionCodes),this.userSettingsManager=new c.UserSettingsManager(this.sessionStore.sessionID,this.sessionStore.userID),this.userSettingsManager.setAllGlobalSettings(e.UserSettings),this.settingsFacade=new a.UserSettingsFacade(this.userSettingsManager)}clearPermissionsManager(){this.permissionsManager=null}startSessiontimer(){this.extendSessionTimer.reset(),this.extendSessionTimer.start()}stopSessionTimer(){this.extendSessionTimer&&this.extendSessionTimer.stop()}onSessionUpdateTimer(){if(this.sessionStore.loggedOn){(new Date).getTime()>=this.sessionStore.lastSessionRenewalTime.getTime()+12e4&&this.extendSession()}}extendSession(){return r.__awaiter(this,void 0,void 0,(function*(){if(this.sessionStore.loggedOn){this.sessionStore.setLastSessionRenewalTime(new Date);try{const e=yield n.CPSessionsPortal.instance.ExtendSessionAndCheckMessage(this.sessionStore.sessionID);e.Success?(this.busChannel.publish(u.busSessionRenewalSuccessCP()),this.sessionStore.setSessionRenewalAttemptsCounter(0)):this.handleSessionRenewalFailure(e.Fault)}catch(e){this.handleSessionRenewalFailure(e instanceof Error?e.message:e)}}}))}handleSessionRenewalFailure(e){s.StringUtil.startsWith(e.toLowerCase(),"Invalid Session".toLowerCase())&&this.sessionStore.setSessionRenewalAttemptsCounter(18),this.sessionStore.sessionRenewalAttemptsCounter<18?(this.sessionStore.setSessionRenewalAttemptsCounter(this.sessionStore.sessionRenewalAttemptsCounter+1),setTimeout((()=>this.extendSession()),1e4)):(this.sessionStore.setSessionRenewalAttemptsCounter(0),this.sessionStore.resetSessionVariables(),this.busChannel.publish(u.busSessionRenewalFailureCP()))}}},385:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});const r=i(780),n=i(458),s=i(234),o=i(395),u=i(774),a=i(953),c=i(403),l=i(50),h=r.__importDefault(i(463)),p=i(38),d=i(305),b=i(855);class SessionServiceCP extends c.SessionServiceBase{constructor(){super(),this.busChannel=a.bus.channel(l.CP_SESSION_CHANNEL),this.loginHelper=new p.LoginHelperCP,this.primarySessionManager=new d.SessionManagerCP(b.SessionType.PRIMARY),this.impersonateSessionManager=new d.SessionManagerCP(b.SessionType.IMPERSONATION),this.deviceSessionStore.findDeviceSessionID(),s.registerService(SessionServiceCP.serviceName,(()=>{SessionServiceCP.clearServiceInstance(),this.sessionStore.cleanUpData()}))}static get serviceName(){return"sessionServiceCP"}get deviceSessionStore(){return h.default}get sessionManager(){return this.isImpersonating?this.impersonateSessionManager:this.primarySessionManager}get sessionStore(){return this.sessionManager.sessionStore}getSessionStore(e){return e===b.SessionType.IMPERSONATION?this.impersonateSessionManager.sessionStore:this.primarySessionManager.sessionStore}get settings(){return this.sessionManager.settingsFacade}getSettings(e){return e===b.SessionType.IMPERSONATION?this.impersonateSessionManager.settingsFacade:this.primarySessionManager.settingsFacade}get permissionsManager(){return this.sessionManager.permissionsManager}getPermissionsManager(e){return e===b.SessionType.IMPERSONATION?this.impersonateSessionManager.permissionsManager:this.primarySessionManager.permissionsManager}login(e){return r.__awaiter(this,void 0,void 0,(function*(){if(!this.primarySessionManager.sessionStore.loggedOn)try{const t=yield this.loginHelper.loginWithUsernameAndPassword(e.username,e.password,e.rememberMe);yield this.handleLoginSuccess(t)}catch(e){throw this.busChannel.publish(l.busLoginFailureCP({sessionType:b.SessionType.PRIMARY,fault:e instanceof Error?e.message:e})),e}}))}attemptPassiveLogin(e){return r.__awaiter(this,void 0,void 0,(function*(){if(this.primarySessionManager.sessionStore.loggedOn&&!e.force)return;const t=u.URLUtil.parseURLStringArguments(document.location.href.split("?")[1]),i=this.getDirectLoginDataFromUrl(t);try{const e=yield this.loginHelper.attemptPassiveLogin(i);yield this.handleLoginSuccess(e)}catch(e){throw this.busChannel.publish(l.busLoginFailureCP({sessionType:b.SessionType.PRIMARY,fault:e instanceof Error?e.message:e})),e}}))}handleLoginSuccess(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e.loginData,i=e.isImpersonating?this.impersonateSessionManager.sessionStore:this.primarySessionManager.sessionStore;i.setSessionDataOnLogin(t),i.setMustCompletePostRegistrationProfile(t.MustCompletePostRegistrationProfile),this.sessionManager.startSessiontimer(),this.sessionManager.setupSettingsManager(t),this.sessionStore.allowSavingSessionsToLocalCache&&e.saveThisDeviceSessionToBrowserCache&&this.createDeviceSessionFromSession(e.rememberDeviceSession),this.busChannel.publish(l.busLoginSuccessCP({sessionType:this.sessionStore.sessionType,ro:t,resetState:e.resetState}))}))}createDeviceSessionFromSession(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=u.DateUtil.addMonthToDate(new Date);this.deviceSessionStore.setIsCreatingDeviceSession(!0);try{const i=yield o.CPSessionsPortal.instance.GenerateDeviceSessionFromLPSessionID(this.sessionStore.sessionID,t);this.deviceSessionStore.storeSessionID({deviceSessionID:i.Session.ID,rememberMe:e})}catch(e){throw console.log(e.message),new Error("Cannot create device session")}this.deviceSessionStore.setIsCreatingDeviceSession(!1)}))}impersonate(e,t=!1){return r.__awaiter(this,void 0,void 0,(function*(){if(!this.isImpersonating&&this.privilegesLevel>=s.PrivilegeLevels.ADMINISTRATOR){if(t)return void n.DeviceUtil.openInternalApplicationUrl(this.returnURL(e));try{const t=yield this.loginHelper.impersonate(this.primarySessionManager.sessionStore.sessionID,e);yield this.handleLoginSuccess(t),this.changeSchoolSelection(e.SchoolID)}catch(e){this.busChannel.publish(l.busLoginFailureCP({sessionType:b.SessionType.IMPERSONATION,fault:e instanceof Error?e.message:e}))}}}))}returnURL(e){const t={ISID:e.UserID};return"".concat("https://www.educationperfect.com/controlpanel/","#").concat(u.URLUtil.objectToURLString(t))}logout(){const e=this.sessionStore.sessionType;this.sessionStore.loggedOn&&o.CPSessionsPortal.instance.EndSession(this.sessionStore.sessionID),this.busChannel.publish(l.busLogOutRequestedCP({sessionType:e})),this.sessionManager.stopSessionTimer(),this.resetSessionVariables(),this.busChannel.publish(l.busLogOutSuccessCP({sessionType:e}))}createSaltedHashKey(){const e=this.sessionStore.userID;let t="";this.sessionStore.sessionType===b.SessionType.IMPERSONATION&&(t=u.StringUtil.trim(this.sessionStore.firstName||"").toLowerCase()+" "+u.StringUtil.trim(this.sessionStore.surname||"").toLowerCase());return s.HashUtil.createSaltedHashKeyFromElements(t,e,this.sessionStore.sessionID)}changeSchoolSelection(e){const t=u.ArrayHelper.first(this.sessionStore.schools,(t=>t.ID===e));t&&(this.sessionStore.setSelectedSchool(t),this.sessionStore.setSchoolID(e),o.CPSessionsPortal.instance.ChangeSchoolSelection(this.sessionStore.sessionID,e,this.onChangeSchoolResult,this),this.settings.school=e,this.settings.saveGlobalSettings())}onChangeSchoolResult(e,t){!t&&e.Success?(this.sessionStore.setPrivilegesLevel(e.ReturnInt),-1!==this.sessionStore.schoolID&&this.sessionStore.schools&&this.sessionStore.setSchool(u.ArrayHelper.first(this.sessionStore.schools,(e=>e.ID===this.sessionStore.schoolID))),this.busChannel.publish(l.busSchoolSelect())):e?console.log(e.Fault):console.log(t)}hasPermission(e){return this.permissionsManager&&this.permissionsManager.hasPermission(e)}hasAnyPermission(e){return this.permissionsManager&&this.permissionsManager.hasAnyPermission(e)}hasValidDeviceSession(){return this.deviceSessionStore.hasValidDeviceSession}resetSessionVariables(){this.sessionManager.clearPermissionsManager(),this.sessionStore.sessionType!==b.SessionType.IMPERSONATION&&this.deviceSessionStore.clearDeviceSession(),this.sessionStore.resetSessionVariables()}get sessionID(){return this.sessionStore.sessionID}get userID(){return this.sessionStore.userID}get publicID(){return this.sessionStore.publicID}get firstname(){return this.sessionStore.firstName}get username(){return this.sessionStore.username}get surname(){return this.sessionStore.surname}get name(){return this.sessionStore.name}get privilegesLevel(){return this.sessionStore.privilegesLevel}get certificationLevel(){return this.sessionStore.certificationLevel}get certificationLevelString(){return this.sessionStore.certificationLevelString}get schoolID(){return this.sessionStore.schoolID}get selectedSchool(){return this.sessionStore.school}get allSchools(){return this.sessionStore.schools}get isAdministrator(){return this.sessionStore.isAdmin}get isTeacher(){return this.sessionStore.isTeacher}get isStudent(){return this.sessionStore.isStudent}get isImpersonating(){return this.impersonateSessionManager.sessionStore.loggedOn}get departmentIDs(){return this.sessionStore.departmentIDs}get organizationType(){return this.sessionStore.organizationType}get isInWorkplace(){return this.sessionStore.isInWorkplace}get isNZSchool(){return this.sessionStore.isNZSchool}get isAUSSchool(){return this.sessionStore.isAUSSchool}get isTrialUser(){return this.sessionStore.isTrialUser}get selectedSchoolStateID(){return this.sessionStore.selectedSchoolStateID}}t.SessionServiceCP=SessionServiceCP},855:function(e,t,i){var r,n,s,o,u,a,c,l,h;Object.defineProperty(t,"__esModule",{value:!0});const p=i(780),d=i(234),b=i(395),f=i(774),S=i(805),_=i(622),g=i(713),m=2,y=3,v={sessionID:-1,userID:-1,schoolID:-1,username:"",publicID:"",name:null,firstName:null,surname:null,email:"",privilegesLevel:d.PrivilegeLevels.NONE,certificationLevel:-1,departmentIDs:[],baseLanguage:null,hasAcceptedEULA:!1,isNorthernHemisphere:!1,sessionRenewalAttemptsCounter:0,schools:[],enforceStrictPassword:!0,authenticationProvider:-1,youtubeBlocked:!1,seenExpiredCovidMessage:!1,mustChangePassword:!1,loggedOn:!1,lastSessionRenewalTime:null,newsFeedItemsSeenBySessionID:{},uploadClassListsRequired:!1,school:null,salesLeadOwner:{FullName:"Support Team",Name:"Us",UserID:-1,DisplayPicture:null,StatusMessage:null,SmallDisplayPicture:null,FirstName:null,JobTitle:"Support Team",Surname:null,RealPerson:!1,CallBookingLink:null},bookingLink:"",mustCompletePostRegistrationProfile:!1};!function(e){e[e.PRIMARY=0]="PRIMARY",e[e.IMPERSONATION=1]="IMPERSONATION"}(t.SessionType||(t.SessionType={}));class SessionStoreCPBase extends S.VuexModule{constructor(){super(...arguments),this._sessionID=v.sessionID,this._userID=v.userID,this._publicID=v.publicID,this._schoolID=v.schoolID,this._username=v.username,this._name=v.name,this._firstName=v.firstName,this._surname=v.surname,this._email=v.email,this._privilegesLevel=v.privilegesLevel,this._certificationLevel=v.certificationLevel,this._departmentIDs=v.departmentIDs,this._baseLanguage=v.baseLanguage,this._hasAcceptedEULA=v.hasAcceptedEULA,this._isNorthernHemisphere=v.isNorthernHemisphere,this._sessionRenewalAttemptsCounter=v.sessionRenewalAttemptsCounter,this._schools=v.schools,this._enforceStrictPassword=v.enforceStrictPassword,this._authenticationProvider=v.authenticationProvider,this._youtubeBlocked=v.youtubeBlocked,this._seenExpiredCovidMessage=v.seenExpiredCovidMessage,this._mustChangePassword=v.mustChangePassword,this._loggedOn=v.loggedOn,this._lastSessionRenewalTime=v.lastSessionRenewalTime,this._school=v.school,this._newsFeedItemsSeenBySessionID=v.newsFeedItemsSeenBySessionID,this._uploadClassListsRequired=v.uploadClassListsRequired,this._allowSavingSessionsToLocalCache=!1,this._salesLeadOwner=v.salesLeadOwner,this._bookingLink=v.bookingLink,this._mustCompletePostRegistrationProfile=v.mustCompletePostRegistrationProfile}get sessionID(){return this._sessionID}get userID(){return this._userID}get publicID(){return this._publicID}get schoolID(){return this._schoolID}get username(){return this._username}get name(){return this._name}get firstName(){return this._firstName}get surname(){return this._surname}get email(){return this._email}get privilegesLevel(){return this._privilegesLevel}get certificationLevel(){return this._certificationLevel}get departmentIDs(){return this._departmentIDs}get baseLanguage(){return this._baseLanguage}get hasAcceptedEULA(){return this._hasAcceptedEULA}get isNorthernHemisphere(){return this._isNorthernHemisphere}get sessionRenewalAttemptsCounter(){return this._sessionRenewalAttemptsCounter}get schools(){return this._schools}get allSchools(){return this._schools}get enforceStrictPassword(){return this._enforceStrictPassword}get authenticationProvider(){return this._authenticationProvider}get youtubeBlocked(){return this._youtubeBlocked}get mustChangePassword(){return this._mustChangePassword}get loggedOn(){return this._loggedOn}get isLoggedIn(){return this.loggedOn}get isLoggedOn(){return this.loggedOn}get lastSessionRenewalTime(){return this._lastSessionRenewalTime}get school(){return this._school}get schoolName(){return this._school?this._school.Name:null}get seenExpiredCovidMessage(){return this._seenExpiredCovidMessage}get newsFeedItemsSeenBySessionID(){return this._newsFeedItemsSeenBySessionID}get uploadClassListsRequired(){return this._uploadClassListsRequired}get salesLeadOwner(){return this._salesLeadOwner}get isStudent(){return this._privilegesLevel===d.PrivilegeLevels.STUDENT}get isSSO(){return void 0!==this._authenticationProvider&&this._authenticationProvider>0}get isTrialUser(){return this._privilegesLevel===d.PrivilegeLevels.GENERIC_USER}get isTeacher(){return this._privilegesLevel===d.PrivilegeLevels.TEACHER}get isAdmin(){return this._privilegesLevel===d.PrivilegeLevels.ADMINISTRATOR}get isInLanguages(){return this._departmentIDs&&-1!==this._departmentIDs.indexOf(g.DepartmentRoles.LANGUAGES)}get isInScience(){return this._departmentIDs&&-1!==this._departmentIDs.indexOf(g.DepartmentRoles.SCIENCE)}get isInEnglish(){return this._departmentIDs&&-1!==this.departmentIDs.indexOf(g.DepartmentRoles.ENGLISH)}get isInMaths(){return this._departmentIDs&&-1!==this.departmentIDs.indexOf(g.DepartmentRoles.MATHS)}get organizationType(){return this._school?this._school.OrganizationType:b.OrganizationTypes.School}get isInWorkplace(){return!!this._school&&this._school.OrganizationType===b.OrganizationTypes.Workplace}get countryID(){return this._school?this._school.CountryID:this._schools&&this._schools.length>0?this._schools[0].CountryID:void 0}get stateID(){return this._school?this._school.StateID:this._schools&&this._schools.length>0?this._schools[0].StateID:void 0}get selectedSchoolStateID(){return this._school.StateID}get isNZSchool(){return!!this._school&&this._school.CountryID===_.Countries.NEW_ZEALAND}get isAUSSchool(){return!!this._school&&this._school.CountryID===_.Countries.AUSTRALIA}get isInAustralasia(){return[m,y].indexOf(this.countryID)>-1}get certificationLevelString(){const e=this._certificationLevel,t=this.certificationLevelEnumAsString;return"Level ".concat(e," - ").concat(t)}get certificationLevelEnumAsString(){switch(this._certificationLevel){case d.CertificationLevels.Beginner:return"Beginner";case d.CertificationLevels.Intermediate:return"Intermediate";case d.CertificationLevels.Advanced:return"Advanced";case d.CertificationLevels.Expert:return"Expert";case d.CertificationLevels.Guru:return"Guru";case d.CertificationLevels.None:default:return"None"}}get allowSavingSessionsToLocalCache(){return this._allowSavingSessionsToLocalCache}get mustCompletePostRegistrationProfile(){return this._mustCompletePostRegistrationProfile}get leadOwner(){return this._salesLeadOwner}get bookingLink(){return this._bookingLink}setSelectedSchool(e){this._school=e}setSalesLeadOwner(e){this._salesLeadOwner=e}setBookingLink(e){this._bookingLink=e}setSeenExpiredCovidMessage(e){this._seenExpiredCovidMessage=e}cleanUpData(){this._sessionID=v.sessionID,this._userID=v.userID,this._publicID=v.publicID,this._schoolID=v.schoolID,this._username=v.username,this._name=v.name,this._firstName=v.firstName,this._surname=v.surname,this._email=v.email,this._privilegesLevel=v.privilegesLevel,this._certificationLevel=v.certificationLevel,this._departmentIDs=v.departmentIDs,this._baseLanguage=v.baseLanguage,this._hasAcceptedEULA=v.hasAcceptedEULA,this._isNorthernHemisphere=v.isNorthernHemisphere,this._sessionRenewalAttemptsCounter=v.sessionRenewalAttemptsCounter,this._schools=v.schools,this._enforceStrictPassword=v.enforceStrictPassword,this._authenticationProvider=v.authenticationProvider,this._youtubeBlocked=v.youtubeBlocked,this._seenExpiredCovidMessage=v.seenExpiredCovidMessage,this._mustChangePassword=v.mustChangePassword,this._loggedOn=v.loggedOn,this._lastSessionRenewalTime=v.lastSessionRenewalTime,this._school=v.school,this._schools=v.schools,this._salesLeadOwner=v.salesLeadOwner,this._bookingLink=v.bookingLink,this._mustCompletePostRegistrationProfile=v.mustCompletePostRegistrationProfile}resetSessionVariables(){this._loggedOn=v.loggedOn,this._sessionID=v.sessionID,this._userID=v.userID,this._publicID=v.publicID,this._schoolID=v.schoolID,this._school=v.school,this._schools=v.schools,this._firstName=v.firstName,this._surname=v.surname,this._name=v.name,this._privilegesLevel=v.privilegesLevel,this._certificationLevel=v.certificationLevel,this._salesLeadOwner=v.salesLeadOwner,this._bookingLink=v.bookingLink}setSessionDataOnLogin(e){this._sessionID=e.SessionID,this._userID=e.UserID,this._publicID=e.PublicId,this._schoolID=e.SchoolID,this._username=e.Username,this._name=e.Name,this._firstName=e.FirstName,this._surname=e.Surname,this._email=e.Email,this._privilegesLevel=e.Privileges,this._certificationLevel=e.CertificationLevel,this._departmentIDs=e.DepartmentIDs,this._baseLanguage=e.BaseLanguage,this._hasAcceptedEULA=e.HasAcceptedEULA,this._isNorthernHemisphere=e.IsNorthernHemisphere,this._sessionRenewalAttemptsCounter=0,this._schools=e.Schools,this._enforceStrictPassword=e.EnforcePasswordPolicy||this.isAdmin||this.isTeacher,this._authenticationProvider=e.AuthenticationProvider,this._youtubeBlocked=e.YoutubeBlocked,this._seenExpiredCovidMessage=!1,this._mustChangePassword=e.MustChangePassword,this._mustCompletePostRegistrationProfile=e.MustCompletePostRegistrationProfile,-1!==this._schoolID&&this._schools&&(this._school=f.ArrayHelper.first(this._schools,(e=>e.ID===this._schoolID))),this._loggedOn=!0,this._lastSessionRenewalTime=new Date}setLastSessionRenewalTime(e){this._lastSessionRenewalTime=e}setSessionRenewalAttemptsCounter(e){this._sessionRenewalAttemptsCounter=e}setSchoolID(e){this._schoolID=e}setPrivilegesLevel(e){this._privilegesLevel=e}setSchool(e){this._school=e}setMustChangePassword(e){this._mustChangePassword=e}setHasAcceptedEULA(e){this._hasAcceptedEULA=e}setUploadClassListsRequired(e){this._uploadClassListsRequired=e}setEmail(e){this._email=e}setCertificationLevel(e){this._certificationLevel=e}setAllowSavingSessionsToLocalCache(e){this._allowSavingSessionsToLocalCache=e}setMustCompletePostRegistrationProfile(e){this._mustCompletePostRegistrationProfile=e}populateSessionDataOnLogin(e){return p.__awaiter(this,void 0,void 0,(function*(){this.context.commit("cleanUpData"),this.context.commit("setSessionDataOnLogin",e)}))}}p.__decorate([S.Mutation,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",["function"==typeof(r="undefined"!=typeof SchoolFilterDetails&&SchoolFilterDetails)?r:Object]),p.__metadata("design:returntype",void 0)],SessionStoreCPBase.prototype,"setSelectedSchool",null),p.__decorate([S.Mutation,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",["function"==typeof(n="undefined"!=typeof SalesLeadOwner&&SalesLeadOwner)?n:Object]),p.__metadata("design:returntype",void 0)],SessionStoreCPBase.prototype,"setSalesLeadOwner",null),p.__decorate([S.Mutation,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[String]),p.__metadata("design:returntype",void 0)],SessionStoreCPBase.prototype,"setBookingLink",null),p.__decorate([S.Mutation,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[Boolean]),p.__metadata("design:returntype",void 0)],SessionStoreCPBase.prototype,"setSeenExpiredCovidMessage",null),p.__decorate([S.Mutation,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[]),p.__metadata("design:returntype",void 0)],SessionStoreCPBase.prototype,"cleanUpData",null),p.__decorate([S.Mutation,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[]),p.__metadata("design:returntype",void 0)],SessionStoreCPBase.prototype,"resetSessionVariables",null),p.__decorate([S.Mutation,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",["function"==typeof(s="undefined"!=typeof CPLoginReturnObject&&CPLoginReturnObject)?s:Object]),p.__metadata("design:returntype",void 0)],SessionStoreCPBase.prototype,"setSessionDataOnLogin",null),p.__decorate([S.Mutation,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",["function"==typeof(o="undefined"!=typeof Date&&Date)?o:Object]),p.__metadata("design:returntype",void 0)],SessionStoreCPBase.prototype,"setLastSessionRenewalTime",null),p.__decorate([S.Mutation,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[Number]),p.__metadata("design:returntype",void 0)],SessionStoreCPBase.prototype,"setSessionRenewalAttemptsCounter",null),p.__decorate([S.Mutation,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[Number]),p.__metadata("design:returntype",void 0)],SessionStoreCPBase.prototype,"setSchoolID",null),p.__decorate([S.Mutation,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",["function"==typeof(u=void 0!==d.PrivilegeLevels&&d.PrivilegeLevels)?u:Object]),p.__metadata("design:returntype",void 0)],SessionStoreCPBase.prototype,"setPrivilegesLevel",null),p.__decorate([S.Mutation,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",["function"==typeof(a="undefined"!=typeof SchoolFilterDetails&&SchoolFilterDetails)?a:Object]),p.__metadata("design:returntype",void 0)],SessionStoreCPBase.prototype,"setSchool",null),p.__decorate([S.Mutation,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[Boolean]),p.__metadata("design:returntype",void 0)],SessionStoreCPBase.prototype,"setMustChangePassword",null),p.__decorate([S.Mutation,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[Boolean]),p.__metadata("design:returntype",void 0)],SessionStoreCPBase.prototype,"setHasAcceptedEULA",null),p.__decorate([S.Mutation,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[Boolean]),p.__metadata("design:returntype",void 0)],SessionStoreCPBase.prototype,"setUploadClassListsRequired",null),p.__decorate([S.Mutation,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[String]),p.__metadata("design:returntype",void 0)],SessionStoreCPBase.prototype,"setEmail",null),p.__decorate([S.Mutation,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",["function"==typeof(c=void 0!==d.CertificationLevels&&d.CertificationLevels)?c:Object]),p.__metadata("design:returntype",void 0)],SessionStoreCPBase.prototype,"setCertificationLevel",null),p.__decorate([S.Mutation,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[Boolean]),p.__metadata("design:returntype",void 0)],SessionStoreCPBase.prototype,"setAllowSavingSessionsToLocalCache",null),p.__decorate([S.Mutation,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[Boolean]),p.__metadata("design:returntype",void 0)],SessionStoreCPBase.prototype,"setMustCompletePostRegistrationProfile",null),p.__decorate([S.Action,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",["function"==typeof(l="undefined"!=typeof CPLoginReturnObject&&CPLoginReturnObject)?l:Object]),p.__metadata("design:returntype","function"==typeof(h="undefined"!=typeof Promise&&Promise)?h:Object)],SessionStoreCPBase.prototype,"populateSessionDataOnLogin",null),t.SessionStoreCPBase=SessionStoreCPBase},204:function(e,t,i){var r;Object.defineProperty(t,"__esModule",{value:!0});const n=i(780),s=i(458),o=i(805),u=i(855);let a=r=class SessionStoreCPImpersonate extends u.SessionStoreCPBase{constructor(){super(...arguments),this.sessionType=u.SessionType.IMPERSONATION}};a.NAME="sessionCPImpersonate",a=r=n.__decorate([o.Module({name:r.NAME,namespaced:!0,dynamic:!0,store:s.VuexRootStore()})],a),t.SessionStoreCPImpersonate=a,t.default=o.getModule(a)},202:function(e,t,i){var r;Object.defineProperty(t,"__esModule",{value:!0});const n=i(780),s=i(458),o=i(805),u=i(855);let a=r=class SessionStoreCPPrimary extends u.SessionStoreCPBase{constructor(e){super(e),this.sessionType=u.SessionType.PRIMARY,this._allowSavingSessionsToLocalCache=!0}};a.NAME="sessionCPPrimary",a=r=n.__decorate([o.Module({name:r.NAME,namespaced:!0,dynamic:!0,store:s.VuexRootStore()}),n.__metadata("design:paramtypes",[Object])],a),t.SessionStoreCPPrimary=a,t.default=o.getModule(a)},622:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.UNKNOWN=1]="UNKNOWN",e[e.NEW_ZEALAND=2]="NEW_ZEALAND",e[e.AUSTRALIA=3]="AUSTRALIA",e[e.SOUTH_AFRICA=4]="SOUTH_AFRICA",e[e.ENGLAND=5]="ENGLAND",e[e.USA=9]="USA",e[e.GLOBAL=10]="GLOBAL",e[e.CANADA=11]="CANADA",e[e.FRANCE=12]="FRANCE",e[e.GERMANY=13]="GERMANY",e[e.ITALY=14]="ITALY",e[e.SPAIN=15]="SPAIN",e[e.IRELAND=16]="IRELAND",e[e.SCOTLAND=17]="SCOTLAND",e[e.WALES=18]="WALES",e[e.SWEDEN=19]="SWEDEN",e[e.MOROCCO=20]="MOROCCO",e[e.CYPRUS=21]="CYPRUS",e[e.SERBIA=22]="SERBIA",e[e.NORTHERN_IRELAND=23]="NORTHERN_IRELAND",e[e.CHINA=24]="CHINA",e[e.DENMARK=25]="DENMARK",e[e.MALTA=26]="MALTA",e[e.FINLAND=27]="FINLAND",e[e.QATAR=28]="QATAR",e[e.JAPAN=29]="JAPAN",e[e.MYANMAR=30]="MYANMAR",e[e.HONG_KONG=32]="HONG_KONG",e[e.THAILAND=34]="THAILAND",e[e.TURKEY=36]="TURKEY",e[e.VIETNAM=37]="VIETNAM",e[e.ALBANIA=39]="ALBANIA",e[e.BANGLADESH=40]="BANGLADESH",e[e.INDIA=41]="INDIA",e[e.ICELAND=42]="ICELAND",e[e.BRAZIL=43]="BRAZIL",e[e.RUSSIA=44]="RUSSIA",e[e.CAYMAN_ISLANDS=45]="CAYMAN_ISLANDS",e[e.BRUNEI=46]="BRUNEI",e[e.GUERNSEY=47]="GUERNSEY",e[e.SINGAPORE=48]="SINGAPORE",e[e.INDONESIA=49]="INDONESIA",e[e.MALAYSIA=50]="MALAYSIA",e[e.UNITED_ARAB_EMIRATES=51]="UNITED_ARAB_EMIRATES",e[e.COLOMBIA=52]="COLOMBIA",e[e.UZBEKISTAN=53]="UZBEKISTAN",e[e.MEXICO=54]="MEXICO",e[e.PHILIPPINES=55]="PHILIPPINES",e[e.SOUTH_KOREA=56]="SOUTH_KOREA",e[e.NORWAY=57]="NORWAY",e[e.SAUDI_ARABIA=58]="SAUDI_ARABIA",e[e.NIGERIA=59]="NIGERIA",e[e.HUNGARY=60]="HUNGARY",e[e.KAZAKHSTAN=61]="KAZAKHSTAN",e[e.AUSTRIA=62]="AUSTRIA",e[e.CZECH_REPUBLIC=63]="CZECH_REPUBLIC",e[e.TAIWAN=64]="TAIWAN",e[e.BRITISH_VIRGIN_ISLANDS=65]="BRITISH_VIRGIN_ISLANDS",e[e.NEPAL=66]="NEPAL",e[e.PERU=67]="PERU",e[e.ROMANIA=68]="ROMANIA",e[e.CAMBODIA=69]="CAMBODIA",e[e.SRI_LANKA=70]="SRI_LANKA",e[e.PORTUGAL=71]="PORTUGAL",e[e.PANAMA=72]="PANAMA",e[e.BELGIUM=73]="BELGIUM",e[e.MALDIVES=74]="MALDIVES",e[e.MONGOLIA=75]="MONGOLIA",e[e.SWITZERLAND=76]="SWITZERLAND",e[e.KUWAIT=77]="KUWAIT",e[e.BAHRAIN=78]="BAHRAIN",e[e.UGANDA=79]="UGANDA",e[e.ISRAEL=80]="ISRAEL",e[e.LEBANON=81]="LEBANON",e[e.OMAN=82]="OMAN",e[e.GHANA=83]="GHANA",e[e.VANUATU=84]="VANUATU",e[e.ZAMBIA=85]="ZAMBIA",e[e.TAHITI=88]="TAHITI",e[e.TIMOR_LESTE=94]="TIMOR_LESTE",e[e.EGYPT=95]="EGYPT",e[e.KIRIBATI=96]="KIRIBATI",e[e.GEORGIA=97]="GEORGIA",e[e.MAURITIUS=98]="MAURITIUS",e[e.BERMUDA=99]="BERMUDA"}(t.Countries||(t.Countries={}))},713:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.ALL=-1]="ALL",e[e.KEY_CONTACT=1]="KEY_CONTACT",e[e.ACCOUNTS=2]="ACCOUNTS",e[e.IT_SUPPORT=3]="IT_SUPPORT",e[e.LANGUAGES=4]="LANGUAGES",e[e.SCIENCE=5]="SCIENCE",e[e.ENGLISH=6]="ENGLISH",e[e.MATHS=9]="MATHS",e[e.ARTS=10]="ARTS",e[e.COMMERCE=11]="COMMERCE",e[e.HEALTH=12]="HEALTH",e[e.REL_ED=13]="REL_ED",e[e.MANAGEMENT=14]="MANAGEMENT",e[e.SUPPORT_STAFF=15]="SUPPORT_STAFF",e[e.SOCIAL_SCIENCES=16]="SOCIAL_SCIENCES",e[e.TECHNOLOGY=17]="TECHNOLOGY",e[e.ESOL_EAL=18]="ESOL_EAL",e[e.MUSIC=19]="MUSIC",e[e.BRAIN_BEE=20]="BRAIN_BEE",e[e.ONLINE_ASSESSMENT=21]="ONLINE_ASSESSMENT",e[e.TEACHER_HERO=22]="TEACHER_HERO",e[e.SCHOOL_LIAISON=23]="SCHOOL_LIAISON",e[e.CROSS_CURRICULAR=24]="CROSS_CURRICULAR"}(t.DepartmentRoles||(t.DepartmentRoles={}))},930:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.AllowInactiveUsers="ALLOW_INACTIVE_USER"}(t.LoginClientFlags||(t.LoginClientFlags={}))},977:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.EXPIRED=1]="EXPIRED",e[e.MULTIPLE_LOGINS=2]="MULTIPLE_LOGINS",e[e.ACTIVE_LOGOUT=3]="ACTIVE_LOGOUT",e[e.QUOTA_EXCEEDED=4]="QUOTA_EXCEEDED"}(t.SessionExpiryReason||(t.SessionExpiryReason={}))},614:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});const r=i(780);var n=i(565);t.EPSession=n.EPSession,r.__exportStar(i(375),t),r.__exportStar(i(385),t),r.__exportStar(i(855),t),r.__exportStar(i(622),t),r.__exportStar(i(713),t),r.__exportStar(i(977),t);var s=i(530);t.DeviceSessionStoreStudentApp=s.default,r.__exportStar(i(163),t),r.__exportStar(i(527),t),r.__exportStar(i(127),t),r.__exportStar(i(936),t),r.__exportStar(i(970),t),r.__exportStar(i(526),t),r.__exportStar(i(785),t),r.__exportStar(i(365),t);var o=i(616);t.SessionStoreStudentApp=o.default,r.__exportStar(i(953),t),r.__exportStar(i(50),t),r.__exportStar(i(104),t),r.__exportStar(i(352),t),r.__exportStar(i(173),t),r.__exportStar(i(603),t),r.__exportStar(i(943),t),r.__exportStar(i(24),t)},163:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},527:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},127:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},936:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},970:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},526:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},785:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},365:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},173:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});class ResumeTypeInfo{constructor(e=null){if(null==e&&(e=ResumeTypeInfo.RESUME_NORMAL),e===ResumeTypeInfo.RESUME_NORMAL)this.type=ResumeTypeInfo.RESUME_NORMAL,this.id=null;else{const t=e.split("|");this.type=t[0],2===t.length&&(this.id=t[1])}}static createForCompetition(e){return new ResumeTypeInfo("".concat(this.RESUME_COMPETITION,"|").concat(e))}static createForTask(e){return new ResumeTypeInfo("".concat(this.RESUME_TASK,"|").concat(e.toString()))}static createNormal(){return new ResumeTypeInfo}static getDescriptionFromType(e){switch(e){case ResumeTypeInfo.RESUME_COMPETITION:return"Competition";case ResumeTypeInfo.RESUME_TASK:return"Homework";case ResumeTypeInfo.RESUME_NORMAL:default:return"Module"}}hasID(){return null!=this.id&&""!==this.id}toString(){return this.type===ResumeTypeInfo.RESUME_NORMAL?ResumeTypeInfo.RESUME_NORMAL:"".concat(this.type,"|").concat(this.id)}}t.ResumeTypeInfo=ResumeTypeInfo,ResumeTypeInfo.RESUME_NORMAL="NORMAL",ResumeTypeInfo.RESUME_COMPETITION="COMP",ResumeTypeInfo.RESUME_TASK="TASK"},603:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});const r=i(600),n=i(395);class SaveSettingsAction extends r.RemoteAction{constructor(e,t,i,r,n){super(),this.sessionID=e,this.userID=t,this.targetLanguageID=i,this.baseLanguageID=r,this.modifiedSettings=n,this.saveAttempt=0}execute(){(new n.AppServicesPortal).SaveUserSettings(this.sessionID,this.userID,this.baseLanguageID,this.targetLanguageID,this.modifiedSettings,this.createDefaultResponder(),null,!1)}rollback(e=null){this.dispatchFailureEvent()}responderFault(e){setTimeout((()=>{this.saveAttempt<3&&(this.saveAttempt++,this.execute())}),1e3)}}t.SaveSettingsAction=SaveSettingsAction},943:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});const r=i(173),n=i(24);class UserSettingsFacade{constructor(e){this.manager=e}saveGlobalSettings(){this.manager.saveGlobalSettings()}saveSubjectSpecificSettings(e,t){this.manager.saveSubjectSpecificSettings(e,t)}setBaseSettings(e,t,i,r,s){this.manager.setGlobalSetting(n.UserSettingsManager.BASE_LANGUAGE_CODE,e.toString()),this.manager.setGlobalSetting(n.UserSettingsManager.TARGET_LANGUAGE_CODE,t.toString()),this.manager.setGlobalSetting(n.UserSettingsManager.MODULE_ID_CODE,i.toString()),this.manager.setGlobalSetting(n.UserSettingsManager.MODULE_NAME_CODE,r),this.manager.setGlobalSetting(n.UserSettingsManager.CLASS_CODE,s.toString())}get baseLanguage(){return this.readGlobalInt(n.UserSettingsManager.BASE_LANGUAGE_CODE,-1)}get cheers(){return this.readGlobalInt(n.UserSettingsManager.CHEERS_CODE,0)}set cheers(e){this.manager.setGlobalSetting(n.UserSettingsManager.CHEERS_CODE,e.toString())}get cheersMuted(){return this.readGlobaBool(n.UserSettingsManager.CHEERS_MUTED_CODE)}set cheersMuted(e){this.manager.setGlobalSetting(n.UserSettingsManager.CHEERS_MUTED_CODE,e.toString())}get class(){return this.readGlobalInt(n.UserSettingsManager.CLASS_CODE,-1)}get displayedSubjectIDs(){return this.readIntArraySetting(n.UserSettingsManager.DISPLAYED_SUBJECTS_CODE)}set displayedSubjectIDs(e){this.writeIntArraySetting(n.UserSettingsManager.DISPLAYED_SUBJECTS_CODE,e)}get emailAsk(){return this.readGlobalInt(n.UserSettingsManager.EMAIL_ASK_CODE,0)}set emailAsk(e){this.manager.setGlobalSetting(n.UserSettingsManager.EMAIL_ASK_CODE,e.toString())}get IMEArrowMode(){return this.readGlobaBool(n.UserSettingsManager.IME_ARROW_MODE)}set IMEArrowMode(e){this.manager.setGlobalSetting(n.UserSettingsManager.IME_ARROW_MODE,e.toString())}get listMode(){return this.readSubjectInteger(n.UserSettingsManager.LIST_MODE_CODE,0)}set listMode(e){this.manager.setSubjectSpecificSetting(n.UserSettingsManager.LIST_MODE_CODE,e.toString())}get moduleID(){return this.readGlobalInt(n.UserSettingsManager.MODULE_ID_CODE,-1)}get moduleName(){return this.readGlobalString(n.UserSettingsManager.MODULE_NAME_CODE,"")}get muteLevel(){return this.readGlobalInt(n.UserSettingsManager.SOUND_CODE,0)}set muteLevel(e){this.manager.setGlobalSetting(n.UserSettingsManager.SOUND_CODE,e.toString())}get noSpam(){return this.readGlobaBool(n.UserSettingsManager.NO_SPAM_CODE)}set noSpam(e){this.manager.setGlobalSetting(n.UserSettingsManager.NO_SPAM_CODE,e.toString())}get passAsk(){return this.readGlobalInt(n.UserSettingsManager.PASS_ASK_CODE,0)}set passAsk(e){this.manager.setGlobalSetting(n.UserSettingsManager.PASS_ASK_CODE,e.toString())}get passwordChanged(){return this.readGlobaBool(n.UserSettingsManager.PASSWORD_CHANGED)}set passwordChanged(e){this.manager.setGlobalSetting(n.UserSettingsManager.PASSWORD_CHANGED,e.toString())}get resumeType(){const e=this.readGlobalString(n.UserSettingsManager.RESUME_TYPE,"NORMAL");return new r.ResumeTypeInfo(e)}set resumeType(e){const t=e.toString();this.manager.setGlobalSetting(n.UserSettingsManager.RESUME_TYPE,t)}get school(){return this.readGlobalInt(n.UserSettingsManager.SCHOOL_CODE,0)}set school(e){this.manager.setGlobalSetting(n.UserSettingsManager.SCHOOL_CODE,e.toString())}get scoreboardGrouping(){return this.readGlobalInt(n.UserSettingsManager.SCOREBOARD_GROUPING,4)}set scoreboardGrouping(e){this.manager.setGlobalSetting(n.UserSettingsManager.SCOREBOARD_GROUPING,e.toString())}get seenMarkingTutorial(){return this.readGlobaBool(n.UserSettingsManager.SEEN_MARKING_TUTORIAL)}set seenMarkingTutorial(e){this.manager.setGlobalSetting(n.UserSettingsManager.SEEN_MARKING_TUTORIAL,e.toString())}get selectedList(){return this.manager.getSubjectSpecificSetting(n.UserSettingsManager.LIST_CODE,"")}set selectedList(e){this.manager.setSubjectSpecificSetting(n.UserSettingsManager.LIST_CODE,e)}get selectedListGlobal(){return this.readGlobalString(n.UserSettingsManager.LIST_CODE,"")}set selectedListGlobal(e){this.manager.setGlobalSetting(n.UserSettingsManager.LIST_CODE,e)}get selectedQuestionNumber(){return this.readSubjectInteger(n.UserSettingsManager.QUESTION_NUMBER_CODE,20)}set selectedQuestionNumber(e){this.manager.setSubjectSpecificSetting(n.UserSettingsManager.QUESTION_NUMBER_CODE,e.toString())}get selectedTranslationMode(){return this.readSubjectInteger(n.UserSettingsManager.TRANSLATION_MODE_CODE,0)}set selectedTranslationMode(e){this.manager.setSubjectSpecificSetting(n.UserSettingsManager.TRANSLATION_MODE_CODE,e.toString())}get targetSubject(){return this.readGlobalInt(n.UserSettingsManager.TARGET_LANGUAGE_CODE,-1)}get tutorialIndex(){return this.readSubjectInteger(n.UserSettingsManager.TUTORIAL_INDEX_CODE,0)}set tutorialIndex(e){this.manager.setSubjectSpecificSetting(n.UserSettingsManager.TUTORIAL_INDEX_CODE,e.toString())}readIntArraySetting(e){const t=this.manager.getGlobalSetting(e,UserSettingsFacade.DEFAULT_INT_ARRAY_VALUE);return t===UserSettingsFacade.DEFAULT_INT_ARRAY_VALUE?[]:t.split(",").map((e=>parseInt(e,10))).filter((e=>!isNaN(e)))}writeIntArraySetting(e,t){const i=t.join();this.manager.setGlobalSetting(e,i)}readGlobaBool(e){return function isBoolStringTrue(e){return"True"===e||"true"===e}(this.manager.getGlobalSetting(e,"false"))}readGlobalInt(e,t){const i=this.manager.getGlobalSetting(e,t.toString());return parseInt(i,10)}readGlobalString(e,t){return this.manager.getGlobalSetting(e,t)}readSubjectInteger(e,t){const i=this.manager.getSubjectSpecificSetting(e,t.toString());return parseInt(i,10)}hasIntervalPassed(e,t){return this.manager.hasIntervalPassed(e,t)}suspendChanges(){this.manager.suspendChanges()}allowChanges(){this.manager.allowChanges()}}t.UserSettingsFacade=UserSettingsFacade,UserSettingsFacade.DEFAULT_INT_ARRAY_VALUE="-1"},24:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});const r=i(774),n=i(603);class UserSettingsManager{constructor(e,t){this.allowedChanges=!0,this.globalSettings={},this.subjectSpecificSettings={},this.dirtyGlobalSettings={},this.dirtySubjectSpecificSettings={},this.sessionID=e,this.userID=t}suspendChanges(){this.allowedChanges=!1}allowChanges(){this.allowedChanges=!0}hasIntervalPassed(e,t){if(0!==e){return Date.now()>e+1e3*t*60*60*24}return!0}setAllGlobalSettings(e){this.globalSettings={},e&&e.length>0&&(this.globalSettings=r.DictionaryHelper.toDictionary(e,(e=>e.Code)))}setAllSubjectSpecificSettings(e){this.subjectSpecificSettings={},e&&e.length>0&&(this.subjectSpecificSettings=r.DictionaryHelper.toDictionary(e,(e=>e.Code)))}getGlobalSetting(e,t="0"){if(this.globalSettings[e]){return this.globalSettings[e].Value}return t}getSubjectSpecificSetting(e,t="0"){if(this.subjectSpecificSettings[e]){return this.subjectSpecificSettings[e].Value}return t}setGlobalSetting(e,t){if(e in this.globalSettings){this.globalSettings[e].Value!==t&&(this.globalSettings[e].Value=t.toString(),this.dirtyGlobalSettings[e]=this.globalSettings[e])}else{const i={Code:e,Value:t};this.globalSettings[e]=i,this.dirtyGlobalSettings[e]=i}}setSubjectSpecificSetting(e,t){if(this.subjectSpecificSettings[e])this.subjectSpecificSettings[e].Value=t.toString(),this.dirtySubjectSpecificSettings[e]=this.subjectSpecificSettings[e];else{const i={Code:e,Value:t};this.subjectSpecificSettings[e]=i,this.dirtySubjectSpecificSettings[e]=i}}saveGlobalSettings(){if(this.allowedChanges){const e=r.DictionaryHelper.toArray(this.dirtyGlobalSettings);if(e&&e.length>0){new n.SaveSettingsAction(this.sessionID,this.userID,UserSettingsManager.NO_SPECIFIC_LANGUAGE,UserSettingsManager.NO_SPECIFIC_LANGUAGE,e).execute(),this.dirtyGlobalSettings={}}}}saveSubjectSpecificSettings(e,t){if(this.allowedChanges){const i=r.DictionaryHelper.toArray(this.dirtySubjectSpecificSettings);if(i&&i.length>0){new n.SaveSettingsAction(this.sessionID,this.userID,e,t,i).execute(),this.dirtySubjectSpecificSettings={}}}}}t.UserSettingsManager=UserSettingsManager,UserSettingsManager.NO_SPECIFIC_LANGUAGE=-1,UserSettingsManager.BASE_LANGUAGE_CODE="BASELANG",UserSettingsManager.SCHOOL_CODE="SCHOOL",UserSettingsManager.CLASS_CODE="CLASS",UserSettingsManager.EMAIL_ASK_CODE="EMAILASK",UserSettingsManager.LIST_CODE="LIST",UserSettingsManager.LIST_MODE_CODE="LISTMODE",UserSettingsManager.MODULE_ID_CODE="MDULID",UserSettingsManager.MODULE_NAME_CODE="MDULNAME",UserSettingsManager.NO_SPAM_CODE="NOSPAM",UserSettingsManager.QUESTION_NUMBER_CODE="QUESTNUM",UserSettingsManager.SOUND_CODE="SOUND",UserSettingsManager.TARGET_LANGUAGE_CODE="TARGLANG",UserSettingsManager.TRANSLATION_MODE_CODE="TRANMODE",UserSettingsManager.TUTORIAL_INDEX_CODE="TUTINDEX",UserSettingsManager.RESUME_TYPE="RSMTYP",UserSettingsManager.CHEERS_CODE="CHEERS",UserSettingsManager.CHEERS_MUTED_CODE="CHEERMUT",UserSettingsManager.SCOREBOARD_GROUPING="SCOREGRP",UserSettingsManager.IME_ARROW_MODE="IMEARROW",UserSettingsManager.DISPLAYED_SUBJECTS_CODE="DISPSUB",UserSettingsManager.SEEN_INTRO="SEEINTRO",UserSettingsManager.SEEN_MARKING_TUTORIAL="MARKTUT",UserSettingsManager.PASS_ASK_CODE="PASSASK",UserSettingsManager.PASSWORD_CHANGED="PASSCHNG"},530:function(e,t,i){var r;Object.defineProperty(t,"__esModule",{value:!0});const n=i(780),s=i(458),o=i(805),u=i(387);let a=r=class DeviceSessionStoreStudentApp extends u.DeviceSessionStore{};a.NAME="deviceSessionStoreStudentApp",a=r=n.__decorate([o.Module({dynamic:!0,name:r.NAME,store:s.VuexRootStore(),namespaced:!0})],a),t.default=o.getModule(a)},126:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});const r=i(780),n=i(458),s=i(395),o=i(774),u=i(414),a=i(930),c=i(565),l=r.__importDefault(i(530)),h="no-direct-login-provided",p="DeviceSession",d="getSessionStorage",b="setSessionStorage";class LoginHelperStudentApp extends u.LoginHelper{constructor(){super(),this.loginPortal=s.AppLoginPortal.instance,this.listenToOtherTabsRequestingSessionStorage()}get deviceSessionStore(){return l.default}listenToOtherTabsRequestingSessionStorage(){window.addEventListener("storage",(e=>{var t;if(e.key===d)localStorage.setItem(b,JSON.stringify(sessionStorage)),localStorage.removeItem(b);else if(e.key===b&&(null===(t=e.newValue)||void 0===t?void 0:t.length)>0&&!sessionStorage.length){const t=JSON.parse(e.newValue);p in t&&this.deviceSessionStore.storeSessionID({deviceSessionID:t.DeviceSession,rememberMe:!1}),this.persistedSessionStorageResolveFn()}})),this.attemptToGetSessionStorageFromOtherTab()}attemptToGetSessionStorageFromOtherTab(){this.persistedSessionStoragePromise=new Promise((e=>{this.persistedSessionStorageResolveFn=e,sessionStorage.length?e():(localStorage.setItem(d,"".concat(Date.now())),setTimeout((()=>e()),1e3))}))}static get deviceInformation(){let e="desktop";return n.DeviceUtil.isTablet?e="tablet":n.DeviceUtil.mobile&&(e="mobile"),{BrowserName:n.DeviceUtil.browserName,BrowserVersion:n.DeviceUtil.browserVersion,OperatingSystemName:n.DeviceUtil.osname,OperatingSystemVersion:n.DeviceUtil.osversion,PlatformType:e,UserAgent:window.navigator.userAgent,ScreenWidth:window.screen&&window.screen.width||null,ScreenHeight:window.screen&&window.screen.height||null}}loginWithUsernameAndPassword(e,t,i=!1){return r.__awaiter(this,void 0,void 0,(function*(){this.credentials={username:e,password:t};const r={Username:e,Password:t,AppId:c.EPSession.APP_ID,AppVersion:this.deviceOSAndAppVersion,DeviceInformation:LoginHelperStudentApp.deviceInformation,ClientFlags:this.getClientLoginFlags()},n=yield this.loginPortal.PasswordLogin(r,this.handleLoginServerError,this);return{isDirectLogin:!1,isImpersonating:!1,rememberDeviceSession:i,credentials:this.credentials,loginData:n}}))}attemptPassiveLogin(e,t){return r.__awaiter(this,void 0,void 0,(function*(){let e;try{e=yield this.tryToLogInWithSessionPromise(t)}catch(i){try{e=yield this.tryToLogInWithDirectLogin(t)}catch(t){if(t.message!==h)throw new Error(t);try{e=yield this.tryToLogInWithDeviceSessionCookie()}catch(e){throw new Error(e)}}}return e}))}handleLoginServerError(e,t){if(t&&s.JSONRPC.isEmptyResponseError(t))throw Error("Failed to contact server. Having trouble?<br>Check out <a href='https://status.educationperfect.com' target='_blank'>status.educationperfect.com</a>");if(e&&!e.Success){let t="";switch(e.Fault){case"ERR_OVER_QUOTA":if(null==e.NextQuotaStartDate)t="Well done! All your time is now used up.";else{const i=o.HumaniseUtil.describeUntil((e.NextQuotaStartDate.valueOf()-(new Date).valueOf())/1e3);t="Come back ".concat(i," to keep going!")}break;case"ERR_NO_ACTIVE_SCHOOLS":t="Account not active in any schools.";break;case"ERR_CANNOT_IMPERSONATE_ADMIN":t="Can not impersonate an Admin account.";break;case"ERR_DOWN_FOR_MAINTENANCE":t="EP is down for maintenance.<br>Check out <a href='https://status.educationperfect.com' target='_blank'>status.educationperfect.com</a>";break;case"ERR_INVALID_TOKEN":t="Please log in again.";break;case"ERR_USER_NOT_FOUND":t="User does not exist.";break;case"ERR_INVALID_USERNAME_PASSWORD":t="Invalid username or password.";break;case"ERR_TEMPORARY_LOCKOUT":t="Account temporarily locked out. Try again in 20 seconds.";break;case"ERR_EXPIRED_PASSWORD":t="Expired password.";break;default:t="Login error."}throw new Error(t)}}getClientLoginFlags(){return[a.LoginClientFlags.AllowInactiveUsers]}tryToLogInWithSessionPromise(e){return r.__awaiter(this,void 0,void 0,(function*(){if(e.promiseID&&"undefined"!==e.promiseID){const t={SessionPromiseId:e.promiseID,AppId:c.EPSession.APP_ID,AppVersion:this.deviceOSAndAppVersion,DeviceInformation:LoginHelperStudentApp.deviceInformation,ClientFlags:this.getClientLoginFlags()},i=yield this.loginPortal.SessionPromiseLogin(t,this.handleLoginServerError,this);return{isDirectLogin:!0,isImpersonating:e.impersonate,loginData:i,rememberDeviceSession:!1}}throw Error(h)}))}tryToLogInWithDirectLogin(e){return r.__awaiter(this,void 0,void 0,(function*(){if(e.sessionID&&e.hash){this.credentials={username:"",password:""};const t={SessionId:Number(e.sessionID),HashKey:e.hash,IsImpersonating:e.impersonate,AppId:c.EPSession.APP_ID,AppVersion:this.deviceOSAndAppVersion,DeviceInformation:LoginHelperStudentApp.deviceInformation,ClientFlags:this.getClientLoginFlags()},i=yield this.loginPortal.DirectLogin(t,this.handleLoginServerError,this);return{isDirectLogin:!0,isImpersonating:e.impersonate,loginData:i,rememberDeviceSession:!1}}throw Error(h)}))}tryToLogInWithDeviceSessionCookie(){return r.__awaiter(this,void 0,void 0,(function*(){if(yield this.persistedSessionStoragePromise,!this.deviceSessionStore.hasValidDeviceSession)throw Error("Invalid device session");this.credentials={username:"",password:""};const e={DeviceSessionId:this.deviceSessionStore.deviceSessionID,AppId:c.EPSession.APP_ID,AppVersion:this.deviceOSAndAppVersion,DeviceInformation:LoginHelperStudentApp.deviceInformation,ClientFlags:this.getClientLoginFlags()};try{return{isDirectLogin:!1,isImpersonating:!1,loginData:yield this.loginPortal.DeviceSessionLogin(e,this.handleLoginServerError,this),rememberDeviceSession:!1}}catch(e){throw this.deviceSessionStore.clearDeviceSession(),e}}))}get deviceOSAndAppVersion(){return n.DeviceUtil.OS+c.EPSession.VERSION}}t.LoginHelperStudentApp=LoginHelperStudentApp},104:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});const r=i(780),n=i(458),s=i(395),o=i(774),u=i(403),a=i(977),c=i(953),l=i(50),h=r.__importDefault(i(530)),p=i(126),d=r.__importDefault(i(616));class SessionServiceStudentApp extends u.SessionServiceBase{constructor(){super(),this.sessionRenewalAttemptsCounter=0,this.busChannel=c.bus.channel(l.APP_SESSION_CHANNEL),this.loginHelper=new p.LoginHelperStudentApp,this.deviceSessionStore.findDeviceSessionID()}static get serviceName(){return"sessionServiceStudentApp"}init(){}get deviceSessionStore(){return h.default}get sessionID(){return d.default.sessionID}get appServices(){return s.AppServicesPortal.instance}get loginPortal(){return s.AppLoginPortal.instance}loginWithUsernameAndPassword(e){return r.__awaiter(this,void 0,void 0,(function*(){try{const t=yield this.loginHelper.loginWithUsernameAndPassword(e.username,e.password,e.rememberMe);yield this.handleLoginSuccess(t)}catch(e){throw this.onLoginFailure(),this.busChannel.publish(l.busLoginFailureStudentApp(e)),e}}))}onLoginFailure(){d.default.cleanUpData(),this.stopSessionTimers()}attemptPassiveLogin(e){return r.__awaiter(this,void 0,void 0,(function*(){if(d.default.isLoggedIn&&!e.force)return;let t=d.default.loginQuery;t||(t=o.URLUtil.parseURLStringArguments(document.location.href.split("?")[1]));const i=this.getDirectLoginDataFromUrl(t);try{const e=yield this.loginHelper.attemptPassiveLogin(o.URLUtil.getAbsolutePath(),i);yield this.handleLoginSuccess(e)}catch(e){throw this.busChannel.publish(l.busLoginPassiveFailureStudentApp()),e}}))}handleLoginSuccess(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e.loginData;if(d.default.populateSessionDataOnLogin(t),e.isDirectLogin&&(d.default.setIsDirectLogin(e.isDirectLogin),d.default.setIsImpersonating(e.isImpersonating)),this.lastRenewed=Date.now(),this.keepSessionAlive(),!e.isImpersonating&&!this.deviceSessionStore.hasValidDeviceSession){const t=e.rememberDeviceSession;yield this.createDeviceSessionFromSession(t)}this.busChannel.publish(l.busLoginSuccessStudentApp(e))}))}createDeviceSessionFromSession(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=o.DateUtil.addMonthToDate(new Date);this.deviceSessionStore.setIsCreatingDeviceSession(!0);try{const i=yield s.AppServicesPortal.instance.GenerateDeviceSessionFromLPSessionID(this.sessionID,t);this.deviceSessionStore.storeSessionID({deviceSessionID:i.Session.ID,rememberMe:e})}catch(e){throw console.log(e.message),new Error("Cannot create device session")}this.deviceSessionStore.setIsCreatingDeviceSession(!1)}))}keepSessionAlive(){this.stopSessionTimers(),this.renewalTimer=new o.Timer(6e4),this.renewalTimer.timerEvent.addEventListener(this.onRenewalTimer,this),this.sleepDetectionTimer=new o.Timer(5e3),this.sleepDetectionTimer.timerEvent.addEventListener(this.onSleepDetectionTimer,this),this.renewalTimer.reset(),this.renewalTimer.start(),this.sleepDetectionTimer.reset(),this.sleepDetectionTimer.start()}stopSessionTimers(){null!=this.renewalTimer&&(this.renewalTimer.dispose(),this.renewalTimer=null),null!=this.sleepDetectionTimer&&(this.sleepDetectionTimer.dispose(),this.sleepDetectionTimer=null)}onRenewalTimer(){this.isBeingRenewed||this.renewSession()}onSleepDetectionTimer(){if(!this.isBeingRenewed){Date.now()-this.lastRenewed>=12e5&&(this.busChannel.publish(l.busSleepDetected()),this.renewSession())}}renewSession(){return r.__awaiter(this,void 0,void 0,(function*(){if(!this.isBeingRenewed){null!=this.sleepDetectionTimer&&this.sleepDetectionTimer.stop();try{this.isBeingRenewed=!0,yield this.appServices.RenewSessionLicence(this.sessionID,this.handleRenewalSessionExpiry,this),this.isBeingRenewed=!1,this.lastRenewed=Date.now(),this.sessionRenewalAttemptsCounter=0,null!=this.sleepDetectionTimer&&(this.sleepDetectionTimer.reset(),this.sleepDetectionTimer.start()),this.busChannel.publish(l.busSessionRenewalSuccessStudentApp({}))}catch(e){this.isBeingRenewed=!1,s.JSONRPC.isEmptyResponseError(e)&&(this.sessionRenewalAttemptsCounter<30?(this.sessionRenewalAttemptsCounter++,setTimeout((()=>this.renewSession()),1e4)):(this.sessionRenewalAttemptsCounter=0,this.busChannel.publish(l.busSessionRenewalFailureStudentApp()),this.dispatchSessionExpiryEvent(),d.default.cleanUpData()))}}}))}handleRenewalSessionExpiry(e,t){return r.__awaiter(this,void 0,void 0,(function*(){const i=e&&!e.Success&&e.Fault&&e.Fault.toLowerCase()==="Session Doesn't Exist".toLowerCase();!t&&i&&(this.dispatchSessionExpiryEvent(),d.default.cleanUpData(),this.stopSessionTimers(),this.busChannel.publish(l.busSessionRenewalFailureStudentApp()))}))}dispatchSessionExpiryEvent(){return r.__awaiter(this,void 0,void 0,(function*(){try{const e=(yield this.appServices.GetReasonForSessionExpiry(this.sessionID)).ReturnInt;let t="",i="",r=!1;switch(e){case a.SessionExpiryReason.EXPIRED:t="Session Expired",i="Your session expired due to a long period of inactivity.<br><br>Press <strong>Reconnect</strong> to continue.",r=!0;break;case a.SessionExpiryReason.MULTIPLE_LOGINS:t="Logged Out",i="You have been logged out because your account is logged in somewhere else.<br><br>Press <strong>Reconnect</strong> to log back in on this device.",r=!0;break;case a.SessionExpiryReason.QUOTA_EXCEEDED:t="Time for a break!",i="Well done! You've spent at least 8 hours on EP today! During the World Series events we restrict all competitors to 8 hours per 24 competition-hours measured from the competition start time.<br><br>Your account will be unlocked at 7pm NZST / 5pm AEST / 4:30pm ACST / 3pm AWST / 7am UTC.<br><br>Have a good rest! :)",r=!0;break;case a.SessionExpiryReason.ACTIVE_LOGOUT:case a.SessionExpiryReason.UNKNOWN:r=!1}r&&this.busChannel.publish(l.busSessionRenewalFailureReasonStudentApp({faultReason:i,faultTitle:t,renewalFailureReasonCode:e}))}catch(e){}}))}logOut(e){return r.__awaiter(this,void 0,void 0,(function*(){-1!==this.sessionID&&(yield this.loginPortal.Logout(this.sessionID));let t=null;if(e.removeDeviceSessionCache||d.default.isSSO&&!d.default.isImpersonating){if(d.default.isSSO&&n.DeviceUtil.cordova){t={url:"https://sso.educationperfect.com/slo/start?schoolId=".concat(d.default.schoolID)}}this.deviceSessionStore.clearDeviceSession()}d.default.cleanUpData(),this.stopSessionTimers(),this.busChannel.publish(l.busLogOutSuccessStudentApp({faultReason:e.fault,singleLogOutPrompt:t}))}))}}t.SessionServiceStudentApp=SessionServiceStudentApp},616:function(e,t,i){var r,n,s,o;Object.defineProperty(t,"__esModule",{value:!0});const u=i(780),a=i(458),c=i(234),l=i(395),h=i(774),p=i(805),d=-1,b=!1,f=!1,S=d,_=null,g=!1,m=!1,y=!1,v=!1,w=-1,I=null,E=d,A=!1,C="",O=!1,D=null,T=null,x=!1,N=d,M=d,L=d;let R=r=class SessionStoreStudentApp extends p.VuexModule{constructor(){super(...arguments),this._isDirectLogin=b,this._isImpersonating=f,this._authenticationProvider=S,this._loginQuery=_,this._mustAcceptEula=g,this._mustChangePassword=m,this._mustSetEmail=y,this._mustSelectSubjects=v,this._sessionID=w,this._user=I,this._privilegesLevel=E,this._enforceStrictPassword=A,this._paymentUrl=C,this._disableScoreboards=O,this._credits=D,this._school=T,this._useDatabaseData=x,this._yearDatasetID=N,this._monthDatasetID=M,this._selectedDatasetID=L}get isDirectLogin(){return this._isDirectLogin}get isImpersonating(){return this._isImpersonating}get authenticationProvider(){return this._authenticationProvider}get loginQuery(){return this._loginQuery}get mustAcceptEula(){return this._mustAcceptEula}get mustChangePassword(){return this._mustChangePassword}get mustSetEmail(){return this._mustSetEmail}get mustSelectSubjects(){return this._mustSelectSubjects}get sessionID(){return this._sessionID}get user(){return this._user}get privilegesLevel(){return this._privilegesLevel}get enforceStrictPassword(){return this._enforceStrictPassword}get paymentUrl(){return this._paymentUrl}get disableScoreboards(){return this._disableScoreboards}get credits(){return this._credits}get school(){return this._school}get useDatabaseData(){return this._useDatabaseData}get yearDatasetID(){return this._yearDatasetID}get monthDatasetID(){return this._monthDatasetID}get selectedDatasetID(){return this._selectedDatasetID}get isLoggedIn(){return!isNaN(this.sessionID)&&-1!==this.sessionID}get isSSO(){return this.authenticationProvider&&this.authenticationProvider>0}get isTrialUser(){return this.privilegesLevel===c.PrivilegeLevels.GENERIC_USER}get isTeacher(){return this.privilegesLevel===c.PrivilegeLevels.TEACHER}get isStudent(){return this.privilegesLevel===c.PrivilegeLevels.STUDENT}get isAdministrator(){return this.privilegesLevel===c.PrivilegeLevels.ADMINISTRATOR}get hasSelectedDatasetID(){return this.selectedDatasetID!==d}get isEligibleForScribo(){return this.school&&this.school.Attributes.ScriboEnabled}get isActiveUser(){return this.school&&this.school.UserIsActive}get isWorkplace(){var e;return(null===(e=this.school)||void 0===e?void 0:e.OrganizationType)===l.OrganizationTypes.Workplace}get userID(){return this.user?this.user.id:-1}get firstname(){return this.user?this.user.firstName:""}get surname(){return this.user?this.user.surname:""}get schoolID(){return this.school?this.school.Id:-1}get schoolName(){return this.school?this.school.Name:""}get schoolLogoURL(){return this.school?this.school.LogoUrl:""}get countryID(){return this.school?this.school.CountryId:-1}get selectedSchoolStateID(){return this.school?this.school.StateId:-1}setUseDatabaseStats(e){this._useDatabaseData=e}setIsDirectLogin(e){this._isDirectLogin=e}setIsImpersonating(e){this._isImpersonating=e}setLoginQuery(e){this._loginQuery=e}cleanUpData(){this._isDirectLogin=!1,this._isImpersonating=!1,this._authenticationProvider=d,this._loginQuery=null,this._mustAcceptEula=!1,this._mustChangePassword=!1,this._mustSetEmail=!1,this._mustAcceptEula=!1,this._sessionID=-1,this._user=null,this._privilegesLevel=d,this._enforceStrictPassword=!1,this._paymentUrl=null,this._disableScoreboards=!1,this._school=null,this._useDatabaseData=!1,this._yearDatasetID=d,this._monthDatasetID=d,this._selectedDatasetID=d}setSessionDataOnLogin(e){this._sessionID=e.SessionId,this._privilegesLevel=e.PrivilegesLevel,this._authenticationProvider=e.AuthenticationProviderId,this._user={id:e.User.Id,username:e.User.Username,firstName:e.User.FirstName,surname:e.User.Surname,title:e.User.Title,email:e.User.Email,idHash:e.User.UserIdHash},this._mustAcceptEula=e.MustAcceptEula,this._mustChangePassword=e.MustChangePassword,this._mustSetEmail=e.MustSetEmail,this._mustSelectSubjects=e.MustSelectSubjects,this._enforceStrictPassword=e.EnforcePasswordPolicy||this.isAdministrator||this.isTeacher,this._paymentUrl=e.PaymentUrl,this._disableScoreboards=e.DisableScoreboards,this._yearDatasetID=e.YearDataSetId,this._monthDatasetID=e.MonthDataSetId,this._selectedDatasetID=e.YearDataSetId,this._school={Id:e.School.Id,Name:e.School.Name,CountryId:e.School.CountryId,Country:e.School.Country,StateId:e.School.StateId,State:e.School.State,LogoUrl:e.School.LogoUrl,Attributes:e.School.Attributes,UserIsActive:void 0===e.School.UserIsActive||e.School.UserIsActive,OrganizationType:e.School.OrganizationType},this.isTrialUser?this._useDatabaseData=!1:this._useDatabaseData=!0}updateSessionDataset(e){this._selectedDatasetID=e}resetSessionDataset(){this._selectedDatasetID=this._yearDatasetID}updateUserEmail(e){this._user=Object.assign(Object.assign({},this._user),{email:e})}updateEULAAcceptance(e){this._mustAcceptEula=!e}setCredits(e){this._credits=e}setMustChangePassword(e){this._mustChangePassword=e}updateCredits(){return u.__awaiter(this,void 0,void 0,(function*(){const e=yield(yield l.AppServicesPortal.instance.GetNumberOfAvailableCheersForUser(this._sessionID)).ReturnInt;this.setCredits(e)}))}populateSessionDataOnLogin(e){this.cleanUpData(),this.setSessionDataOnLogin(e)}};R.NAME="sessionStoreStudentApp",u.__decorate([p.Mutation,u.__metadata("design:type",Function),u.__metadata("design:paramtypes",[Boolean]),u.__metadata("design:returntype",void 0)],R.prototype,"setUseDatabaseStats",null),u.__decorate([p.Mutation,u.__metadata("design:type",Function),u.__metadata("design:paramtypes",[Boolean]),u.__metadata("design:returntype",void 0)],R.prototype,"setIsDirectLogin",null),u.__decorate([p.Mutation,u.__metadata("design:type",Function),u.__metadata("design:paramtypes",[Boolean]),u.__metadata("design:returntype",void 0)],R.prototype,"setIsImpersonating",null),u.__decorate([p.Mutation,u.__metadata("design:type",Function),u.__metadata("design:paramtypes",["function"==typeof(n=void 0!==h.Dictionary&&h.Dictionary)?n:Object]),u.__metadata("design:returntype",void 0)],R.prototype,"setLoginQuery",null),u.__decorate([p.Mutation,u.__metadata("design:type",Function),u.__metadata("design:paramtypes",[]),u.__metadata("design:returntype",void 0)],R.prototype,"cleanUpData",null),u.__decorate([p.Mutation,u.__metadata("design:type",Function),u.__metadata("design:paramtypes",["function"==typeof(s="undefined"!=typeof LoginObject&&LoginObject)?s:Object]),u.__metadata("design:returntype",void 0)],R.prototype,"setSessionDataOnLogin",null),u.__decorate([p.Mutation,u.__metadata("design:type",Function),u.__metadata("design:paramtypes",[Number]),u.__metadata("design:returntype",void 0)],R.prototype,"updateSessionDataset",null),u.__decorate([p.Mutation,u.__metadata("design:type",Function),u.__metadata("design:paramtypes",[]),u.__metadata("design:returntype",void 0)],R.prototype,"resetSessionDataset",null),u.__decorate([p.Mutation,u.__metadata("design:type",Function),u.__metadata("design:paramtypes",[String]),u.__metadata("design:returntype",void 0)],R.prototype,"updateUserEmail",null),u.__decorate([p.Mutation,u.__metadata("design:type",Function),u.__metadata("design:paramtypes",[Boolean]),u.__metadata("design:returntype",void 0)],R.prototype,"updateEULAAcceptance",null),u.__decorate([p.Mutation,u.__metadata("design:type",Function),u.__metadata("design:paramtypes",[Number]),u.__metadata("design:returntype",void 0)],R.prototype,"setCredits",null),u.__decorate([p.Mutation,u.__metadata("design:type",Function),u.__metadata("design:paramtypes",[Boolean]),u.__metadata("design:returntype",void 0)],R.prototype,"setMustChangePassword",null),u.__decorate([p.Action,u.__metadata("design:type",Function),u.__metadata("design:paramtypes",[]),u.__metadata("design:returntype",Promise)],R.prototype,"updateCredits",null),u.__decorate([p.Action,u.__metadata("design:type",Function),u.__metadata("design:paramtypes",["function"==typeof(o="undefined"!=typeof LoginObject&&LoginObject)?o:Object]),u.__metadata("design:returntype",void 0)],R.prototype,"populateSessionDataOnLogin",null),R=r=u.__decorate([p.Module({dynamic:!0,name:r.NAME,store:a.VuexRootStore(),namespaced:!0})],R),t.default=p.getModule(R)},352:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});const r=i(622);t.COUNTRY_NAMES_BY_ID={[r.Countries.NEW_ZEALAND]:"New Zealand",[r.Countries.AUSTRALIA]:"Australia",[r.Countries.SOUTH_AFRICA]:"South Africa",[r.Countries.ENGLAND]:"England",[r.Countries.USA]:"USA",[r.Countries.GLOBAL]:"Global",[r.Countries.CANADA]:"Canada",[r.Countries.FRANCE]:"France",[r.Countries.GERMANY]:"Germany",[r.Countries.ITALY]:"Italy",[r.Countries.SPAIN]:"Spain",[r.Countries.IRELAND]:"Ireland",[r.Countries.SCOTLAND]:"Scotland",[r.Countries.WALES]:"Wales",[r.Countries.SWEDEN]:"Sweden",[r.Countries.MOROCCO]:"Morocco",[r.Countries.CYPRUS]:"Cyprus",[r.Countries.SERBIA]:"Serbia",[r.Countries.NORTHERN_IRELAND]:"Northern Ireland",[r.Countries.CHINA]:"China",[r.Countries.DENMARK]:"Denmark",[r.Countries.MALTA]:"Malta",[r.Countries.FINLAND]:"Finland",[r.Countries.QATAR]:"Qatar",[r.Countries.JAPAN]:"Japan",[r.Countries.MYANMAR]:"Myanmar",[r.Countries.HONG_KONG]:"Hong Kong",[r.Countries.THAILAND]:"Thailand",[r.Countries.TURKEY]:"Turkey",[r.Countries.VIETNAM]:"Vietnam",[r.Countries.ALBANIA]:"Albania",[r.Countries.BANGLADESH]:"Bangladesh",[r.Countries.INDIA]:"India",[r.Countries.ICELAND]:"Iceland",[r.Countries.BRAZIL]:"Brazil",[r.Countries.RUSSIA]:"Russia",[r.Countries.CAYMAN_ISLANDS]:"Cayman Islands",[r.Countries.BRUNEI]:"Brunei",[r.Countries.GUERNSEY]:"Guernsey",[r.Countries.SINGAPORE]:"Singapore",[r.Countries.INDONESIA]:"Indonesia",[r.Countries.MALAYSIA]:"Malaysia",[r.Countries.UNITED_ARAB_EMIRATES]:"United Arab Emirates",[r.Countries.COLOMBIA]:"Colombia",[r.Countries.UZBEKISTAN]:"Uzbekistan",[r.Countries.MEXICO]:"Mexico",[r.Countries.PHILIPPINES]:"Philippines",[r.Countries.SOUTH_KOREA]:"South Korea",[r.Countries.NORWAY]:"Norway",[r.Countries.SAUDI_ARABIA]:"Saudi Arabia",[r.Countries.NIGERIA]:"Nigeria",[r.Countries.HUNGARY]:"Hungary",[r.Countries.KAZAKHSTAN]:"Kazakhstan",[r.Countries.AUSTRIA]:"Austria",[r.Countries.CZECH_REPUBLIC]:"Czech Republic",[r.Countries.TAIWAN]:"Taiwan",[r.Countries.BRITISH_VIRGIN_ISLANDS]:"British Virgin Islands",[r.Countries.NEPAL]:"Nepal",[r.Countries.PERU]:"Peru",[r.Countries.ROMANIA]:"Romania",[r.Countries.CAMBODIA]:"Cambodia",[r.Countries.SRI_LANKA]:"Sri Lanka",[r.Countries.PORTUGAL]:"Portugal",[r.Countries.PANAMA]:"Panama",[r.Countries.BELGIUM]:"Belgium",[r.Countries.MALDIVES]:"Maldives",[r.Countries.MONGOLIA]:"Mongolia",[r.Countries.SWITZERLAND]:"Switzerland",[r.Countries.KUWAIT]:"Kuwait",[r.Countries.BAHRAIN]:"Bahrain",[r.Countries.UGANDA]:"Uganda",[r.Countries.ISRAEL]:"Israel",[r.Countries.LEBANON]:"Lebanon",[r.Countries.OMAN]:"Oman",[r.Countries.GHANA]:"Ghana",[r.Countries.VANUATU]:"Vanuatu",[r.Countries.ZAMBIA]:"Zambia",[r.Countries.TAHITI]:"Tahiti",[r.Countries.TIMOR_LESTE]:"Timor-Leste",[r.Countries.EGYPT]:"Egypt",[r.Countries.KIRIBATI]:"Kiribati",[r.Countries.GEORGIA]:"Georgia",[r.Countries.MAURITIUS]:"Mauritius",[r.Countries.BERMUDA]:"Bermuda"},t.COUNTRY_CURRENCY_BY_ID={[r.Countries.AUSTRALIA]:"AUD",[r.Countries.NEW_ZEALAND]:"NZD",[r.Countries.USA]:"USD"};t.CountriesHelper=class CountriesHelper{static idToName(e){return t.COUNTRY_NAMES_BY_ID[e]||"Unknown"}static nameToID(e){if(e)for(const i in t.COUNTRY_NAMES_BY_ID)if(t.COUNTRY_NAMES_BY_ID[i]){const r=t.COUNTRY_NAMES_BY_ID[i];if(r.toLowerCase()===e.toLowerCase())return parseInt(r,10)}return-1}static idToCurrency(e){return t.COUNTRY_CURRENCY_BY_ID[e]}}},18:function(e,t,i){i.r(t),i.d(t,{audit:function(){return audit},auditTime:function(){return auditTime},buffer:function(){return buffer},bufferCount:function(){return bufferCount},bufferTime:function(){return bufferTime},bufferToggle:function(){return bufferToggle},bufferWhen:function(){return bufferWhen},catchError:function(){return catchError},combineAll:function(){return combineAll},combineLatest:function(){return combineLatest_combineLatest},concat:function(){return concat_concat},concatAll:function(){return concatAll},concatMap:function(){return concatMap},concatMapTo:function(){return concatMapTo},count:function(){return count},debounce:function(){return debounce},debounceTime:function(){return debounceTime},defaultIfEmpty:function(){return defaultIfEmpty},delay:function(){return delay},delayWhen:function(){return delayWhen},dematerialize:function(){return dematerialize},distinct:function(){return distinct},distinctUntilChanged:function(){return distinctUntilChanged},distinctUntilKeyChanged:function(){return distinctUntilKeyChanged},elementAt:function(){return elementAt},endWith:function(){return endWith},every:function(){return every},exhaust:function(){return exhaust},exhaustMap:function(){return exhaustMap},expand:function(){return expand},filter:function(){return filter},finalize:function(){return finalize},find:function(){return find},findIndex:function(){return findIndex},first:function(){return first},flatMap:function(){return q},groupBy:function(){return groupBy},ignoreElements:function(){return ignoreElements},isEmpty:function(){return isEmpty},last:function(){return last},map:function(){return map},mapTo:function(){return mapTo},materialize:function(){return materialize},max:function(){return max},merge:function(){return merge_merge},mergeAll:function(){return mergeAll},mergeMap:function(){return mergeMap},mergeMapTo:function(){return mergeMapTo},mergeScan:function(){return mergeScan},min:function(){return min},multicast:function(){return multicast},observeOn:function(){return observeOn},onErrorResumeNext:function(){return onErrorResumeNext},pairwise:function(){return pairwise},partition:function(){return partition},pluck:function(){return pluck},publish:function(){return publish},publishBehavior:function(){return publishBehavior},publishLast:function(){return publishLast},publishReplay:function(){return publishReplay},race:function(){return race_race},reduce:function(){return reduce},refCount:function(){return refCount},repeat:function(){return repeat},repeatWhen:function(){return repeatWhen},retry:function(){return retry},retryWhen:function(){return retryWhen},sample:function(){return sample},sampleTime:function(){return sampleTime},scan:function(){return scan},sequenceEqual:function(){return sequenceEqual},share:function(){return share},shareReplay:function(){return shareReplay},single:function(){return single},skip:function(){return skip},skipLast:function(){return skipLast},skipUntil:function(){return skipUntil},skipWhile:function(){return skipWhile},startWith:function(){return startWith},subscribeOn:function(){return subscribeOn},switchAll:function(){return switchAll},switchMap:function(){return switchMap},switchMapTo:function(){return switchMapTo},take:function(){return take},takeLast:function(){return takeLast},takeUntil:function(){return takeUntil},takeWhile:function(){return takeWhile},tap:function(){return tap},throttle:function(){return throttle},throttleTime:function(){return throttleTime},throwIfEmpty:function(){return throwIfEmpty},timeInterval:function(){return timeInterval},timeout:function(){return timeout},timeoutWith:function(){return timeoutWith},timestamp:function(){return timestamp},toArray:function(){return toArray},window:function(){return window_window},windowCount:function(){return windowCount},windowTime:function(){return windowTime},windowToggle:function(){return windowToggle},windowWhen:function(){return windowWhen},withLatestFrom:function(){return withLatestFrom},zip:function(){return zip_zip},zipAll:function(){return zipAll}});var r=i(780);function isFunction(e){return"function"==typeof e}var n=!1,s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;n=e},get useDeprecatedSynchronousErrorHandling(){return n}};function hostReportError(e){setTimeout((function(){throw e}),0)}var o={closed:!0,next:function(e){},error:function(e){if(s.useDeprecatedSynchronousErrorHandling)throw e;hostReportError(e)},complete:function(){}},u=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();function isObject(e){return null!==e&&"object"==typeof e}var a=function(){function UnsubscriptionErrorImpl(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return UnsubscriptionErrorImpl.prototype=Object.create(Error.prototype),UnsubscriptionErrorImpl}(),c=function(){function Subscription(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return Subscription.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this,i=t._parentOrParents,r=t._ctorUnsubscribe,n=t._unsubscribe,s=t._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i instanceof Subscription)i.remove(this);else if(null!==i)for(var o=0;o<i.length;++o){i[o].remove(this)}if(isFunction(n)){r&&(this._unsubscribe=void 0);try{n.call(this)}catch(t){e=t instanceof a?flattenUnsubscriptionErrors(t.errors):[t]}}if(u(s)){o=-1;for(var c=s.length;++o<c;){var l=s[o];if(isObject(l))try{l.unsubscribe()}catch(t){e=e||[],t instanceof a?e=e.concat(flattenUnsubscriptionErrors(t.errors)):e.push(t)}}}if(e)throw new a(e)}},Subscription.prototype.add=function(e){var t=e;if(!e)return Subscription.EMPTY;switch(typeof e){case"function":t=new Subscription(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof Subscription)){var i=t;(t=new Subscription)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var r=t._parentOrParents;if(null===r)t._parentOrParents=this;else if(r instanceof Subscription){if(r===this)return t;t._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return t;r.push(this)}var n=this._subscriptions;return null===n?this._subscriptions=[t]:n.push(t),t},Subscription.prototype.remove=function(e){var t=this._subscriptions;if(t){var i=t.indexOf(e);-1!==i&&t.splice(i,1)}},Subscription.EMPTY=function(e){return e.closed=!0,e}(new Subscription),Subscription}();function flattenUnsubscriptionErrors(e){return e.reduce((function(e,t){return e.concat(t instanceof a?t.errors:t)}),[])}var l=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),h=function(e){function Subscriber(t,i,r){var n=e.call(this)||this;switch(n.syncErrorValue=null,n.syncErrorThrown=!1,n.syncErrorThrowable=!1,n.isStopped=!1,arguments.length){case 0:n.destination=o;break;case 1:if(!t){n.destination=o;break}if("object"==typeof t){t instanceof Subscriber?(n.syncErrorThrowable=t.syncErrorThrowable,n.destination=t,t.add(n)):(n.syncErrorThrowable=!0,n.destination=new p(n,t));break}default:n.syncErrorThrowable=!0,n.destination=new p(n,t,i,r)}return n}return r.__extends(Subscriber,e),Subscriber.prototype[l]=function(){return this},Subscriber.create=function(e,t,i){var r=new Subscriber(e,t,i);return r.syncErrorThrowable=!1,r},Subscriber.prototype.next=function(e){this.isStopped||this._next(e)},Subscriber.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},Subscriber.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},Subscriber.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},Subscriber.prototype._next=function(e){this.destination.next(e)},Subscriber.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},Subscriber.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},Subscriber.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},Subscriber}(c),p=function(e){function SafeSubscriber(t,i,r,n){var s,u=e.call(this)||this;u._parentSubscriber=t;var a=u;return isFunction(i)?s=i:i&&(s=i.next,r=i.error,n=i.complete,i!==o&&(isFunction((a=Object.create(i)).unsubscribe)&&u.add(a.unsubscribe.bind(a)),a.unsubscribe=u.unsubscribe.bind(u))),u._context=a,u._next=s,u._error=r,u._complete=n,u}return r.__extends(SafeSubscriber,e),SafeSubscriber.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},SafeSubscriber.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,i=s.useDeprecatedSynchronousErrorHandling;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;hostReportError(e)}}},SafeSubscriber.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var wrappedComplete=function(){return e._complete.call(e._context)};s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,wrappedComplete),this.unsubscribe()):(this.__tryOrUnsub(wrappedComplete),this.unsubscribe())}else this.unsubscribe()}},SafeSubscriber.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw e;hostReportError(e)}},SafeSubscriber.prototype.__tryOrSetError=function(e,t,i){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(t){return s.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(hostReportError(t),!0)}return!1},SafeSubscriber.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},SafeSubscriber}(h);var d=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function identity(e){return e}function pipe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return pipeFromArray(e)}function pipeFromArray(e){return 0===e.length?identity:1===e.length?e[0]:function piped(t){return e.reduce((function(e,t){return t(e)}),t)}}var b=function(){function Observable(e){this._isScalar=!1,e&&(this._subscribe=e)}return Observable.prototype.lift=function(e){var t=new Observable;return t.source=this,t.operator=e,t},Observable.prototype.subscribe=function(e,t,i){var r=this.operator,n=function toSubscriber(e,t,i){if(e){if(e instanceof h)return e;if(e[l])return e[l]()}return e||t||i?new h(e,t,i):new h(o)}(e,t,i);if(r?n.add(r.call(n,this.source)):n.add(this.source||s.useDeprecatedSynchronousErrorHandling&&!n.syncErrorThrowable?this._subscribe(n):this._trySubscribe(n)),s.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n},Observable.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){s.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function canReportError(e){for(;e;){var t=e,i=t.closed,r=t.destination,n=t.isStopped;if(i||n)return!1;e=r&&r instanceof h?r:null}return!0}(e)?console.warn(t):e.error(t)}},Observable.prototype.forEach=function(e,t){var i=this;return new(t=getPromiseCtor(t))((function(t,r){var n;n=i.subscribe((function(t){try{e(t)}catch(e){r(e),n&&n.unsubscribe()}}),r,t)}))},Observable.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},Observable.prototype[d]=function(){return this},Observable.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:pipeFromArray(e)(this)},Observable.prototype.toPromise=function(e){var t=this;return new(e=getPromiseCtor(e))((function(e,i){var r;t.subscribe((function(e){return r=e}),(function(e){return i(e)}),(function(){return e(r)}))}))},Observable.create=function(e){return new Observable(e)},Observable}();function getPromiseCtor(e){if(e||(e=s.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var subscribeToArray=function(e){return function(t){for(var i=0,r=e.length;i<r&&!t.closed;i++)t.next(e[i]);t.complete()}};function getSymbolIterator(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var f=getSymbolIterator(),isArrayLike=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function isPromise(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var subscribeTo=function(e){if(e&&"function"==typeof e[d])return r=e,function(e){var t=r[d]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(isArrayLike(e))return subscribeToArray(e);if(isPromise(e))return i=e,function(e){return i.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,hostReportError),e};if(e&&"function"==typeof e[f])return t=e,function(e){for(var i=t[f]();;){var r=void 0;try{r=i.next()}catch(t){return e.error(t),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof i.return&&e.add((function(){i.return&&i.return()})),e};var t,i,r,n=isObject(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+n+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")},S=function(e){function SimpleInnerSubscriber(t){var i=e.call(this)||this;return i.parent=t,i}return r.__extends(SimpleInnerSubscriber,e),SimpleInnerSubscriber.prototype._next=function(e){this.parent.notifyNext(e)},SimpleInnerSubscriber.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},SimpleInnerSubscriber.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},SimpleInnerSubscriber}(h),_=function(e){function SimpleOuterSubscriber(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(SimpleOuterSubscriber,e),SimpleOuterSubscriber.prototype.notifyNext=function(e){this.destination.next(e)},SimpleOuterSubscriber.prototype.notifyError=function(e){this.destination.error(e)},SimpleOuterSubscriber.prototype.notifyComplete=function(){this.destination.complete()},SimpleOuterSubscriber}(h);function innerSubscribe(e,t){if(!t.closed){if(e instanceof b)return e.subscribe(t);var i;try{i=subscribeTo(e)(t)}catch(e){t.error(e)}return i}}function audit(e){return function auditOperatorFunction(t){return t.lift(new g(e))}}var g=function(){function AuditOperator(e){this.durationSelector=e}return AuditOperator.prototype.call=function(e,t){return t.subscribe(new m(e,this.durationSelector))},AuditOperator}(),m=function(e){function AuditSubscriber(t,i){var r=e.call(this,t)||this;return r.durationSelector=i,r.hasValue=!1,r}return r.__extends(AuditSubscriber,e),AuditSubscriber.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t=void 0;try{t=(0,this.durationSelector)(e)}catch(e){return this.destination.error(e)}var i=innerSubscribe(t,new S(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}},AuditSubscriber.prototype.clearThrottle=function(){var e=this,t=e.value,i=e.hasValue,r=e.throttled;r&&(this.remove(r),this.throttled=void 0,r.unsubscribe()),i&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))},AuditSubscriber.prototype.notifyNext=function(){this.clearThrottle()},AuditSubscriber.prototype.notifyComplete=function(){this.clearThrottle()},AuditSubscriber}(_),y=function(e){function AsyncAction(t,i){var r=e.call(this,t,i)||this;return r.scheduler=t,r.work=i,r.pending=!1,r}return r.__extends(AsyncAction,e),AsyncAction.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},AsyncAction.prototype.requestAsyncId=function(e,t,i){return void 0===i&&(i=0),setInterval(e.flush.bind(e,this),i)},AsyncAction.prototype.recycleAsyncId=function(e,t,i){if(void 0===i&&(i=0),null!==i&&this.delay===i&&!1===this.pending)return t;clearInterval(t)},AsyncAction.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},AsyncAction.prototype._execute=function(e,t){var i=!1,r=void 0;try{this.work(e)}catch(e){i=!0,r=!!e&&e||new Error(e)}if(i)return this.unsubscribe(),r},AsyncAction.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,i=t.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},AsyncAction}(function(e){function Action(t,i){return e.call(this)||this}return r.__extends(Action,e),Action.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},Action}(c)),v=function(){function Scheduler(e,t){void 0===t&&(t=Scheduler.now),this.SchedulerAction=e,this.now=t}return Scheduler.prototype.schedule=function(e,t,i){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(i,t)},Scheduler.now=function(){return Date.now()},Scheduler}(),w=function(e){function AsyncScheduler(t,i){void 0===i&&(i=v.now);var r=e.call(this,t,(function(){return AsyncScheduler.delegate&&AsyncScheduler.delegate!==r?AsyncScheduler.delegate.now():i()}))||this;return r.actions=[],r.active=!1,r.scheduled=void 0,r}return r.__extends(AsyncScheduler,e),AsyncScheduler.prototype.schedule=function(t,i,r){return void 0===i&&(i=0),AsyncScheduler.delegate&&AsyncScheduler.delegate!==this?AsyncScheduler.delegate.schedule(t,i,r):e.prototype.schedule.call(this,t,i,r)},AsyncScheduler.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}},AsyncScheduler}(v),I=new w(y);function isNumeric(e){return!u(e)&&e-parseFloat(e)+1>=0}function isScheduler_isScheduler(e){return e&&"function"==typeof e.schedule}function dispatch(e){var t=e.index,i=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===i)return r.complete();e.index=t+1,this.schedule(e,i)}}function auditTime(e,t){return void 0===t&&(t=I),audit((function(){return function timer(e,t,i){void 0===e&&(e=0);var r=-1;return isNumeric(t)?r=Number(t)<1?1:Number(t):isScheduler_isScheduler(t)&&(i=t),isScheduler_isScheduler(i)||(i=I),new b((function(t){var n=isNumeric(e)?e:+e-i.now();return i.schedule(dispatch,n,{index:0,period:r,subscriber:t})}))}(e,t)}))}function buffer(e){return function bufferOperatorFunction(t){return t.lift(new E(e))}}var E=function(){function BufferOperator(e){this.closingNotifier=e}return BufferOperator.prototype.call=function(e,t){return t.subscribe(new A(e,this.closingNotifier))},BufferOperator}(),A=function(e){function BufferSubscriber(t,i){var r=e.call(this,t)||this;return r.buffer=[],r.add(innerSubscribe(i,new S(r))),r}return r.__extends(BufferSubscriber,e),BufferSubscriber.prototype._next=function(e){this.buffer.push(e)},BufferSubscriber.prototype.notifyNext=function(){var e=this.buffer;this.buffer=[],this.destination.next(e)},BufferSubscriber}(_);function bufferCount(e,t){return void 0===t&&(t=null),function bufferCountOperatorFunction(i){return i.lift(new C(e,t))}}var C=function(){function BufferCountOperator(e,t){this.bufferSize=e,this.startBufferEvery=t,this.subscriberClass=t&&e!==t?D:O}return BufferCountOperator.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},BufferCountOperator}(),O=function(e){function BufferCountSubscriber(t,i){var r=e.call(this,t)||this;return r.bufferSize=i,r.buffer=[],r}return r.__extends(BufferCountSubscriber,e),BufferCountSubscriber.prototype._next=function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])},BufferCountSubscriber.prototype._complete=function(){var t=this.buffer;t.length>0&&this.destination.next(t),e.prototype._complete.call(this)},BufferCountSubscriber}(h),D=function(e){function BufferSkipCountSubscriber(t,i,r){var n=e.call(this,t)||this;return n.bufferSize=i,n.startBufferEvery=r,n.buffers=[],n.count=0,n}return r.__extends(BufferSkipCountSubscriber,e),BufferSkipCountSubscriber.prototype._next=function(e){var t=this,i=t.bufferSize,r=t.startBufferEvery,n=t.buffers,s=t.count;this.count++,s%r==0&&n.push([]);for(var o=n.length;o--;){var u=n[o];u.push(e),u.length===i&&(n.splice(o,1),this.destination.next(u))}},BufferSkipCountSubscriber.prototype._complete=function(){for(var t=this.buffers,i=this.destination;t.length>0;){var r=t.shift();r.length>0&&i.next(r)}e.prototype._complete.call(this)},BufferSkipCountSubscriber}(h);function bufferTime(e){var t=arguments.length,i=I;isScheduler_isScheduler(arguments[arguments.length-1])&&(i=arguments[arguments.length-1],t--);var r=null;t>=2&&(r=arguments[1]);var n=Number.POSITIVE_INFINITY;return t>=3&&(n=arguments[2]),function bufferTimeOperatorFunction(t){return t.lift(new T(e,r,n,i))}}var T=function(){function BufferTimeOperator(e,t,i,r){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=i,this.scheduler=r}return BufferTimeOperator.prototype.call=function(e,t){return t.subscribe(new N(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},BufferTimeOperator}(),x=function(){return function Context(){this.buffer=[]}}(),N=function(e){function BufferTimeSubscriber(t,i,r,n,s){var o=e.call(this,t)||this;o.bufferTimeSpan=i,o.bufferCreationInterval=r,o.maxBufferSize=n,o.scheduler=s,o.contexts=[];var u=o.openContext();if(o.timespanOnly=null==r||r<0,o.timespanOnly){var a={subscriber:o,context:u,bufferTimeSpan:i};o.add(u.closeAction=s.schedule(dispatchBufferTimeSpanOnly,i,a))}else{var c={subscriber:o,context:u},l={bufferTimeSpan:i,bufferCreationInterval:r,subscriber:o,scheduler:s};o.add(u.closeAction=s.schedule(dispatchBufferClose,i,c)),o.add(s.schedule(dispatchBufferCreation,r,l))}return o}return r.__extends(BufferTimeSubscriber,e),BufferTimeSubscriber.prototype._next=function(e){for(var t,i=this.contexts,r=i.length,n=0;n<r;n++){var s=i[n],o=s.buffer;o.push(e),o.length==this.maxBufferSize&&(t=s)}t&&this.onBufferFull(t)},BufferTimeSubscriber.prototype._error=function(t){this.contexts.length=0,e.prototype._error.call(this,t)},BufferTimeSubscriber.prototype._complete=function(){for(var t=this.contexts,i=this.destination;t.length>0;){var r=t.shift();i.next(r.buffer)}e.prototype._complete.call(this)},BufferTimeSubscriber.prototype._unsubscribe=function(){this.contexts=null},BufferTimeSubscriber.prototype.onBufferFull=function(e){this.closeContext(e);var t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();var i=this.bufferTimeSpan,r={subscriber:this,context:e,bufferTimeSpan:i};this.add(e.closeAction=this.scheduler.schedule(dispatchBufferTimeSpanOnly,i,r))}},BufferTimeSubscriber.prototype.openContext=function(){var e=new x;return this.contexts.push(e),e},BufferTimeSubscriber.prototype.closeContext=function(e){this.destination.next(e.buffer);var t=this.contexts;(t?t.indexOf(e):-1)>=0&&t.splice(t.indexOf(e),1)},BufferTimeSubscriber}(h);function dispatchBufferTimeSpanOnly(e){var t=e.subscriber,i=e.context;i&&t.closeContext(i),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function dispatchBufferCreation(e){var t=e.bufferCreationInterval,i=e.bufferTimeSpan,r=e.subscriber,n=e.scheduler,s=r.openContext();r.closed||(r.add(s.closeAction=n.schedule(dispatchBufferClose,i,{subscriber:r,context:s})),this.schedule(e,t))}function dispatchBufferClose(e){var t=e.subscriber,i=e.context;t.closeContext(i)}var M=function(e){function InnerSubscriber(t,i,r){var n=e.call(this)||this;return n.parent=t,n.outerValue=i,n.outerIndex=r,n.index=0,n}return r.__extends(InnerSubscriber,e),InnerSubscriber.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},InnerSubscriber.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},InnerSubscriber.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},InnerSubscriber}(h);function subscribeToResult(e,t,i,r,n){if(void 0===n&&(n=new M(e,i,r)),!n.closed)return t instanceof b?t.subscribe(n):subscribeTo(t)(n)}var L=function(e){function OuterSubscriber(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(OuterSubscriber,e),OuterSubscriber.prototype.notifyNext=function(e,t,i,r,n){this.destination.next(t)},OuterSubscriber.prototype.notifyError=function(e,t){this.destination.error(e)},OuterSubscriber.prototype.notifyComplete=function(e){this.destination.complete()},OuterSubscriber}(h);function bufferToggle(e,t){return function bufferToggleOperatorFunction(i){return i.lift(new R(e,t))}}var R=function(){function BufferToggleOperator(e,t){this.openings=e,this.closingSelector=t}return BufferToggleOperator.prototype.call=function(e,t){return t.subscribe(new P(e,this.openings,this.closingSelector))},BufferToggleOperator}(),P=function(e){function BufferToggleSubscriber(t,i,r){var n=e.call(this,t)||this;return n.closingSelector=r,n.contexts=[],n.add(subscribeToResult(n,i)),n}return r.__extends(BufferToggleSubscriber,e),BufferToggleSubscriber.prototype._next=function(e){for(var t=this.contexts,i=t.length,r=0;r<i;r++)t[r].buffer.push(e)},BufferToggleSubscriber.prototype._error=function(t){for(var i=this.contexts;i.length>0;){var r=i.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,e.prototype._error.call(this,t)},BufferToggleSubscriber.prototype._complete=function(){for(var t=this.contexts;t.length>0;){var i=t.shift();this.destination.next(i.buffer),i.subscription.unsubscribe(),i.buffer=null,i.subscription=null}this.contexts=null,e.prototype._complete.call(this)},BufferToggleSubscriber.prototype.notifyNext=function(e,t){e?this.closeBuffer(e):this.openBuffer(t)},BufferToggleSubscriber.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},BufferToggleSubscriber.prototype.openBuffer=function(e){try{var t=this.closingSelector.call(this,e);t&&this.trySubscribe(t)}catch(e){this._error(e)}},BufferToggleSubscriber.prototype.closeBuffer=function(e){var t=this.contexts;if(t&&e){var i=e.buffer,r=e.subscription;this.destination.next(i),t.splice(t.indexOf(e),1),this.remove(r),r.unsubscribe()}},BufferToggleSubscriber.prototype.trySubscribe=function(e){var t=this.contexts,i=new c,r={buffer:[],subscription:i};t.push(r);var n=subscribeToResult(this,e,r);!n||n.closed?this.closeBuffer(r):(n.context=r,this.add(n),i.add(n))},BufferToggleSubscriber}(L);function bufferWhen(e){return function(t){return t.lift(new U(e))}}var U=function(){function BufferWhenOperator(e){this.closingSelector=e}return BufferWhenOperator.prototype.call=function(e,t){return t.subscribe(new B(e,this.closingSelector))},BufferWhenOperator}(),B=function(e){function BufferWhenSubscriber(t,i){var r=e.call(this,t)||this;return r.closingSelector=i,r.subscribing=!1,r.openBuffer(),r}return r.__extends(BufferWhenSubscriber,e),BufferWhenSubscriber.prototype._next=function(e){this.buffer.push(e)},BufferWhenSubscriber.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),e.prototype._complete.call(this)},BufferWhenSubscriber.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},BufferWhenSubscriber.prototype.notifyNext=function(){this.openBuffer()},BufferWhenSubscriber.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},BufferWhenSubscriber.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var t,i=this.buffer;this.buffer&&this.destination.next(i),this.buffer=[];try{t=(0,this.closingSelector)()}catch(e){return this.error(e)}e=new c,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(innerSubscribe(t,new S(this))),this.subscribing=!1},BufferWhenSubscriber}(_);function catchError(e){return function catchErrorOperatorFunction(t){var i=new W(e),r=t.lift(i);return i.caught=r}}var W=function(){function CatchOperator(e){this.selector=e}return CatchOperator.prototype.call=function(e,t){return t.subscribe(new F(e,this.selector,this.caught))},CatchOperator}(),F=function(e){function CatchSubscriber(t,i,r){var n=e.call(this,t)||this;return n.selector=i,n.caught=r,n}return r.__extends(CatchSubscriber,e),CatchSubscriber.prototype.error=function(t){if(!this.isStopped){var i=void 0;try{i=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle();var r=new S(this);this.add(r);var n=innerSubscribe(i,r);n!==r&&this.add(n)}},CatchSubscriber}(_),k={};var j=function(){function CombineLatestOperator(e){this.resultSelector=e}return CombineLatestOperator.prototype.call=function(e,t){return t.subscribe(new G(e,this.resultSelector))},CombineLatestOperator}(),G=function(e){function CombineLatestSubscriber(t,i){var r=e.call(this,t)||this;return r.resultSelector=i,r.active=0,r.values=[],r.observables=[],r}return r.__extends(CombineLatestSubscriber,e),CombineLatestSubscriber.prototype._next=function(e){this.values.push(k),this.observables.push(e)},CombineLatestSubscriber.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var i=0;i<t;i++){var r=e[i];this.add(subscribeToResult(this,r,void 0,i))}}},CombineLatestSubscriber.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},CombineLatestSubscriber.prototype.notifyNext=function(e,t,i){var r=this.values,n=r[i],s=this.toRespond?n===k?--this.toRespond:this.toRespond:0;r[i]=t,0===s&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))},CombineLatestSubscriber.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},CombineLatestSubscriber}(L);function combineAll(e){return function(t){return t.lift(new j(e))}}function scheduleArray(e,t){return new b((function(i){var r=new c,n=0;return r.add(t.schedule((function(){n!==e.length?(i.next(e[n++]),i.closed||r.add(this.schedule())):i.complete()}))),r}))}function scheduled(e,t){if(null!=e){if(function isInteropObservable(e){return e&&"function"==typeof e[d]}(e))return function scheduleObservable(e,t){return new b((function(i){var r=new c;return r.add(t.schedule((function(){var n=e[d]();r.add(n.subscribe({next:function(e){r.add(t.schedule((function(){return i.next(e)})))},error:function(e){r.add(t.schedule((function(){return i.error(e)})))},complete:function(){r.add(t.schedule((function(){return i.complete()})))}}))}))),r}))}(e,t);if(isPromise(e))return function schedulePromise(e,t){return new b((function(i){var r=new c;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){i.next(e),r.add(t.schedule((function(){return i.complete()})))})))}),(function(e){r.add(t.schedule((function(){return i.error(e)})))}))}))),r}))}(e,t);if(isArrayLike(e))return scheduleArray(e,t);if(function isIterable(e){return e&&"function"==typeof e[f]}(e)||"string"==typeof e)return function scheduleIterable(e,t){if(!e)throw new Error("Iterable cannot be null");return new b((function(i){var r,n=new c;return n.add((function(){r&&"function"==typeof r.return&&r.return()})),n.add(t.schedule((function(){r=e[f](),n.add(t.schedule((function(){if(!i.closed){var e,t;try{var n=r.next();e=n.value,t=n.done}catch(e){return void i.error(e)}t?i.complete():(i.next(e),this.schedule())}})))}))),n}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function from_from(e,t){return t?scheduled(e,t):e instanceof b?e:new b(subscribeTo(e))}function combineLatest_combineLatest(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=null;return"function"==typeof e[e.length-1]&&(i=e.pop()),1===e.length&&u(e[0])&&(e=e[0].slice()),function(t){return t.lift.call(from_from([t].concat(e)),new j(i))}}function fromArray_fromArray(e,t){return t?scheduleArray(e,t):new b(subscribeToArray(e))}function of(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[e.length-1];return isScheduler_isScheduler(i)?(e.pop(),scheduleArray(e,i)):fromArray_fromArray(e)}function map(e,t){return function mapOperation(i){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new V(e,t))}}var V=function(){function MapOperator(e,t){this.project=e,this.thisArg=t}return MapOperator.prototype.call=function(e,t){return t.subscribe(new H(e,this.project,this.thisArg))},MapOperator}(),H=function(e){function MapSubscriber(t,i,r){var n=e.call(this,t)||this;return n.project=i,n.count=0,n.thisArg=r||n,n}return r.__extends(MapSubscriber,e),MapSubscriber.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},MapSubscriber}(h);function mergeMap(e,t,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(mergeMap((function(i,r){return from_from(e(i,r)).pipe(map((function(e,n){return t(i,e,r,n)})))}),i))}:("number"==typeof t&&(i=t),function(t){return t.lift(new Y(e,i))})}var Y=function(){function MergeMapOperator(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return MergeMapOperator.prototype.call=function(e,t){return t.subscribe(new z(e,this.project,this.concurrent))},MergeMapOperator}(),z=function(e){function MergeMapSubscriber(t,i,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var n=e.call(this,t)||this;return n.project=i,n.concurrent=r,n.hasCompleted=!1,n.buffer=[],n.active=0,n.index=0,n}return r.__extends(MergeMapSubscriber,e),MergeMapSubscriber.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},MergeMapSubscriber.prototype._tryNext=function(e){var t,i=this.index++;try{t=this.project(e,i)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t)},MergeMapSubscriber.prototype._innerSub=function(e){var t=new S(this),i=this.destination;i.add(t);var r=innerSubscribe(e,t);r!==t&&i.add(r)},MergeMapSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},MergeMapSubscriber.prototype.notifyNext=function(e){this.destination.next(e)},MergeMapSubscriber.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},MergeMapSubscriber}(_),q=mergeMap;function mergeAll(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),mergeMap(identity,e)}function concatAll(){return mergeAll(1)}function concat(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return concatAll()(of.apply(void 0,e))}function concat_concat(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(concat.apply(void 0,[t].concat(e)))}}function concatMap(e,t){return mergeMap(e,t,1)}function concatMapTo(e,t){return concatMap((function(){return e}),t)}function count(e){return function(t){return t.lift(new K(e,t))}}var K=function(){function CountOperator(e,t){this.predicate=e,this.source=t}return CountOperator.prototype.call=function(e,t){return t.subscribe(new Z(e,this.predicate,this.source))},CountOperator}(),Z=function(e){function CountSubscriber(t,i,r){var n=e.call(this,t)||this;return n.predicate=i,n.source=r,n.count=0,n.index=0,n}return r.__extends(CountSubscriber,e),CountSubscriber.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},CountSubscriber.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t&&this.count++},CountSubscriber.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},CountSubscriber}(h);function debounce(e){return function(t){return t.lift(new Q(e))}}var Q=function(){function DebounceOperator(e){this.durationSelector=e}return DebounceOperator.prototype.call=function(e,t){return t.subscribe(new X(e,this.durationSelector))},DebounceOperator}(),X=function(e){function DebounceSubscriber(t,i){var r=e.call(this,t)||this;return r.durationSelector=i,r.hasValue=!1,r}return r.__extends(DebounceSubscriber,e),DebounceSubscriber.prototype._next=function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(e){this.destination.error(e)}},DebounceSubscriber.prototype._complete=function(){this.emitValue(),this.destination.complete()},DebounceSubscriber.prototype._tryNext=function(e,t){var i=this.durationSubscription;this.value=e,this.hasValue=!0,i&&(i.unsubscribe(),this.remove(i)),(i=innerSubscribe(t,new S(this)))&&!i.closed&&this.add(this.durationSubscription=i)},DebounceSubscriber.prototype.notifyNext=function(){this.emitValue()},DebounceSubscriber.prototype.notifyComplete=function(){this.emitValue()},DebounceSubscriber.prototype.emitValue=function(){if(this.hasValue){var t=this.value,i=this.durationSubscription;i&&(this.durationSubscription=void 0,i.unsubscribe(),this.remove(i)),this.value=void 0,this.hasValue=!1,e.prototype._next.call(this,t)}},DebounceSubscriber}(_);function debounceTime(e,t){return void 0===t&&(t=I),function(i){return i.lift(new J(e,t))}}var J=function(){function DebounceTimeOperator(e,t){this.dueTime=e,this.scheduler=t}return DebounceTimeOperator.prototype.call=function(e,t){return t.subscribe(new $(e,this.dueTime,this.scheduler))},DebounceTimeOperator}(),$=function(e){function DebounceTimeSubscriber(t,i,r){var n=e.call(this,t)||this;return n.dueTime=i,n.scheduler=r,n.debouncedSubscription=null,n.lastValue=null,n.hasValue=!1,n}return r.__extends(DebounceTimeSubscriber,e),DebounceTimeSubscriber.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(dispatchNext,this.dueTime,this))},DebounceTimeSubscriber.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},DebounceTimeSubscriber.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},DebounceTimeSubscriber.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},DebounceTimeSubscriber}(h);function dispatchNext(e){e.debouncedNext()}function defaultIfEmpty(e){return void 0===e&&(e=null),function(t){return t.lift(new ee(e))}}var ee=function(){function DefaultIfEmptyOperator(e){this.defaultValue=e}return DefaultIfEmptyOperator.prototype.call=function(e,t){return t.subscribe(new te(e,this.defaultValue))},DefaultIfEmptyOperator}(),te=function(e){function DefaultIfEmptySubscriber(t,i){var r=e.call(this,t)||this;return r.defaultValue=i,r.isEmpty=!0,r}return r.__extends(DefaultIfEmptySubscriber,e),DefaultIfEmptySubscriber.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},DefaultIfEmptySubscriber.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},DefaultIfEmptySubscriber}(h);function isDate(e){return e instanceof Date&&!isNaN(+e)}var ie,re=new b((function(e){return e.complete()}));function empty_empty(e){return e?function emptyScheduled(e){return new b((function(t){return e.schedule((function(){return t.complete()}))}))}(e):re}function throwError(e,t){return new b(t?function(i){return t.schedule(throwError_dispatch,0,{error:e,subscriber:i})}:function(t){return t.error(e)})}function throwError_dispatch(e){var t=e.error;e.subscriber.error(t)}ie||(ie={});var ne=function(){function Notification(e,t,i){this.kind=e,this.value=t,this.error=i,this.hasValue="N"===e}return Notification.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},Notification.prototype.do=function(e,t,i){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return i&&i()}},Notification.prototype.accept=function(e,t,i){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,i)},Notification.prototype.toObservable=function(){switch(this.kind){case"N":return of(this.value);case"E":return throwError(this.error);case"C":return empty_empty()}throw new Error("unexpected notification kind value")},Notification.createNext=function(e){return void 0!==e?new Notification("N",e):Notification.undefinedValueNotification},Notification.createError=function(e){return new Notification("E",void 0,e)},Notification.createComplete=function(){return Notification.completeNotification},Notification.completeNotification=new Notification("C"),Notification.undefinedValueNotification=new Notification("N",void 0),Notification}();function delay(e,t){void 0===t&&(t=I);var i=isDate(e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new se(i,t))}}var se=function(){function DelayOperator(e,t){this.delay=e,this.scheduler=t}return DelayOperator.prototype.call=function(e,t){return t.subscribe(new oe(e,this.delay,this.scheduler))},DelayOperator}(),oe=function(e){function DelaySubscriber(t,i,r){var n=e.call(this,t)||this;return n.delay=i,n.scheduler=r,n.queue=[],n.active=!1,n.errored=!1,n}return r.__extends(DelaySubscriber,e),DelaySubscriber.dispatch=function(e){for(var t=e.source,i=t.queue,r=e.scheduler,n=e.destination;i.length>0&&i[0].time-r.now()<=0;)i.shift().notification.observe(n);if(i.length>0){var s=Math.max(0,i[0].time-r.now());this.schedule(e,s)}else this.unsubscribe(),t.active=!1},DelaySubscriber.prototype._schedule=function(e){this.active=!0,this.destination.add(e.schedule(DelaySubscriber.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},DelaySubscriber.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,i=new ue(t.now()+this.delay,e);this.queue.push(i),!1===this.active&&this._schedule(t)}},DelaySubscriber.prototype._next=function(e){this.scheduleNotification(ne.createNext(e))},DelaySubscriber.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},DelaySubscriber.prototype._complete=function(){this.scheduleNotification(ne.createComplete()),this.unsubscribe()},DelaySubscriber}(h),ue=function(){return function DelayMessage(e,t){this.time=e,this.notification=t}}();function delayWhen(e,t){return t?function(i){return new le(i,t).lift(new ae(e))}:function(t){return t.lift(new ae(e))}}var ae=function(){function DelayWhenOperator(e){this.delayDurationSelector=e}return DelayWhenOperator.prototype.call=function(e,t){return t.subscribe(new ce(e,this.delayDurationSelector))},DelayWhenOperator}(),ce=function(e){function DelayWhenSubscriber(t,i){var r=e.call(this,t)||this;return r.delayDurationSelector=i,r.completed=!1,r.delayNotifierSubscriptions=[],r.index=0,r}return r.__extends(DelayWhenSubscriber,e),DelayWhenSubscriber.prototype.notifyNext=function(e,t,i,r,n){this.destination.next(e),this.removeSubscription(n),this.tryComplete()},DelayWhenSubscriber.prototype.notifyError=function(e,t){this._error(e)},DelayWhenSubscriber.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},DelayWhenSubscriber.prototype._next=function(e){var t=this.index++;try{var i=this.delayDurationSelector(e,t);i&&this.tryDelay(i,e)}catch(e){this.destination.error(e)}},DelayWhenSubscriber.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},DelayWhenSubscriber.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e);return-1!==t&&this.delayNotifierSubscriptions.splice(t,1),e.outerValue},DelayWhenSubscriber.prototype.tryDelay=function(e,t){var i=subscribeToResult(this,e,t);i&&!i.closed&&(this.destination.add(i),this.delayNotifierSubscriptions.push(i))},DelayWhenSubscriber.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},DelayWhenSubscriber}(L),le=function(e){function SubscriptionDelayObservable(t,i){var r=e.call(this)||this;return r.source=t,r.subscriptionDelay=i,r}return r.__extends(SubscriptionDelayObservable,e),SubscriptionDelayObservable.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new he(e,this.source))},SubscriptionDelayObservable}(b),he=function(e){function SubscriptionDelaySubscriber(t,i){var r=e.call(this)||this;return r.parent=t,r.source=i,r.sourceSubscribed=!1,r}return r.__extends(SubscriptionDelaySubscriber,e),SubscriptionDelaySubscriber.prototype._next=function(e){this.subscribeToSource()},SubscriptionDelaySubscriber.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},SubscriptionDelaySubscriber.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},SubscriptionDelaySubscriber.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},SubscriptionDelaySubscriber}(h);function dematerialize(){return function dematerializeOperatorFunction(e){return e.lift(new pe)}}var pe=function(){function DeMaterializeOperator(){}return DeMaterializeOperator.prototype.call=function(e,t){return t.subscribe(new de(e))},DeMaterializeOperator}(),de=function(e){function DeMaterializeSubscriber(t){return e.call(this,t)||this}return r.__extends(DeMaterializeSubscriber,e),DeMaterializeSubscriber.prototype._next=function(e){e.observe(this.destination)},DeMaterializeSubscriber}(h);function distinct(e,t){return function(i){return i.lift(new be(e,t))}}var be=function(){function DistinctOperator(e,t){this.keySelector=e,this.flushes=t}return DistinctOperator.prototype.call=function(e,t){return t.subscribe(new fe(e,this.keySelector,this.flushes))},DistinctOperator}(),fe=function(e){function DistinctSubscriber(t,i,r){var n=e.call(this,t)||this;return n.keySelector=i,n.values=new Set,r&&n.add(innerSubscribe(r,new S(n))),n}return r.__extends(DistinctSubscriber,e),DistinctSubscriber.prototype.notifyNext=function(){this.values.clear()},DistinctSubscriber.prototype.notifyError=function(e){this._error(e)},DistinctSubscriber.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},DistinctSubscriber.prototype._useKeySelector=function(e){var t,i=this.destination;try{t=this.keySelector(e)}catch(e){return void i.error(e)}this._finalizeNext(t,e)},DistinctSubscriber.prototype._finalizeNext=function(e,t){var i=this.values;i.has(e)||(i.add(e),this.destination.next(t))},DistinctSubscriber}(_);function distinctUntilChanged(e,t){return function(i){return i.lift(new Se(e,t))}}var Se=function(){function DistinctUntilChangedOperator(e,t){this.compare=e,this.keySelector=t}return DistinctUntilChangedOperator.prototype.call=function(e,t){return t.subscribe(new _e(e,this.compare,this.keySelector))},DistinctUntilChangedOperator}(),_e=function(e){function DistinctUntilChangedSubscriber(t,i,r){var n=e.call(this,t)||this;return n.keySelector=r,n.hasKey=!1,"function"==typeof i&&(n.compare=i),n}return r.__extends(DistinctUntilChangedSubscriber,e),DistinctUntilChangedSubscriber.prototype.compare=function(e,t){return e===t},DistinctUntilChangedSubscriber.prototype._next=function(e){var t;try{var i=this.keySelector;t=i?i(e):e}catch(e){return this.destination.error(e)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(e){return this.destination.error(e)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))},DistinctUntilChangedSubscriber}(h);function distinctUntilKeyChanged(e,t){return distinctUntilChanged((function(i,r){return t?t(i[e],r[e]):i[e]===r[e]}))}var ge=function(){function ArgumentOutOfRangeErrorImpl(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return ArgumentOutOfRangeErrorImpl.prototype=Object.create(Error.prototype),ArgumentOutOfRangeErrorImpl}();function filter(e,t){return function filterOperatorFunction(i){return i.lift(new me(e,t))}}var me=function(){function FilterOperator(e,t){this.predicate=e,this.thisArg=t}return FilterOperator.prototype.call=function(e,t){return t.subscribe(new ye(e,this.predicate,this.thisArg))},FilterOperator}(),ye=function(e){function FilterSubscriber(t,i,r){var n=e.call(this,t)||this;return n.predicate=i,n.thisArg=r,n.count=0,n}return r.__extends(FilterSubscriber,e),FilterSubscriber.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},FilterSubscriber}(h),ve=function(){function EmptyErrorImpl(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return EmptyErrorImpl.prototype=Object.create(Error.prototype),EmptyErrorImpl}();function throwIfEmpty(e){return void 0===e&&(e=defaultErrorFactory),function(t){return t.lift(new we(e))}}var we=function(){function ThrowIfEmptyOperator(e){this.errorFactory=e}return ThrowIfEmptyOperator.prototype.call=function(e,t){return t.subscribe(new Ie(e,this.errorFactory))},ThrowIfEmptyOperator}(),Ie=function(e){function ThrowIfEmptySubscriber(t,i){var r=e.call(this,t)||this;return r.errorFactory=i,r.hasValue=!1,r}return r.__extends(ThrowIfEmptySubscriber,e),ThrowIfEmptySubscriber.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},ThrowIfEmptySubscriber.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)},ThrowIfEmptySubscriber}(h);function defaultErrorFactory(){return new ve}function take(e){return function(t){return 0===e?empty_empty():t.lift(new Ee(e))}}var Ee=function(){function TakeOperator(e){if(this.total=e,this.total<0)throw new ge}return TakeOperator.prototype.call=function(e,t){return t.subscribe(new Ae(e,this.total))},TakeOperator}(),Ae=function(e){function TakeSubscriber(t,i){var r=e.call(this,t)||this;return r.total=i,r.count=0,r}return r.__extends(TakeSubscriber,e),TakeSubscriber.prototype._next=function(e){var t=this.total,i=++this.count;i<=t&&(this.destination.next(e),i===t&&(this.destination.complete(),this.unsubscribe()))},TakeSubscriber}(h);function elementAt(e,t){if(e<0)throw new ge;var i=arguments.length>=2;return function(r){return r.pipe(filter((function(t,i){return i===e})),take(1),i?defaultIfEmpty(t):throwIfEmpty((function(){return new ge})))}}function endWith(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return concat(t,of.apply(void 0,e))}}function every(e,t){return function(i){return i.lift(new Ce(e,t,i))}}var Ce=function(){function EveryOperator(e,t,i){this.predicate=e,this.thisArg=t,this.source=i}return EveryOperator.prototype.call=function(e,t){return t.subscribe(new Oe(e,this.predicate,this.thisArg,this.source))},EveryOperator}(),Oe=function(e){function EverySubscriber(t,i,r,n){var s=e.call(this,t)||this;return s.predicate=i,s.thisArg=r,s.source=n,s.index=0,s.thisArg=r||s,s}return r.__extends(EverySubscriber,e),EverySubscriber.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},EverySubscriber.prototype._next=function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t||this.notifyComplete(!1)},EverySubscriber.prototype._complete=function(){this.notifyComplete(!0)},EverySubscriber}(h);function exhaust(){return function(e){return e.lift(new De)}}var De=function(){function SwitchFirstOperator(){}return SwitchFirstOperator.prototype.call=function(e,t){return t.subscribe(new Te(e))},SwitchFirstOperator}(),Te=function(e){function SwitchFirstSubscriber(t){var i=e.call(this,t)||this;return i.hasCompleted=!1,i.hasSubscription=!1,i}return r.__extends(SwitchFirstSubscriber,e),SwitchFirstSubscriber.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add(innerSubscribe(e,new S(this))))},SwitchFirstSubscriber.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},SwitchFirstSubscriber.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},SwitchFirstSubscriber}(_);function exhaustMap(e,t){return t?function(i){return i.pipe(exhaustMap((function(i,r){return from_from(e(i,r)).pipe(map((function(e,n){return t(i,e,r,n)})))})))}:function(t){return t.lift(new xe(e))}}var xe=function(){function ExhaustMapOperator(e){this.project=e}return ExhaustMapOperator.prototype.call=function(e,t){return t.subscribe(new Ne(e,this.project))},ExhaustMapOperator}(),Ne=function(e){function ExhaustMapSubscriber(t,i){var r=e.call(this,t)||this;return r.project=i,r.hasSubscription=!1,r.hasCompleted=!1,r.index=0,r}return r.__extends(ExhaustMapSubscriber,e),ExhaustMapSubscriber.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},ExhaustMapSubscriber.prototype.tryNext=function(e){var t,i=this.index++;try{t=this.project(e,i)}catch(e){return void this.destination.error(e)}this.hasSubscription=!0,this._innerSub(t)},ExhaustMapSubscriber.prototype._innerSub=function(e){var t=new S(this),i=this.destination;i.add(t);var r=innerSubscribe(e,t);r!==t&&i.add(r)},ExhaustMapSubscriber.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},ExhaustMapSubscriber.prototype.notifyNext=function(e){this.destination.next(e)},ExhaustMapSubscriber.prototype.notifyError=function(e){this.destination.error(e)},ExhaustMapSubscriber.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},ExhaustMapSubscriber}(_);function expand(e,t,i){return void 0===t&&(t=Number.POSITIVE_INFINITY),t=(t||0)<1?Number.POSITIVE_INFINITY:t,function(r){return r.lift(new Me(e,t,i))}}var Me=function(){function ExpandOperator(e,t,i){this.project=e,this.concurrent=t,this.scheduler=i}return ExpandOperator.prototype.call=function(e,t){return t.subscribe(new Le(e,this.project,this.concurrent,this.scheduler))},ExpandOperator}(),Le=function(e){function ExpandSubscriber(t,i,r,n){var s=e.call(this,t)||this;return s.project=i,s.concurrent=r,s.scheduler=n,s.index=0,s.active=0,s.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(s.buffer=[]),s}return r.__extends(ExpandSubscriber,e),ExpandSubscriber.dispatch=function(e){var t=e.subscriber,i=e.result,r=e.value,n=e.index;t.subscribeToProjection(i,r,n)},ExpandSubscriber.prototype._next=function(e){var t=this.destination;if(t.closed)this._complete();else{var i=this.index++;if(this.active<this.concurrent){t.next(e);try{var r=(0,this.project)(e,i);if(this.scheduler){var n={subscriber:this,result:r,value:e,index:i};this.destination.add(this.scheduler.schedule(ExpandSubscriber.dispatch,0,n))}else this.subscribeToProjection(r,e,i)}catch(e){t.error(e)}}else this.buffer.push(e)}},ExpandSubscriber.prototype.subscribeToProjection=function(e,t,i){this.active++,this.destination.add(innerSubscribe(e,new S(this)))},ExpandSubscriber.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()},ExpandSubscriber.prototype.notifyNext=function(e){this._next(e)},ExpandSubscriber.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},ExpandSubscriber}(_);function finalize(e){return function(t){return t.lift(new Re(e))}}var Re=function(){function FinallyOperator(e){this.callback=e}return FinallyOperator.prototype.call=function(e,t){return t.subscribe(new Pe(e,this.callback))},FinallyOperator}(),Pe=function(e){function FinallySubscriber(t,i){var r=e.call(this,t)||this;return r.add(new c(i)),r}return r.__extends(FinallySubscriber,e),FinallySubscriber}(h);function find(e,t){if("function"!=typeof e)throw new TypeError("predicate is not a function");return function(i){return i.lift(new Ue(e,i,!1,t))}}var Ue=function(){function FindValueOperator(e,t,i,r){this.predicate=e,this.source=t,this.yieldIndex=i,this.thisArg=r}return FindValueOperator.prototype.call=function(e,t){return t.subscribe(new Be(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},FindValueOperator}(),Be=function(e){function FindValueSubscriber(t,i,r,n,s){var o=e.call(this,t)||this;return o.predicate=i,o.source=r,o.yieldIndex=n,o.thisArg=s,o.index=0,o}return r.__extends(FindValueSubscriber,e),FindValueSubscriber.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete(),this.unsubscribe()},FindValueSubscriber.prototype._next=function(e){var t=this.predicate,i=this.thisArg,r=this.index++;try{t.call(i||this,e,r,this.source)&&this.notifyComplete(this.yieldIndex?r:e)}catch(e){this.destination.error(e)}},FindValueSubscriber.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},FindValueSubscriber}(h);function findIndex(e,t){return function(i){return i.lift(new Ue(e,i,!0,t))}}function first(e,t){var i=arguments.length>=2;return function(r){return r.pipe(e?filter((function(t,i){return e(t,i,r)})):identity,take(1),i?defaultIfEmpty(t):throwIfEmpty((function(){return new ve})))}}var We=function(){function ObjectUnsubscribedErrorImpl(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return ObjectUnsubscribedErrorImpl.prototype=Object.create(Error.prototype),ObjectUnsubscribedErrorImpl}(),Fe=function(e){function SubjectSubscription(t,i){var r=e.call(this)||this;return r.subject=t,r.subscriber=i,r.closed=!1,r}return r.__extends(SubjectSubscription,e),SubjectSubscription.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}},SubjectSubscription}(c),ke=function(e){function SubjectSubscriber(t){var i=e.call(this,t)||this;return i.destination=t,i}return r.__extends(SubjectSubscriber,e),SubjectSubscriber}(h),je=function(e){function Subject(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r.__extends(Subject,e),Subject.prototype[l]=function(){return new ke(this)},Subject.prototype.lift=function(e){var t=new Ge(this,this);return t.operator=e,t},Subject.prototype.next=function(e){if(this.closed)throw new We;if(!this.isStopped)for(var t=this.observers,i=t.length,r=t.slice(),n=0;n<i;n++)r[n].next(e)},Subject.prototype.error=function(e){if(this.closed)throw new We;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,i=t.length,r=t.slice(),n=0;n<i;n++)r[n].error(e);this.observers.length=0},Subject.prototype.complete=function(){if(this.closed)throw new We;this.isStopped=!0;for(var e=this.observers,t=e.length,i=e.slice(),r=0;r<t;r++)i[r].complete();this.observers.length=0},Subject.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},Subject.prototype._trySubscribe=function(t){if(this.closed)throw new We;return e.prototype._trySubscribe.call(this,t)},Subject.prototype._subscribe=function(e){if(this.closed)throw new We;return this.hasError?(e.error(this.thrownError),c.EMPTY):this.isStopped?(e.complete(),c.EMPTY):(this.observers.push(e),new Fe(this,e))},Subject.prototype.asObservable=function(){var e=new b;return e.source=this,e},Subject.create=function(e,t){return new Ge(e,t)},Subject}(b),Ge=function(e){function AnonymousSubject(t,i){var r=e.call(this)||this;return r.destination=t,r.source=i,r}return r.__extends(AnonymousSubject,e),AnonymousSubject.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},AnonymousSubject.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},AnonymousSubject.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},AnonymousSubject.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):c.EMPTY},AnonymousSubject}(je);function groupBy(e,t,i,r){return function(n){return n.lift(new Ve(e,t,i,r))}}var Ve=function(){function GroupByOperator(e,t,i,r){this.keySelector=e,this.elementSelector=t,this.durationSelector=i,this.subjectSelector=r}return GroupByOperator.prototype.call=function(e,t){return t.subscribe(new He(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},GroupByOperator}(),He=function(e){function GroupBySubscriber(t,i,r,n,s){var o=e.call(this,t)||this;return o.keySelector=i,o.elementSelector=r,o.durationSelector=n,o.subjectSelector=s,o.groups=null,o.attemptedToUnsubscribe=!1,o.count=0,o}return r.__extends(GroupBySubscriber,e),GroupBySubscriber.prototype._next=function(e){var t;try{t=this.keySelector(e)}catch(e){return void this.error(e)}this._group(e,t)},GroupBySubscriber.prototype._group=function(e,t){var i=this.groups;i||(i=this.groups=new Map);var r,n=i.get(t);if(this.elementSelector)try{r=this.elementSelector(e)}catch(e){this.error(e)}else r=e;if(!n){n=this.subjectSelector?this.subjectSelector():new je,i.set(t,n);var s=new ze(t,n,this);if(this.destination.next(s),this.durationSelector){var o=void 0;try{o=this.durationSelector(new ze(t,n))}catch(e){return void this.error(e)}this.add(o.subscribe(new Ye(t,n,this)))}}n.closed||n.next(r)},GroupBySubscriber.prototype._error=function(e){var t=this.groups;t&&(t.forEach((function(t,i){t.error(e)})),t.clear()),this.destination.error(e)},GroupBySubscriber.prototype._complete=function(){var e=this.groups;e&&(e.forEach((function(e,t){e.complete()})),e.clear()),this.destination.complete()},GroupBySubscriber.prototype.removeGroup=function(e){this.groups.delete(e)},GroupBySubscriber.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},GroupBySubscriber}(h),Ye=function(e){function GroupDurationSubscriber(t,i,r){var n=e.call(this,i)||this;return n.key=t,n.group=i,n.parent=r,n}return r.__extends(GroupDurationSubscriber,e),GroupDurationSubscriber.prototype._next=function(e){this.complete()},GroupDurationSubscriber.prototype._unsubscribe=function(){var e=this.parent,t=this.key;this.key=this.parent=null,e&&e.removeGroup(t)},GroupDurationSubscriber}(h),ze=function(e){function GroupedObservable(t,i,r){var n=e.call(this)||this;return n.key=t,n.groupSubject=i,n.refCountSubscription=r,n}return r.__extends(GroupedObservable,e),GroupedObservable.prototype._subscribe=function(e){var t=new c,i=this.refCountSubscription,r=this.groupSubject;return i&&!i.closed&&t.add(new qe(i)),t.add(r.subscribe(e)),t},GroupedObservable}(b),qe=function(e){function InnerRefCountSubscription(t){var i=e.call(this)||this;return i.parent=t,t.count++,i}return r.__extends(InnerRefCountSubscription,e),InnerRefCountSubscription.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},InnerRefCountSubscription}(c);function ignoreElements(){return function ignoreElementsOperatorFunction(e){return e.lift(new Ke)}}var Ke=function(){function IgnoreElementsOperator(){}return IgnoreElementsOperator.prototype.call=function(e,t){return t.subscribe(new Ze(e))},IgnoreElementsOperator}(),Ze=function(e){function IgnoreElementsSubscriber(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(IgnoreElementsSubscriber,e),IgnoreElementsSubscriber.prototype._next=function(e){},IgnoreElementsSubscriber}(h);function isEmpty(){return function(e){return e.lift(new Qe)}}var Qe=function(){function IsEmptyOperator(){}return IsEmptyOperator.prototype.call=function(e,t){return t.subscribe(new Xe(e))},IsEmptyOperator}(),Xe=function(e){function IsEmptySubscriber(t){return e.call(this,t)||this}return r.__extends(IsEmptySubscriber,e),IsEmptySubscriber.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},IsEmptySubscriber.prototype._next=function(e){this.notifyComplete(!1)},IsEmptySubscriber.prototype._complete=function(){this.notifyComplete(!0)},IsEmptySubscriber}(h);function takeLast(e){return function takeLastOperatorFunction(t){return 0===e?empty_empty():t.lift(new Je(e))}}var Je=function(){function TakeLastOperator(e){if(this.total=e,this.total<0)throw new ge}return TakeLastOperator.prototype.call=function(e,t){return t.subscribe(new $e(e,this.total))},TakeLastOperator}(),$e=function(e){function TakeLastSubscriber(t,i){var r=e.call(this,t)||this;return r.total=i,r.ring=new Array,r.count=0,r}return r.__extends(TakeLastSubscriber,e),TakeLastSubscriber.prototype._next=function(e){var t=this.ring,i=this.total,r=this.count++;t.length<i?t.push(e):t[r%i]=e},TakeLastSubscriber.prototype._complete=function(){var e=this.destination,t=this.count;if(t>0)for(var i=this.count>=this.total?this.total:this.count,r=this.ring,n=0;n<i;n++){var s=t++%i;e.next(r[s])}e.complete()},TakeLastSubscriber}(h);function last(e,t){var i=arguments.length>=2;return function(r){return r.pipe(e?filter((function(t,i){return e(t,i,r)})):identity,takeLast(1),i?defaultIfEmpty(t):throwIfEmpty((function(){return new ve})))}}function mapTo(e){return function(t){return t.lift(new et(e))}}var et=function(){function MapToOperator(e){this.value=e}return MapToOperator.prototype.call=function(e,t){return t.subscribe(new tt(e,this.value))},MapToOperator}(),tt=function(e){function MapToSubscriber(t,i){var r=e.call(this,t)||this;return r.value=i,r}return r.__extends(MapToSubscriber,e),MapToSubscriber.prototype._next=function(e){this.destination.next(this.value)},MapToSubscriber}(h);function materialize(){return function materializeOperatorFunction(e){return e.lift(new it)}}var it=function(){function MaterializeOperator(){}return MaterializeOperator.prototype.call=function(e,t){return t.subscribe(new rt(e))},MaterializeOperator}(),rt=function(e){function MaterializeSubscriber(t){return e.call(this,t)||this}return r.__extends(MaterializeSubscriber,e),MaterializeSubscriber.prototype._next=function(e){this.destination.next(ne.createNext(e))},MaterializeSubscriber.prototype._error=function(e){var t=this.destination;t.next(ne.createError(e)),t.complete()},MaterializeSubscriber.prototype._complete=function(){var e=this.destination;e.next(ne.createComplete()),e.complete()},MaterializeSubscriber}(h);function scan(e,t){var i=!1;return arguments.length>=2&&(i=!0),function scanOperatorFunction(r){return r.lift(new nt(e,t,i))}}var nt=function(){function ScanOperator(e,t,i){void 0===i&&(i=!1),this.accumulator=e,this.seed=t,this.hasSeed=i}return ScanOperator.prototype.call=function(e,t){return t.subscribe(new st(e,this.accumulator,this.seed,this.hasSeed))},ScanOperator}(),st=function(e){function ScanSubscriber(t,i,r,n){var s=e.call(this,t)||this;return s.accumulator=i,s._seed=r,s.hasSeed=n,s.index=0,s}return r.__extends(ScanSubscriber,e),Object.defineProperty(ScanSubscriber.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),ScanSubscriber.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},ScanSubscriber.prototype._tryNext=function(e){var t,i=this.index++;try{t=this.accumulator(this.seed,e,i)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},ScanSubscriber}(h);function reduce(e,t){return arguments.length>=2?function reduceOperatorFunctionWithSeed(i){return pipe(scan(e,t),takeLast(1),defaultIfEmpty(t))(i)}:function reduceOperatorFunction(t){return pipe(scan((function(t,i,r){return e(t,i,r+1)})),takeLast(1))(t)}}function max(e){return reduce("function"==typeof e?function(t,i){return e(t,i)>0?t:i}:function(e,t){return e>t?e:t})}function merge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Number.POSITIVE_INFINITY,r=null,n=e[e.length-1];return isScheduler_isScheduler(n)?(r=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(i=e.pop())):"number"==typeof n&&(i=e.pop()),null===r&&1===e.length&&e[0]instanceof b?e[0]:mergeAll(i)(fromArray_fromArray(e,r))}function merge_merge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(merge.apply(void 0,[t].concat(e)))}}function mergeMapTo(e,t,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),"function"==typeof t?mergeMap((function(){return e}),t,i):("number"==typeof t&&(i=t),mergeMap((function(){return e}),i))}function mergeScan(e,t,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),function(r){return r.lift(new ot(e,t,i))}}var ot=function(){function MergeScanOperator(e,t,i){this.accumulator=e,this.seed=t,this.concurrent=i}return MergeScanOperator.prototype.call=function(e,t){return t.subscribe(new ut(e,this.accumulator,this.seed,this.concurrent))},MergeScanOperator}(),ut=function(e){function MergeScanSubscriber(t,i,r,n){var s=e.call(this,t)||this;return s.accumulator=i,s.acc=r,s.concurrent=n,s.hasValue=!1,s.hasCompleted=!1,s.buffer=[],s.active=0,s.index=0,s}return r.__extends(MergeScanSubscriber,e),MergeScanSubscriber.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++,i=this.destination,r=void 0;try{r=(0,this.accumulator)(this.acc,e,t)}catch(e){return i.error(e)}this.active++,this._innerSub(r)}else this.buffer.push(e)},MergeScanSubscriber.prototype._innerSub=function(e){var t=new S(this),i=this.destination;i.add(t);var r=innerSubscribe(e,t);r!==t&&i.add(r)},MergeScanSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},MergeScanSubscriber.prototype.notifyNext=function(e){var t=this.destination;this.acc=e,this.hasValue=!0,t.next(e)},MergeScanSubscriber.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},MergeScanSubscriber}(_);function min(e){return reduce("function"==typeof e?function(t,i){return e(t,i)<0?t:i}:function(e,t){return e<t?e:t})}function refCount(){return function refCountOperatorFunction(e){return e.lift(new at(e))}}var at=function(){function RefCountOperator(e){this.connectable=e}return RefCountOperator.prototype.call=function(e,t){var i=this.connectable;i._refCount++;var r=new ct(e,i),n=t.subscribe(r);return r.closed||(r.connection=i.connect()),n},RefCountOperator}(),ct=function(e){function RefCountSubscriber(t,i){var r=e.call(this,t)||this;return r.connectable=i,r}return r.__extends(RefCountSubscriber,e),RefCountSubscriber.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var i=this.connection,r=e._connection;this.connection=null,!r||i&&r!==i||r.unsubscribe()}}else this.connection=null},RefCountSubscriber}(h),lt=function(e){function ConnectableObservable(t,i){var r=e.call(this)||this;return r.source=t,r.subjectFactory=i,r._refCount=0,r._isComplete=!1,r}return r.__extends(ConnectableObservable,e),ConnectableObservable.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},ConnectableObservable.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},ConnectableObservable.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new c).add(this.source.subscribe(new pt(this.getSubject(),this))),e.closed&&(this._connection=null,e=c.EMPTY)),e},ConnectableObservable.prototype.refCount=function(){return refCount()(this)},ConnectableObservable}(b),ht=function(){var e=lt.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),pt=function(e){function ConnectableSubscriber(t,i){var r=e.call(this,t)||this;return r.connectable=i,r}return r.__extends(ConnectableSubscriber,e),ConnectableSubscriber.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},ConnectableSubscriber.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},ConnectableSubscriber.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},ConnectableSubscriber}(ke);function multicast(e,t){return function multicastOperatorFunction(i){var r;if(r="function"==typeof e?e:function subjectFactory(){return e},"function"==typeof t)return i.lift(new dt(r,t));var n=Object.create(i,ht);return n.source=i,n.subjectFactory=r,n}}var dt=function(){function MulticastOperator(e,t){this.subjectFactory=e,this.selector=t}return MulticastOperator.prototype.call=function(e,t){var i=this.selector,r=this.subjectFactory(),n=i(r).subscribe(e);return n.add(t.subscribe(r)),n},MulticastOperator}();function observeOn(e,t){return void 0===t&&(t=0),function observeOnOperatorFunction(i){return i.lift(new bt(e,t))}}var bt=function(){function ObserveOnOperator(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return ObserveOnOperator.prototype.call=function(e,t){return t.subscribe(new ft(e,this.scheduler,this.delay))},ObserveOnOperator}(),ft=function(e){function ObserveOnSubscriber(t,i,r){void 0===r&&(r=0);var n=e.call(this,t)||this;return n.scheduler=i,n.delay=r,n}return r.__extends(ObserveOnSubscriber,e),ObserveOnSubscriber.dispatch=function(e){var t=e.notification,i=e.destination;t.observe(i),this.unsubscribe()},ObserveOnSubscriber.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch,this.delay,new St(e,this.destination)))},ObserveOnSubscriber.prototype._next=function(e){this.scheduleMessage(ne.createNext(e))},ObserveOnSubscriber.prototype._error=function(e){this.scheduleMessage(ne.createError(e)),this.unsubscribe()},ObserveOnSubscriber.prototype._complete=function(){this.scheduleMessage(ne.createComplete()),this.unsubscribe()},ObserveOnSubscriber}(h),St=function(){return function ObserveOnMessage(e,t){this.notification=e,this.destination=t}}();function onErrorResumeNext(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length&&u(e[0])&&(e=e[0]),function(t){return t.lift(new _t(e))}}var _t=function(){function OnErrorResumeNextOperator(e){this.nextSources=e}return OnErrorResumeNextOperator.prototype.call=function(e,t){return t.subscribe(new gt(e,this.nextSources))},OnErrorResumeNextOperator}(),gt=function(e){function OnErrorResumeNextSubscriber(t,i){var r=e.call(this,t)||this;return r.destination=t,r.nextSources=i,r}return r.__extends(OnErrorResumeNextSubscriber,e),OnErrorResumeNextSubscriber.prototype.notifyError=function(){this.subscribeToNextSource()},OnErrorResumeNextSubscriber.prototype.notifyComplete=function(){this.subscribeToNextSource()},OnErrorResumeNextSubscriber.prototype._error=function(e){this.subscribeToNextSource(),this.unsubscribe()},OnErrorResumeNextSubscriber.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},OnErrorResumeNextSubscriber.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();if(e){var t=new S(this),i=this.destination;i.add(t);var r=innerSubscribe(e,t);r!==t&&i.add(r)}else this.destination.complete()},OnErrorResumeNextSubscriber}(_);function pairwise(){return function(e){return e.lift(new mt)}}var mt=function(){function PairwiseOperator(){}return PairwiseOperator.prototype.call=function(e,t){return t.subscribe(new yt(e))},PairwiseOperator}(),yt=function(e){function PairwiseSubscriber(t){var i=e.call(this,t)||this;return i.hasPrev=!1,i}return r.__extends(PairwiseSubscriber,e),PairwiseSubscriber.prototype._next=function(e){var t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)},PairwiseSubscriber}(h);function not(e,t){function notPred(){return!notPred.pred.apply(notPred.thisArg,arguments)}return notPred.pred=e,notPred.thisArg=t,notPred}function partition(e,t){return function(i){return[filter(e,t)(i),filter(not(e,t))(i)]}}function pluck(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e.length;if(0===i)throw new Error("list of properties cannot be empty.");return function(t){return map(plucker(e,i))(t)}}function plucker(e,t){return function(i){for(var r=i,n=0;n<t;n++){var s=null!=r?r[e[n]]:void 0;if(void 0===s)return;r=s}return r}}function publish(e){return e?multicast((function(){return new je}),e):multicast(new je)}var vt=function(e){function BehaviorSubject(t){var i=e.call(this)||this;return i._value=t,i}return r.__extends(BehaviorSubject,e),Object.defineProperty(BehaviorSubject.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),BehaviorSubject.prototype._subscribe=function(t){var i=e.prototype._subscribe.call(this,t);return i&&!i.closed&&t.next(this._value),i},BehaviorSubject.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new We;return this._value},BehaviorSubject.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},BehaviorSubject}(je);function publishBehavior(e){return function(t){return multicast(new vt(e))(t)}}var wt=function(e){function AsyncSubject(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return r.__extends(AsyncSubject,e),AsyncSubject.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),c.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),c.EMPTY):e.prototype._subscribe.call(this,t)},AsyncSubject.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},AsyncSubject.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},AsyncSubject.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},AsyncSubject}(je);function publishLast(){return function(e){return multicast(new wt)(e)}}var It=function(e){function QueueAction(t,i){var r=e.call(this,t,i)||this;return r.scheduler=t,r.work=i,r}return r.__extends(QueueAction,e),QueueAction.prototype.schedule=function(t,i){return void 0===i&&(i=0),i>0?e.prototype.schedule.call(this,t,i):(this.delay=i,this.state=t,this.scheduler.flush(this),this)},QueueAction.prototype.execute=function(t,i){return i>0||this.closed?e.prototype.execute.call(this,t,i):this._execute(t,i)},QueueAction.prototype.requestAsyncId=function(t,i,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,i,r):t.flush(this)},QueueAction}(y),Et=new(function(e){function QueueScheduler(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(QueueScheduler,e),QueueScheduler}(w))(It),At=function(e){function ReplaySubject(t,i,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===i&&(i=Number.POSITIVE_INFINITY);var n=e.call(this)||this;return n.scheduler=r,n._events=[],n._infiniteTimeWindow=!1,n._bufferSize=t<1?1:t,n._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(n._infiniteTimeWindow=!0,n.next=n.nextInfiniteTimeWindow):n.next=n.nextTimeWindow,n}return r.__extends(ReplaySubject,e),ReplaySubject.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var i=this._events;i.push(t),i.length>this._bufferSize&&i.shift()}e.prototype.next.call(this,t)},ReplaySubject.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new Ct(this._getNow(),t)),this._trimBufferThenGetEvents()),e.prototype.next.call(this,t)},ReplaySubject.prototype._subscribe=function(e){var t,i=this._infiniteTimeWindow,r=i?this._events:this._trimBufferThenGetEvents(),n=this.scheduler,s=r.length;if(this.closed)throw new We;if(this.isStopped||this.hasError?t=c.EMPTY:(this.observers.push(e),t=new Fe(this,e)),n&&e.add(e=new ft(e,n)),i)for(var o=0;o<s&&!e.closed;o++)e.next(r[o]);else for(o=0;o<s&&!e.closed;o++)e.next(r[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},ReplaySubject.prototype._getNow=function(){return(this.scheduler||Et).now()},ReplaySubject.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,i=this._windowTime,r=this._events,n=r.length,s=0;s<n&&!(e-r[s].time<i);)s++;return n>t&&(s=Math.max(s,n-t)),s>0&&r.splice(0,s),r},ReplaySubject}(je),Ct=function(){return function ReplayEvent(e,t){this.time=e,this.value=t}}();function publishReplay(e,t,i,r){i&&"function"!=typeof i&&(r=i);var n="function"==typeof i?i:void 0,s=new At(e,t,r);return function(e){return multicast((function(){return s}),n)(e)}}function race(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!u(e[0]))return e[0];e=e[0]}return fromArray_fromArray(e,void 0).lift(new Ot)}var Ot=function(){function RaceOperator(){}return RaceOperator.prototype.call=function(e,t){return t.subscribe(new Dt(e))},RaceOperator}(),Dt=function(e){function RaceSubscriber(t){var i=e.call(this,t)||this;return i.hasFirst=!1,i.observables=[],i.subscriptions=[],i}return r.__extends(RaceSubscriber,e),RaceSubscriber.prototype._next=function(e){this.observables.push(e)},RaceSubscriber.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var i=0;i<t&&!this.hasFirst;i++){var r=subscribeToResult(this,e[i],void 0,i);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}},RaceSubscriber.prototype.notifyNext=function(e,t,i){if(!this.hasFirst){this.hasFirst=!0;for(var r=0;r<this.subscriptions.length;r++)if(r!==i){var n=this.subscriptions[r];n.unsubscribe(),this.remove(n)}this.subscriptions=null}this.destination.next(t)},RaceSubscriber}(L);function race_race(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function raceOperatorFunction(t){return 1===e.length&&u(e[0])&&(e=e[0]),t.lift.call(race.apply(void 0,[t].concat(e)))}}function repeat(e){return void 0===e&&(e=-1),function(t){return 0===e?empty_empty():e<0?t.lift(new Tt(-1,t)):t.lift(new Tt(e-1,t))}}var Tt=function(){function RepeatOperator(e,t){this.count=e,this.source=t}return RepeatOperator.prototype.call=function(e,t){return t.subscribe(new xt(e,this.count,this.source))},RepeatOperator}(),xt=function(e){function RepeatSubscriber(t,i,r){var n=e.call(this,t)||this;return n.count=i,n.source=r,n}return r.__extends(RepeatSubscriber,e),RepeatSubscriber.prototype.complete=function(){if(!this.isStopped){var t=this.source,i=this.count;if(0===i)return e.prototype.complete.call(this);i>-1&&(this.count=i-1),t.subscribe(this._unsubscribeAndRecycle())}},RepeatSubscriber}(h);function repeatWhen(e){return function(t){return t.lift(new Nt(e))}}var Nt=function(){function RepeatWhenOperator(e){this.notifier=e}return RepeatWhenOperator.prototype.call=function(e,t){return t.subscribe(new Mt(e,this.notifier,t))},RepeatWhenOperator}(),Mt=function(e){function RepeatWhenSubscriber(t,i,r){var n=e.call(this,t)||this;return n.notifier=i,n.source=r,n.sourceIsBeingSubscribedTo=!0,n}return r.__extends(RepeatWhenSubscriber,e),RepeatWhenSubscriber.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},RepeatWhenSubscriber.prototype.notifyComplete=function(){if(!1===this.sourceIsBeingSubscribedTo)return e.prototype.complete.call(this)},RepeatWhenSubscriber.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return e.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},RepeatWhenSubscriber.prototype._unsubscribe=function(){var e=this.notifications,t=this.retriesSubscription;e&&(e.unsubscribe(),this.notifications=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},RepeatWhenSubscriber.prototype._unsubscribeAndRecycle=function(){var t=this._unsubscribe;return this._unsubscribe=null,e.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=t,this},RepeatWhenSubscriber.prototype.subscribeToRetries=function(){var t;this.notifications=new je;try{t=(0,this.notifier)(this.notifications)}catch(t){return e.prototype.complete.call(this)}this.retries=t,this.retriesSubscription=innerSubscribe(t,new S(this))},RepeatWhenSubscriber}(_);function retry(e){return void 0===e&&(e=-1),function(t){return t.lift(new Lt(e,t))}}var Lt=function(){function RetryOperator(e,t){this.count=e,this.source=t}return RetryOperator.prototype.call=function(e,t){return t.subscribe(new Rt(e,this.count,this.source))},RetryOperator}(),Rt=function(e){function RetrySubscriber(t,i,r){var n=e.call(this,t)||this;return n.count=i,n.source=r,n}return r.__extends(RetrySubscriber,e),RetrySubscriber.prototype.error=function(t){if(!this.isStopped){var i=this.source,r=this.count;if(0===r)return e.prototype.error.call(this,t);r>-1&&(this.count=r-1),i.subscribe(this._unsubscribeAndRecycle())}},RetrySubscriber}(h);function retryWhen(e){return function(t){return t.lift(new Pt(e,t))}}var Pt=function(){function RetryWhenOperator(e,t){this.notifier=e,this.source=t}return RetryWhenOperator.prototype.call=function(e,t){return t.subscribe(new Ut(e,this.notifier,this.source))},RetryWhenOperator}(),Ut=function(e){function RetryWhenSubscriber(t,i,r){var n=e.call(this,t)||this;return n.notifier=i,n.source=r,n}return r.__extends(RetryWhenSubscriber,e),RetryWhenSubscriber.prototype.error=function(t){if(!this.isStopped){var i=this.errors,r=this.retries,n=this.retriesSubscription;if(r)this.errors=void 0,this.retriesSubscription=void 0;else{i=new je;try{r=(0,this.notifier)(i)}catch(t){return e.prototype.error.call(this,t)}n=innerSubscribe(r,new S(this))}this._unsubscribeAndRecycle(),this.errors=i,this.retries=r,this.retriesSubscription=n,i.next(t)}},RetryWhenSubscriber.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},RetryWhenSubscriber.prototype.notifyNext=function(){var e=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)},RetryWhenSubscriber}(_);function sample(e){return function(t){return t.lift(new Bt(e))}}var Bt=function(){function SampleOperator(e){this.notifier=e}return SampleOperator.prototype.call=function(e,t){var i=new Wt(e),r=t.subscribe(i);return r.add(innerSubscribe(this.notifier,new S(i))),r},SampleOperator}(),Wt=function(e){function SampleSubscriber(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasValue=!1,t}return r.__extends(SampleSubscriber,e),SampleSubscriber.prototype._next=function(e){this.value=e,this.hasValue=!0},SampleSubscriber.prototype.notifyNext=function(){this.emitValue()},SampleSubscriber.prototype.notifyComplete=function(){this.emitValue()},SampleSubscriber.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},SampleSubscriber}(_);function sampleTime(e,t){return void 0===t&&(t=I),function(i){return i.lift(new Ft(e,t))}}var Ft=function(){function SampleTimeOperator(e,t){this.period=e,this.scheduler=t}return SampleTimeOperator.prototype.call=function(e,t){return t.subscribe(new kt(e,this.period,this.scheduler))},SampleTimeOperator}(),kt=function(e){function SampleTimeSubscriber(t,i,r){var n=e.call(this,t)||this;return n.period=i,n.scheduler=r,n.hasValue=!1,n.add(r.schedule(dispatchNotification,i,{subscriber:n,period:i})),n}return r.__extends(SampleTimeSubscriber,e),SampleTimeSubscriber.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},SampleTimeSubscriber.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},SampleTimeSubscriber}(h);function dispatchNotification(e){var t=e.subscriber,i=e.period;t.notifyNext(),this.schedule(e,i)}function sequenceEqual(e,t){return function(i){return i.lift(new jt(e,t))}}var jt=function(){function SequenceEqualOperator(e,t){this.compareTo=e,this.comparator=t}return SequenceEqualOperator.prototype.call=function(e,t){return t.subscribe(new Gt(e,this.compareTo,this.comparator))},SequenceEqualOperator}(),Gt=function(e){function SequenceEqualSubscriber(t,i,r){var n=e.call(this,t)||this;return n.compareTo=i,n.comparator=r,n._a=[],n._b=[],n._oneComplete=!1,n.destination.add(i.subscribe(new Vt(t,n))),n}return r.__extends(SequenceEqualSubscriber,e),SequenceEqualSubscriber.prototype._next=function(e){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(e),this.checkValues())},SequenceEqualSubscriber.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()},SequenceEqualSubscriber.prototype.checkValues=function(){for(var e=this,t=e._a,i=e._b,r=e.comparator;t.length>0&&i.length>0;){var n=t.shift(),s=i.shift(),o=!1;try{o=r?r(n,s):n===s}catch(e){this.destination.error(e)}o||this.emit(!1)}},SequenceEqualSubscriber.prototype.emit=function(e){var t=this.destination;t.next(e),t.complete()},SequenceEqualSubscriber.prototype.nextB=function(e){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(e),this.checkValues())},SequenceEqualSubscriber.prototype.completeB=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},SequenceEqualSubscriber}(h),Vt=function(e){function SequenceEqualCompareToSubscriber(t,i){var r=e.call(this,t)||this;return r.parent=i,r}return r.__extends(SequenceEqualCompareToSubscriber,e),SequenceEqualCompareToSubscriber.prototype._next=function(e){this.parent.nextB(e)},SequenceEqualCompareToSubscriber.prototype._error=function(e){this.parent.error(e),this.unsubscribe()},SequenceEqualCompareToSubscriber.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},SequenceEqualCompareToSubscriber}(h);function shareSubjectFactory(){return new je}function share(){return function(e){return refCount()(multicast(shareSubjectFactory)(e))}}function shareReplay(e,t,i){var r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:i},function(e){return e.lift(function shareReplayOperator(e){var t,i,r=e.bufferSize,n=void 0===r?Number.POSITIVE_INFINITY:r,s=e.windowTime,o=void 0===s?Number.POSITIVE_INFINITY:s,u=e.refCount,a=e.scheduler,c=0,l=!1,h=!1;return function shareReplayOperation(e){var r;c++,!t||l?(l=!1,t=new At(n,o,a),r=t.subscribe(this),i=e.subscribe({next:function(e){t.next(e)},error:function(e){l=!0,t.error(e)},complete:function(){h=!0,i=void 0,t.complete()}}),h&&(i=void 0)):r=t.subscribe(this),this.add((function(){c--,r.unsubscribe(),r=void 0,i&&!h&&u&&0===c&&(i.unsubscribe(),i=void 0,t=void 0)}))}}(r))}}function single(e){return function(t){return t.lift(new Ht(e,t))}}var Ht=function(){function SingleOperator(e,t){this.predicate=e,this.source=t}return SingleOperator.prototype.call=function(e,t){return t.subscribe(new Yt(e,this.predicate,this.source))},SingleOperator}(),Yt=function(e){function SingleSubscriber(t,i,r){var n=e.call(this,t)||this;return n.predicate=i,n.source=r,n.seenValue=!1,n.index=0,n}return r.__extends(SingleSubscriber,e),SingleSubscriber.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},SingleSubscriber.prototype._next=function(e){var t=this.index++;this.predicate?this.tryNext(e,t):this.applySingleValue(e)},SingleSubscriber.prototype.tryNext=function(e,t){try{this.predicate(e,t,this.source)&&this.applySingleValue(e)}catch(e){this.destination.error(e)}},SingleSubscriber.prototype._complete=function(){var e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new ve)},SingleSubscriber}(h);function skip(e){return function(t){return t.lift(new zt(e))}}var zt=function(){function SkipOperator(e){this.total=e}return SkipOperator.prototype.call=function(e,t){return t.subscribe(new qt(e,this.total))},SkipOperator}(),qt=function(e){function SkipSubscriber(t,i){var r=e.call(this,t)||this;return r.total=i,r.count=0,r}return r.__extends(SkipSubscriber,e),SkipSubscriber.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},SkipSubscriber}(h);function skipLast(e){return function(t){return t.lift(new Kt(e))}}var Kt=function(){function SkipLastOperator(e){if(this._skipCount=e,this._skipCount<0)throw new ge}return SkipLastOperator.prototype.call=function(e,t){return 0===this._skipCount?t.subscribe(new h(e)):t.subscribe(new Zt(e,this._skipCount))},SkipLastOperator}(),Zt=function(e){function SkipLastSubscriber(t,i){var r=e.call(this,t)||this;return r._skipCount=i,r._count=0,r._ring=new Array(i),r}return r.__extends(SkipLastSubscriber,e),SkipLastSubscriber.prototype._next=function(e){var t=this._skipCount,i=this._count++;if(i<t)this._ring[i]=e;else{var r=i%t,n=this._ring,s=n[r];n[r]=e,this.destination.next(s)}},SkipLastSubscriber}(h);function skipUntil(e){return function(t){return t.lift(new Qt(e))}}var Qt=function(){function SkipUntilOperator(e){this.notifier=e}return SkipUntilOperator.prototype.call=function(e,t){return t.subscribe(new Xt(e,this.notifier))},SkipUntilOperator}(),Xt=function(e){function SkipUntilSubscriber(t,i){var r=e.call(this,t)||this;r.hasValue=!1;var n=new S(r);r.add(n),r.innerSubscription=n;var s=innerSubscribe(i,n);return s!==n&&(r.add(s),r.innerSubscription=s),r}return r.__extends(SkipUntilSubscriber,e),SkipUntilSubscriber.prototype._next=function(t){this.hasValue&&e.prototype._next.call(this,t)},SkipUntilSubscriber.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},SkipUntilSubscriber.prototype.notifyComplete=function(){},SkipUntilSubscriber}(_);function skipWhile(e){return function(t){return t.lift(new Jt(e))}}var Jt=function(){function SkipWhileOperator(e){this.predicate=e}return SkipWhileOperator.prototype.call=function(e,t){return t.subscribe(new $t(e,this.predicate))},SkipWhileOperator}(),$t=function(e){function SkipWhileSubscriber(t,i){var r=e.call(this,t)||this;return r.predicate=i,r.skipping=!0,r.index=0,r}return r.__extends(SkipWhileSubscriber,e),SkipWhileSubscriber.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},SkipWhileSubscriber.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(e){this.destination.error(e)}},SkipWhileSubscriber}(h);function startWith(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[e.length-1];return isScheduler_isScheduler(i)?(e.pop(),function(t){return concat(e,t,i)}):function(t){return concat(e,t)}}var ei=1,ti=function(){return Promise.resolve()}(),ii={};function findAndClearHandle(e){return e in ii&&(delete ii[e],!0)}var Immediate_setImmediate=function(e){var t=ei++;return ii[t]=!0,ti.then((function(){return findAndClearHandle(t)&&e()})),t},Immediate_clearImmediate=function(e){findAndClearHandle(e)},ri=function(e){function AsapAction(t,i){var r=e.call(this,t,i)||this;return r.scheduler=t,r.work=i,r}return r.__extends(AsapAction,e),AsapAction.prototype.requestAsyncId=function(t,i,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,i,r):(t.actions.push(this),t.scheduled||(t.scheduled=Immediate_setImmediate(t.flush.bind(t,null))))},AsapAction.prototype.recycleAsyncId=function(t,i,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,i,r);0===t.actions.length&&(Immediate_clearImmediate(i),t.scheduled=void 0)},AsapAction}(y),ni=new(function(e){function AsapScheduler(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(AsapScheduler,e),AsapScheduler.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,i=this.actions,r=-1,n=i.length;e=e||i.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<n&&(e=i.shift()));if(this.active=!1,t){for(;++r<n&&(e=i.shift());)e.unsubscribe();throw t}},AsapScheduler}(w))(ri),si=function(e){function SubscribeOnObservable(t,i,r){void 0===i&&(i=0),void 0===r&&(r=ni);var n=e.call(this)||this;return n.source=t,n.delayTime=i,n.scheduler=r,(!isNumeric(i)||i<0)&&(n.delayTime=0),r&&"function"==typeof r.schedule||(n.scheduler=ni),n}return r.__extends(SubscribeOnObservable,e),SubscribeOnObservable.create=function(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=ni),new SubscribeOnObservable(e,t,i)},SubscribeOnObservable.dispatch=function(e){var t=e.source,i=e.subscriber;return this.add(t.subscribe(i))},SubscribeOnObservable.prototype._subscribe=function(e){var t=this.delayTime,i=this.source;return this.scheduler.schedule(SubscribeOnObservable.dispatch,t,{source:i,subscriber:e})},SubscribeOnObservable}(b);function subscribeOn(e,t){return void 0===t&&(t=0),function subscribeOnOperatorFunction(i){return i.lift(new oi(e,t))}}var oi=function(){function SubscribeOnOperator(e,t){this.scheduler=e,this.delay=t}return SubscribeOnOperator.prototype.call=function(e,t){return new si(t,this.delay,this.scheduler).subscribe(e)},SubscribeOnOperator}();function switchMap(e,t){return"function"==typeof t?function(i){return i.pipe(switchMap((function(i,r){return from_from(e(i,r)).pipe(map((function(e,n){return t(i,e,r,n)})))})))}:function(t){return t.lift(new ui(e))}}var ui=function(){function SwitchMapOperator(e){this.project=e}return SwitchMapOperator.prototype.call=function(e,t){return t.subscribe(new ai(e,this.project))},SwitchMapOperator}(),ai=function(e){function SwitchMapSubscriber(t,i){var r=e.call(this,t)||this;return r.project=i,r.index=0,r}return r.__extends(SwitchMapSubscriber,e),SwitchMapSubscriber.prototype._next=function(e){var t,i=this.index++;try{t=this.project(e,i)}catch(e){return void this.destination.error(e)}this._innerSub(t)},SwitchMapSubscriber.prototype._innerSub=function(e){var t=this.innerSubscription;t&&t.unsubscribe();var i=new S(this),r=this.destination;r.add(i),this.innerSubscription=innerSubscribe(e,i),this.innerSubscription!==i&&r.add(this.innerSubscription)},SwitchMapSubscriber.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},SwitchMapSubscriber.prototype._unsubscribe=function(){this.innerSubscription=void 0},SwitchMapSubscriber.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&e.prototype._complete.call(this)},SwitchMapSubscriber.prototype.notifyNext=function(e){this.destination.next(e)},SwitchMapSubscriber}(_);function switchAll(){return switchMap(identity)}function switchMapTo(e,t){return t?switchMap((function(){return e}),t):switchMap((function(){return e}))}function takeUntil(e){return function(t){return t.lift(new ci(e))}}var ci=function(){function TakeUntilOperator(e){this.notifier=e}return TakeUntilOperator.prototype.call=function(e,t){var i=new li(e),r=innerSubscribe(this.notifier,new S(i));return r&&!i.seenValue?(i.add(r),t.subscribe(i)):i},TakeUntilOperator}(),li=function(e){function TakeUntilSubscriber(t){var i=e.call(this,t)||this;return i.seenValue=!1,i}return r.__extends(TakeUntilSubscriber,e),TakeUntilSubscriber.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},TakeUntilSubscriber.prototype.notifyComplete=function(){},TakeUntilSubscriber}(_);function takeWhile(e,t){return void 0===t&&(t=!1),function(i){return i.lift(new hi(e,t))}}var hi=function(){function TakeWhileOperator(e,t){this.predicate=e,this.inclusive=t}return TakeWhileOperator.prototype.call=function(e,t){return t.subscribe(new pi(e,this.predicate,this.inclusive))},TakeWhileOperator}(),pi=function(e){function TakeWhileSubscriber(t,i,r){var n=e.call(this,t)||this;return n.predicate=i,n.inclusive=r,n.index=0,n}return r.__extends(TakeWhileSubscriber,e),TakeWhileSubscriber.prototype._next=function(e){var t,i=this.destination;try{t=this.predicate(e,this.index++)}catch(e){return void i.error(e)}this.nextOrComplete(e,t)},TakeWhileSubscriber.prototype.nextOrComplete=function(e,t){var i=this.destination;Boolean(t)?i.next(e):(this.inclusive&&i.next(e),i.complete())},TakeWhileSubscriber}(h);function noop(){}function tap(e,t,i){return function tapOperatorFunction(r){return r.lift(new di(e,t,i))}}var di=function(){function DoOperator(e,t,i){this.nextOrObserver=e,this.error=t,this.complete=i}return DoOperator.prototype.call=function(e,t){return t.subscribe(new bi(e,this.nextOrObserver,this.error,this.complete))},DoOperator}(),bi=function(e){function TapSubscriber(t,i,r,n){var s=e.call(this,t)||this;return s._tapNext=noop,s._tapError=noop,s._tapComplete=noop,s._tapError=r||noop,s._tapComplete=n||noop,isFunction(i)?(s._context=s,s._tapNext=i):i&&(s._context=i,s._tapNext=i.next||noop,s._tapError=i.error||noop,s._tapComplete=i.complete||noop),s}return r.__extends(TapSubscriber,e),TapSubscriber.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},TapSubscriber.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},TapSubscriber.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},TapSubscriber}(h),fi={leading:!0,trailing:!1};function throttle(e,t){return void 0===t&&(t=fi),function(i){return i.lift(new Si(e,!!t.leading,!!t.trailing))}}var Si=function(){function ThrottleOperator(e,t,i){this.durationSelector=e,this.leading=t,this.trailing=i}return ThrottleOperator.prototype.call=function(e,t){return t.subscribe(new _i(e,this.durationSelector,this.leading,this.trailing))},ThrottleOperator}(),_i=function(e){function ThrottleSubscriber(t,i,r,n){var s=e.call(this,t)||this;return s.destination=t,s.durationSelector=i,s._leading=r,s._trailing=n,s._hasValue=!1,s}return r.__extends(ThrottleSubscriber,e),ThrottleSubscriber.prototype._next=function(e){this._hasValue=!0,this._sendValue=e,this._throttled||(this._leading?this.send():this.throttle(e))},ThrottleSubscriber.prototype.send=function(){var e=this._hasValue,t=this._sendValue;e&&(this.destination.next(t),this.throttle(t)),this._hasValue=!1,this._sendValue=void 0},ThrottleSubscriber.prototype.throttle=function(e){var t=this.tryDurationSelector(e);t&&this.add(this._throttled=innerSubscribe(t,new S(this)))},ThrottleSubscriber.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(e){return this.destination.error(e),null}},ThrottleSubscriber.prototype.throttlingDone=function(){var e=this._throttled,t=this._trailing;e&&e.unsubscribe(),this._throttled=void 0,t&&this.send()},ThrottleSubscriber.prototype.notifyNext=function(){this.throttlingDone()},ThrottleSubscriber.prototype.notifyComplete=function(){this.throttlingDone()},ThrottleSubscriber}(_);function throttleTime(e,t,i){return void 0===t&&(t=I),void 0===i&&(i=fi),function(r){return r.lift(new gi(e,t,i.leading,i.trailing))}}var gi=function(){function ThrottleTimeOperator(e,t,i,r){this.duration=e,this.scheduler=t,this.leading=i,this.trailing=r}return ThrottleTimeOperator.prototype.call=function(e,t){return t.subscribe(new mi(e,this.duration,this.scheduler,this.leading,this.trailing))},ThrottleTimeOperator}(),mi=function(e){function ThrottleTimeSubscriber(t,i,r,n,s){var o=e.call(this,t)||this;return o.duration=i,o.scheduler=r,o.leading=n,o.trailing=s,o._hasTrailingValue=!1,o._trailingValue=null,o}return r.__extends(ThrottleTimeSubscriber,e),ThrottleTimeSubscriber.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(throttleTime_dispatchNext,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},ThrottleTimeSubscriber.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},ThrottleTimeSubscriber.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},ThrottleTimeSubscriber}(h);function throttleTime_dispatchNext(e){e.subscriber.clearThrottle()}function timeInterval(e){return void 0===e&&(e=I),function(t){return function defer(e){return new b((function(t){var i;try{i=e()}catch(e){return void t.error(e)}return(i?from_from(i):empty_empty()).subscribe(t)}))}((function(){return t.pipe(scan((function(t,i){var r=t.current;return{value:i,current:e.now(),last:r}}),{current:e.now(),value:void 0,last:void 0}),map((function(e){var t=e.current,i=e.last,r=e.value;return new yi(r,t-i)})))}))}}var yi=function(){return function TimeInterval(e,t){this.value=e,this.interval=t}}(),vi=function(){function TimeoutErrorImpl(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return TimeoutErrorImpl.prototype=Object.create(Error.prototype),TimeoutErrorImpl}();function timeoutWith(e,t,i){return void 0===i&&(i=I),function(r){var n=isDate(e),s=n?+e-i.now():Math.abs(e);return r.lift(new wi(s,n,t,i))}}var wi=function(){function TimeoutWithOperator(e,t,i,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=i,this.scheduler=r}return TimeoutWithOperator.prototype.call=function(e,t){return t.subscribe(new Ii(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},TimeoutWithOperator}(),Ii=function(e){function TimeoutWithSubscriber(t,i,r,n,s){var o=e.call(this,t)||this;return o.absoluteTimeout=i,o.waitFor=r,o.withObservable=n,o.scheduler=s,o.scheduleTimeout(),o}return r.__extends(TimeoutWithSubscriber,e),TimeoutWithSubscriber.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(innerSubscribe(t,new S(e)))},TimeoutWithSubscriber.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout,this.waitFor,this))},TimeoutWithSubscriber.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},TimeoutWithSubscriber.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},TimeoutWithSubscriber}(_);function timeout(e,t){return void 0===t&&(t=I),timeoutWith(e,throwError(new vi),t)}function timestamp(e){return void 0===e&&(e=I),map((function(t){return new Ei(t,e.now())}))}var Ei=function(){return function Timestamp(e,t){this.value=e,this.timestamp=t}}();function toArrayReducer(e,t,i){return 0===i?[t]:(e.push(t),e)}function toArray(){return reduce(toArrayReducer,[])}function window_window(e){return function windowOperatorFunction(t){return t.lift(new Ai(e))}}var Ai=function(){function WindowOperator(e){this.windowBoundaries=e}return WindowOperator.prototype.call=function(e,t){var i=new Ci(e),r=t.subscribe(i);return r.closed||i.add(innerSubscribe(this.windowBoundaries,new S(i))),r},WindowOperator}(),Ci=function(e){function WindowSubscriber(t){var i=e.call(this,t)||this;return i.window=new je,t.next(i.window),i}return r.__extends(WindowSubscriber,e),WindowSubscriber.prototype.notifyNext=function(){this.openWindow()},WindowSubscriber.prototype.notifyError=function(e){this._error(e)},WindowSubscriber.prototype.notifyComplete=function(){this._complete()},WindowSubscriber.prototype._next=function(e){this.window.next(e)},WindowSubscriber.prototype._error=function(e){this.window.error(e),this.destination.error(e)},WindowSubscriber.prototype._complete=function(){this.window.complete(),this.destination.complete()},WindowSubscriber.prototype._unsubscribe=function(){this.window=null},WindowSubscriber.prototype.openWindow=function(){var e=this.window;e&&e.complete();var t=this.destination,i=this.window=new je;t.next(i)},WindowSubscriber}(_);function windowCount(e,t){return void 0===t&&(t=0),function windowCountOperatorFunction(i){return i.lift(new Oi(e,t))}}var Oi=function(){function WindowCountOperator(e,t){this.windowSize=e,this.startWindowEvery=t}return WindowCountOperator.prototype.call=function(e,t){return t.subscribe(new Di(e,this.windowSize,this.startWindowEvery))},WindowCountOperator}(),Di=function(e){function WindowCountSubscriber(t,i,r){var n=e.call(this,t)||this;return n.destination=t,n.windowSize=i,n.startWindowEvery=r,n.windows=[new je],n.count=0,t.next(n.windows[0]),n}return r.__extends(WindowCountSubscriber,e),WindowCountSubscriber.prototype._next=function(e){for(var t=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,i=this.destination,r=this.windowSize,n=this.windows,s=n.length,o=0;o<s&&!this.closed;o++)n[o].next(e);var u=this.count-r+1;if(u>=0&&u%t==0&&!this.closed&&n.shift().complete(),++this.count%t==0&&!this.closed){var a=new je;n.push(a),i.next(a)}},WindowCountSubscriber.prototype._error=function(e){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().error(e);this.destination.error(e)},WindowCountSubscriber.prototype._complete=function(){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().complete();this.destination.complete()},WindowCountSubscriber.prototype._unsubscribe=function(){this.count=0,this.windows=null},WindowCountSubscriber}(h);function windowTime(e){var t=I,i=null,r=Number.POSITIVE_INFINITY;return isScheduler_isScheduler(arguments[3])&&(t=arguments[3]),isScheduler_isScheduler(arguments[2])?t=arguments[2]:isNumeric(arguments[2])&&(r=Number(arguments[2])),isScheduler_isScheduler(arguments[1])?t=arguments[1]:isNumeric(arguments[1])&&(i=Number(arguments[1])),function windowTimeOperatorFunction(n){return n.lift(new Ti(e,i,r,t))}}var Ti=function(){function WindowTimeOperator(e,t,i,r){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=i,this.scheduler=r}return WindowTimeOperator.prototype.call=function(e,t){return t.subscribe(new Ni(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},WindowTimeOperator}(),xi=function(e){function CountedSubject(){var t=null!==e&&e.apply(this,arguments)||this;return t._numberOfNextedValues=0,t}return r.__extends(CountedSubject,e),CountedSubject.prototype.next=function(t){this._numberOfNextedValues++,e.prototype.next.call(this,t)},Object.defineProperty(CountedSubject.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),CountedSubject}(je),Ni=function(e){function WindowTimeSubscriber(t,i,r,n,s){var o=e.call(this,t)||this;o.destination=t,o.windowTimeSpan=i,o.windowCreationInterval=r,o.maxWindowSize=n,o.scheduler=s,o.windows=[];var u=o.openWindow();if(null!==r&&r>=0){var a={subscriber:o,window:u,context:null},c={windowTimeSpan:i,windowCreationInterval:r,subscriber:o,scheduler:s};o.add(s.schedule(dispatchWindowClose,i,a)),o.add(s.schedule(dispatchWindowCreation,r,c))}else{var l={subscriber:o,window:u,windowTimeSpan:i};o.add(s.schedule(dispatchWindowTimeSpanOnly,i,l))}return o}return r.__extends(WindowTimeSubscriber,e),WindowTimeSubscriber.prototype._next=function(e){for(var t=this.windows,i=t.length,r=0;r<i;r++){var n=t[r];n.closed||(n.next(e),n.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(n))}},WindowTimeSubscriber.prototype._error=function(e){for(var t=this.windows;t.length>0;)t.shift().error(e);this.destination.error(e)},WindowTimeSubscriber.prototype._complete=function(){for(var e=this.windows;e.length>0;){var t=e.shift();t.closed||t.complete()}this.destination.complete()},WindowTimeSubscriber.prototype.openWindow=function(){var e=new xi;return this.windows.push(e),this.destination.next(e),e},WindowTimeSubscriber.prototype.closeWindow=function(e){e.complete();var t=this.windows;t.splice(t.indexOf(e),1)},WindowTimeSubscriber}(h);function dispatchWindowTimeSpanOnly(e){var t=e.subscriber,i=e.windowTimeSpan,r=e.window;r&&t.closeWindow(r),e.window=t.openWindow(),this.schedule(e,i)}function dispatchWindowCreation(e){var t=e.windowTimeSpan,i=e.subscriber,r=e.scheduler,n=e.windowCreationInterval,s=i.openWindow(),o=this,u={action:o,subscription:null},a={subscriber:i,window:s,context:u};u.subscription=r.schedule(dispatchWindowClose,t,a),o.add(u.subscription),o.schedule(e,n)}function dispatchWindowClose(e){var t=e.subscriber,i=e.window,r=e.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),t.closeWindow(i)}function windowToggle(e,t){return function(i){return i.lift(new Mi(e,t))}}var Mi=function(){function WindowToggleOperator(e,t){this.openings=e,this.closingSelector=t}return WindowToggleOperator.prototype.call=function(e,t){return t.subscribe(new Li(e,this.openings,this.closingSelector))},WindowToggleOperator}(),Li=function(e){function WindowToggleSubscriber(t,i,r){var n=e.call(this,t)||this;return n.openings=i,n.closingSelector=r,n.contexts=[],n.add(n.openSubscription=subscribeToResult(n,i,i)),n}return r.__extends(WindowToggleSubscriber,e),WindowToggleSubscriber.prototype._next=function(e){var t=this.contexts;if(t)for(var i=t.length,r=0;r<i;r++)t[r].window.next(e)},WindowToggleSubscriber.prototype._error=function(t){var i=this.contexts;if(this.contexts=null,i)for(var r=i.length,n=-1;++n<r;){var s=i[n];s.window.error(t),s.subscription.unsubscribe()}e.prototype._error.call(this,t)},WindowToggleSubscriber.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t)for(var i=t.length,r=-1;++r<i;){var n=t[r];n.window.complete(),n.subscription.unsubscribe()}e.prototype._complete.call(this)},WindowToggleSubscriber.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,i=-1;++i<t;){var r=e[i];r.window.unsubscribe(),r.subscription.unsubscribe()}},WindowToggleSubscriber.prototype.notifyNext=function(e,t,i,r,n){if(e===this.openings){var s=void 0;try{s=(0,this.closingSelector)(t)}catch(e){return this.error(e)}var o=new je,u=new c,a={window:o,subscription:u};this.contexts.push(a);var l=subscribeToResult(this,s,a);l.closed?this.closeWindow(this.contexts.length-1):(l.context=a,u.add(l)),this.destination.next(o)}else this.closeWindow(this.contexts.indexOf(e))},WindowToggleSubscriber.prototype.notifyError=function(e){this.error(e)},WindowToggleSubscriber.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},WindowToggleSubscriber.prototype.closeWindow=function(e){if(-1!==e){var t=this.contexts,i=t[e],r=i.window,n=i.subscription;t.splice(e,1),r.complete(),n.unsubscribe()}},WindowToggleSubscriber}(L);function windowWhen(e){return function windowWhenOperatorFunction(t){return t.lift(new Ri(e))}}var Ri=function(){function WindowOperator(e){this.closingSelector=e}return WindowOperator.prototype.call=function(e,t){return t.subscribe(new Pi(e,this.closingSelector))},WindowOperator}(),Pi=function(e){function WindowSubscriber(t,i){var r=e.call(this,t)||this;return r.destination=t,r.closingSelector=i,r.openWindow(),r}return r.__extends(WindowSubscriber,e),WindowSubscriber.prototype.notifyNext=function(e,t,i,r,n){this.openWindow(n)},WindowSubscriber.prototype.notifyError=function(e){this._error(e)},WindowSubscriber.prototype.notifyComplete=function(e){this.openWindow(e)},WindowSubscriber.prototype._next=function(e){this.window.next(e)},WindowSubscriber.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},WindowSubscriber.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},WindowSubscriber.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},WindowSubscriber.prototype.openWindow=function(e){void 0===e&&(e=null),e&&(this.remove(e),e.unsubscribe());var t=this.window;t&&t.complete();var i,r=this.window=new je;this.destination.next(r);try{i=(0,this.closingSelector)()}catch(e){return this.destination.error(e),void this.window.error(e)}this.add(this.closingNotification=subscribeToResult(this,i))},WindowSubscriber}(L);function withLatestFrom(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var i;"function"==typeof e[e.length-1]&&(i=e.pop());var r=e;return t.lift(new Ui(r,i))}}var Ui=function(){function WithLatestFromOperator(e,t){this.observables=e,this.project=t}return WithLatestFromOperator.prototype.call=function(e,t){return t.subscribe(new Bi(e,this.observables,this.project))},WithLatestFromOperator}(),Bi=function(e){function WithLatestFromSubscriber(t,i,r){var n=e.call(this,t)||this;n.observables=i,n.project=r,n.toRespond=[];var s=i.length;n.values=new Array(s);for(var o=0;o<s;o++)n.toRespond.push(o);for(o=0;o<s;o++){var u=i[o];n.add(subscribeToResult(n,u,void 0,o))}return n}return r.__extends(WithLatestFromSubscriber,e),WithLatestFromSubscriber.prototype.notifyNext=function(e,t,i){this.values[i]=t;var r=this.toRespond;if(r.length>0){var n=r.indexOf(i);-1!==n&&r.splice(n,1)}},WithLatestFromSubscriber.prototype.notifyComplete=function(){},WithLatestFromSubscriber.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},WithLatestFromSubscriber.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},WithLatestFromSubscriber}(L);function zip(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[e.length-1];return"function"==typeof i&&e.pop(),fromArray_fromArray(e,void 0).lift(new Wi(i))}var Wi=function(){function ZipOperator(e){this.resultSelector=e}return ZipOperator.prototype.call=function(e,t){return t.subscribe(new Fi(e,this.resultSelector))},ZipOperator}(),Fi=function(e){function ZipSubscriber(t,i,r){void 0===r&&(r=Object.create(null));var n=e.call(this,t)||this;return n.resultSelector=i,n.iterators=[],n.active=0,n.resultSelector="function"==typeof i?i:void 0,n}return r.__extends(ZipSubscriber,e),ZipSubscriber.prototype._next=function(e){var t=this.iterators;u(e)?t.push(new ji(e)):"function"==typeof e[f]?t.push(new ki(e[f]())):t.push(new Gi(this.destination,this,e))},ZipSubscriber.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var i=0;i<t;i++){var r=e[i];if(r.stillUnsubscribed)this.destination.add(r.subscribe());else this.active--}}else this.destination.complete()},ZipSubscriber.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},ZipSubscriber.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,i=this.destination,r=0;r<t;r++){if("function"==typeof(o=e[r]).hasValue&&!o.hasValue())return}var n=!1,s=[];for(r=0;r<t;r++){var o,u=(o=e[r]).next();if(o.hasCompleted()&&(n=!0),u.done)return void i.complete();s.push(u.value)}this.resultSelector?this._tryresultSelector(s):i.next(s),n&&i.complete()},ZipSubscriber.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},ZipSubscriber}(h),ki=function(){function StaticIterator(e){this.iterator=e,this.nextResult=e.next()}return StaticIterator.prototype.hasValue=function(){return!0},StaticIterator.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},StaticIterator.prototype.hasCompleted=function(){var e=this.nextResult;return Boolean(e&&e.done)},StaticIterator}(),ji=function(){function StaticArrayIterator(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return StaticArrayIterator.prototype[f]=function(){return this},StaticArrayIterator.prototype.next=function(e){var t=this.index++,i=this.array;return t<this.length?{value:i[t],done:!1}:{value:null,done:!0}},StaticArrayIterator.prototype.hasValue=function(){return this.array.length>this.index},StaticArrayIterator.prototype.hasCompleted=function(){return this.array.length===this.index},StaticArrayIterator}(),Gi=function(e){function ZipBufferIterator(t,i,r){var n=e.call(this,t)||this;return n.parent=i,n.observable=r,n.stillUnsubscribed=!0,n.buffer=[],n.isComplete=!1,n}return r.__extends(ZipBufferIterator,e),ZipBufferIterator.prototype[f]=function(){return this},ZipBufferIterator.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},ZipBufferIterator.prototype.hasValue=function(){return this.buffer.length>0},ZipBufferIterator.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},ZipBufferIterator.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},ZipBufferIterator.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},ZipBufferIterator.prototype.subscribe=function(){return innerSubscribe(this.observable,new S(this))},ZipBufferIterator}(_);function zip_zip(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function zipOperatorFunction(t){return t.lift.call(zip.apply(void 0,[t].concat(e)))}}function zipAll(e){return function(t){return t.lift(new Wi(e))}}},458:function(e){e.exports=t},234:function(e){e.exports=i},600:function(e){e.exports=u},395:function(e){e.exports=r},774:function(e){e.exports=n},435:function(e){e.exports=s},780:function(t){t.exports=e},805:function(e){e.exports=o}},c={};function __nested_webpack_require_425121__(e){var t=c[e];if(void 0!==t)return t.exports;var i=c[e]={exports:{}};return a[e](i,i.exports,__nested_webpack_require_425121__),i.exports}return __nested_webpack_require_425121__.d=function(e,t){for(var i in t)__nested_webpack_require_425121__.o(t,i)&&!__nested_webpack_require_425121__.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},__nested_webpack_require_425121__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__nested_webpack_require_425121__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__nested_webpack_require_425121__(614)}()}))}}]);