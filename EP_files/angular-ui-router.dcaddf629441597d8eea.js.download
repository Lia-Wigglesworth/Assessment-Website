/*! For license information please see angular-ui-router.dcaddf629441597d8eea.js.LICENSE.txt */
(self.webpackChunkep_web=self.webpackChunkep_web||[]).push([["../libs/wp/angular-ui-router/angular-ui-router"],{"./node_modules/angular-ui-router/release/angular-ui-router.min.js":function(y,_,$){!function(y,_){"use strict";var b=angular,E=_&&_.module?_:b;function c(y){var _=[].slice.apply(arguments,[1]),$=y.length;return function t(_){return _.length>=$?y.apply(null,_):function(){return t(_.concat([].slice.apply(arguments)))}}(_)}function r(){var y=arguments,_=y.length-1;return function(){for(var $=_,b=y[_].apply(this,arguments);$--;)b=y[$].call(this,b);return b}}function s(){for(var y=[],_=0;_<arguments.length;_++)y[_]=arguments[_];return r.apply(null,[].slice.call(arguments).reverse())}var w=function(y){return function(_){return _&&_[y]}},C=c((function(y,_,$){return $&&$[y]===_})),R=function(y){return s.apply(null,y.split(".").map(w))},l=function(y){return function(){for(var _=[],$=0;$<arguments.length;$++)_[$]=arguments[$];return!y.apply(null,_)}};function n(y,_){return function(){for(var $=[],b=0;b<arguments.length;b++)$[b]=arguments[b];return y.apply(null,$)&&_.apply(null,$)}}function i(y,_){return function(){for(var $=[],b=0;b<arguments.length;b++)$[b]=arguments[b];return y.apply(null,$)||_.apply(null,$)}}var f=function(y){return function(_){return _.reduce((function(_,$){return _&&!!y($)}),!0)}},h=function(y){return function(_){return _.reduce((function(_,$){return _||!!y($)}),!1)}},p=function(y){return function(_){return null!=_&&_.constructor===y||_ instanceof y}},o=function(y){return function(_){return y===_}},v=function(y){return function(){return y}};function a(y,_){return function($){return $[y].apply($,_)}}function m(y){return function(_){for(var $=0;$<y.length;$++)if(y[$][0](_))return y[$][1](_)}}var P=Object.prototype.toString,g=function(y){return function(_){return typeof _===y}},T=g("undefined"),O=l(T),S=function(y){return null===y},I=i(S,T),A=g("function"),D=g("number"),q=g("string"),k=function(y){return null!==y&&"object"==typeof y},F=Array.isArray,x=function(y){return"[object Date]"===P.call(y)},j=function(y){return"[object RegExp]"===P.call(y)};function V(y){if(F(y)&&y.length){var _=y.slice(0,-1),$=y.slice(-1);return!(_.filter(l(q)).length||$.filter(l(A)).length)}return A(y)}var U=n(k,s(w("then"),A)),H=function(y,_){return _.reduce((function(_,$){return _[$]=(b=y+"."+$+"()",function(){throw new Error("No implementation for "+b+". The framework specific code did not implement this method.")}),_;var b}),{})},N={$q:void 0,$injector:void 0},L="object"==typeof self&&self.self===self&&self||"object"==typeof $.g&&$.g.global===$.g&&$.g||void 0,M=L.angular||{},J=M.fromJson||JSON.parse.bind(JSON),K=M.toJson||JSON.stringify.bind(JSON),Z=M.forEach||function(y,_,$){if(F(y))return y.forEach(_,$);Object.keys(y).forEach((function($){return _(y[$],$)}))},ct=Object.assign||Pt,_t=M.equals||kt;function B(y){return y}function G(){}function W(y,_,$,b,E){void 0===E&&(E=!1);var o=function(_){return y()[_].bind($())};return(b=b||Object.keys(y())).reduce((function(y,$){var b;return y[$]=E?(b=$,function(){return _[b]=o(b),_[b].apply(null,arguments)}):o($),y}),_)}var z=function(y,_){return ct(Object.create(y),_)},St=c(Q);function Q(y,_){return-1!==y.indexOf(_)}var Ot=c(Y);function Y(y,_){var $=y.indexOf(_);return 0<=$&&y.splice($,1),y}var Vt=c(X);function X(y,_){return y.push(_),_}var tt=function(y){return y.slice().forEach((function(_){"function"==typeof _&&_(),Ot(y,_)}))};function et(y){for(var _=[],$=1;$<arguments.length;$++)_[$-1]=arguments[$];var b=ct.apply(void 0,[{}].concat(_.reverse()));return ct(b,it(y||{},Object.keys(b)))}var rt=function(y,_){return ct(y,_)};function nt(y,_){var $=[];for(var b in y.path){if(y.path[b]!==_.path[b])break;$.push(y.path[b])}return $}function it(y,_){var $={};for(var b in y)-1!==_.indexOf(b)&&($[b]=y[b]);return $}function ot(y,_){return Object.keys(y).filter(l(St(_))).reduce((function(_,$){return _[$]=y[$],_}),{})}function at(y,_){return ft(y,w(_))}function ut(y,_){var $=F(y),b=$?[]:{},E=$?function(y){return b.push(y)}:function(y,_){return b[_]=y};return Z(y,(function(y,$){_(y,$)&&E(y,$)})),b}function st(y,_){var $;return Z(y,(function(y,b){$||_(y,b)&&($=y)})),$}var It=ft;function ft(y,_,$){return $=$||(F(y)?[]:{}),Z(y,(function(y,b){return $[b]=_(y,b)})),$}var lt=function(y){return Object.keys(y).map((function(_){return y[_]}))},ht=function(y,_){return y&&_},pt=function(y,_){return y||_},vt=function(y,_){return y.concat(_)},dt=function(y,_){return F(_)?y.concat(_.reduce(dt,[])):mt(y,_)};function mt(y,_){return y.push(_),y}var yt=function(y,_){return St(y,_)?y:mt(y,_)},gt=function(y){return y.reduce(vt,[])},wt=function(y){return y.reduce(dt,[])},At=$t,Ht=$t;function $t(y,_){return void 0===_&&(_="assert failure"),function($){var b=y($);if(!b)throw new Error(A(_)?_($):_);return b}}var bt=function(y){return Object.keys(y).map((function(_){return[_,y[_]]}))};function Rt(){for(var y=[],_=0;_<arguments.length;_++)y[_]=arguments[_];if(0===y.length)return[];for(var $=y.reduce((function(y,_){return Math.min(_.length,y)}),9007199254740991),b=[],i=function(_){switch(y.length){case 1:b.push([y[0][_]]);break;case 2:b.push([y[0][_],y[1][_]]);break;case 3:b.push([y[0][_],y[1][_],y[2][_]]);break;case 4:b.push([y[0][_],y[1][_],y[2][_],y[3][_]]);break;default:b.push(y.map((function(y){return y[_]})))}},E=0;E<$;E++)i(E);return b}function Et(y,_){var $,b;if(F(_)&&($=_[0],b=_[1]),!q($))throw new Error("invalid parameters to applyPairs");return y[$]=b,y}function Ct(y){return y.length&&y[y.length-1]||void 0}function Tt(y,_){return _&&Object.keys(_).forEach((function(y){return delete _[y]})),_||(_={}),ct(_,y)}function Pt(y){for(var _=1;_<arguments.length;_++){var $=arguments[_];if($)for(var b=Object.keys($),E=0;E<b.length;E++)y[b[E]]=$[b[E]]}return y}function kt(y,_){if(y===_)return!0;if(null===y||null===_)return!1;if(y!=y&&_!=_)return!0;var $=typeof y;if($!==typeof _||"object"!==$)return!1;var b,E,C=[y,_];if(f(F)(C))return E=_,(b=y).length===E.length&&Rt(b,E).reduce((function(y,_){return y&&kt(_[0],_[1])}),!0);if(f(x)(C))return y.getTime()===_.getTime();if(f(j)(C))return y.toString()===_.toString();if(f(A)(C))return!0;if([A,F,x,j].map(h).reduce((function(y,_){return y||!!_(C)}),!1))return!1;var P={};for(var T in y){if(!kt(y[T],_[T]))return!1;P[T]=!0}for(var T in _)if(!P[T])return!1;return!0}var Lt,xt=function(y){return y.catch((function(y){return 0}))&&y},jt=function(y){return xt(N.$q.reject(y))},Mt=function(){function e(y){this.text=y,this.glob=y.split(".");var _=this.text.split(".").map((function(y){return"**"===y?"(?:|(?:\\.[^.]*)*)":"*"===y?"\\.[^.]*":"\\."+y})).join("");this.regexp=new RegExp("^"+_+"$")}return e.is=function(y){return!!/[!,*]+/.exec(y)},e.fromString=function(y){return e.is(y)?new e(y):null},e.prototype.matches=function(y){return this.regexp.test("."+y)},e}(),Wt=function(){function t(y,_){void 0===y&&(y=[]),void 0===_&&(_=null),this._items=y,this._limit=_,this._evictListeners=[],this.onEvict=Vt(this._evictListeners)}return t.prototype.enqueue=function(y){var _=this._items;return _.push(y),this._limit&&_.length>this._limit&&this.evict(),y},t.prototype.evict=function(){var y=this._items.shift();return this._evictListeners.forEach((function(_){return _(y)})),y},t.prototype.dequeue=function(){if(this.size())return this._items.splice(0,1)[0]},t.prototype.clear=function(){var y=this._items;return this._items=[],y},t.prototype.size=function(){return this._items.length},t.prototype.remove=function(y){var _=this._items.indexOf(y);return-1<_&&this._items.splice(_,1)[0]},t.prototype.peekTail=function(){return this._items[this._items.length-1]},t.prototype.peekHead=function(){if(this.size())return this._items[0]},t}();(Lt=y.RejectType||(y.RejectType={}))[Lt.SUPERSEDED=2]="SUPERSEDED",Lt[Lt.ABORTED=3]="ABORTED",Lt[Lt.INVALID=4]="INVALID",Lt[Lt.IGNORED=5]="IGNORED",Lt[Lt.ERROR=6]="ERROR";var Jt=0,Qt=function(){function n(y,_,$){this.$id=Jt++,this.type=y,this.message=_,this.detail=$}return n.isRejectionPromise=function(y){return y&&"function"==typeof y.then&&p(n)(y._transitionRejection)},n.superseded=function(_,$){var b=new n(y.RejectType.SUPERSEDED,"The transition has been superseded by a different transition",_);return $&&$.redirected&&(b.redirected=!0),b},n.redirected=function(y){return n.superseded(y,{redirected:!0})},n.invalid=function(_){return new n(y.RejectType.INVALID,"This transition is invalid",_)},n.ignored=function(_){return new n(y.RejectType.IGNORED,"The transition was ignored",_)},n.aborted=function(_){return new n(y.RejectType.ABORTED,"The transition has been aborted",_)},n.errored=function(_){return new n(y.RejectType.ERROR,"The transition errored",_)},n.normalize=function(y){return p(n)(y)?y:n.errored(y)},n.prototype.toString=function(){var y,_=(y=this.detail)&&y.toString!==Object.prototype.toString?y.toString():Bt(y);return"Transition Rejection($id: "+this.$id+" type: "+this.type+", message: "+this.message+", detail: "+_+")"},n.prototype.toPromise=function(){return ct(jt(this),{_transitionRejection:this})},n}();function Dt(y,_){return _.length<=y?_:_.substr(0,y-3)+"..."}function qt(y,_){for(;_.length<y;)_+=" ";return _}function Ut(y){return y.replace(/^([A-Z])/,(function(y){return y.toLowerCase()})).replace(/([A-Z])/g,(function(y){return"-"+y.toLowerCase()}))}function Ft(y){var _=Nt(y),$=_.match(/^(function [^ ]+\([^)]*\))/),b=$?$[1]:_,E=y.name||"";return E&&b.match(/function \(/)?"function "+E+b.substr(9):b}function Nt(y){var _=F(y)?y.slice(-1)[0]:y;return _&&_.toString()||"undefined"}var Kt=Qt.isRejectionPromise,re=m([[T,v("undefined")],[S,v("null")],[U,v("[Promise]")],[Kt,function(y){return y._transitionRejection.toString()}],[function(y){return k(y)&&!F(y)&&y.constructor!==Object&&A(y.toString)},function(y){return y.toString()}],[V,Ft],[v(!0),B]]);function Bt(y){var _=[];function r(y){if(k(y)){if(-1!==_.indexOf(y))return"[circular ref]";_.push(y)}return re(y)}return T(y)?r(y):JSON.stringify(y,(function(y,_){return r(_)})).replace(/\\"/g,'"')}var Gt=function(y){return function(_){if(!_)return["",""];var $=_.indexOf(y);return-1===$?[_,""]:[_.substr(0,$),_.substr($+1)]}},ne=new RegExp("^(?:[a-z]+:)?//[^/]+/"),zt=function(y){return y.replace(/\/[^/]*$/,"")},ie=Gt("#"),oe=Gt("?"),ae=Gt("="),Yt=function(y){return y?y.replace(/^#/,""):""};function Zt(y){var _=new RegExp("("+y+")","g");return function(y){return y.split(_).filter(B)}}function Xt(y,_){return q(Ct(y))&&q(_)?y.slice(0,-1).concat(Ct(y)+_):mt(y,_)}function te(y){if(!y)return"ui-view (defunct)";var _=y.creationContext?y.creationContext.name||"(root)":"(none)";return"[ui-view#"+y.id+" "+y.$type+":"+y.fqn+" ("+y.name+"@"+_+")]"}function ee(_){return D(_)?y.Category[_]:y.Category[y.Category[_]]}var se,ce=Function.prototype.bind.call(console.log,console),fe=A(console.table)?console.table.bind(console):ce.bind(console);(se=y.Category||(y.Category={}))[se.RESOLVE=0]="RESOLVE",se[se.TRANSITION=1]="TRANSITION",se[se.HOOK=2]="HOOK",se[se.UIVIEW=3]="UIVIEW",se[se.VIEWCONFIG=4]="VIEWCONFIG";var he=R("$id"),pe=R("router.$id"),ue=function(y){return"Transition #"+he(y)+"-"+pe(y)},me=function(){function t(){this._enabled={},this.approximateDigests=0}return t.prototype._set=function(_,$){var b=this;$.length||($=Object.keys(y.Category).map((function(y){return parseInt(y,10)})).filter((function(y){return!isNaN(y)})).map((function(_){return y.Category[_]}))),$.map(ee).forEach((function(y){return b._enabled[y]=_}))},t.prototype.enable=function(){for(var y=[],_=0;_<arguments.length;_++)y[_]=arguments[_];this._set(!0,y)},t.prototype.disable=function(){for(var y=[],_=0;_<arguments.length;_++)y[_]=arguments[_];this._set(!1,y)},t.prototype.enabled=function(y){return!!this._enabled[ee(y)]},t.prototype.traceTransitionStart=function(_){this.enabled(y.Category.TRANSITION)&&console.log(ue(_)+": Started  -> "+Bt(_))},t.prototype.traceTransitionIgnored=function(_){this.enabled(y.Category.TRANSITION)&&console.log(ue(_)+": Ignored  <> "+Bt(_))},t.prototype.traceHookInvocation=function(_,$,b){if(this.enabled(y.Category.HOOK)){var E=R("traceData.hookType")(b)||"internal",C=R("traceData.context.state.name")(b)||R("traceData.context")(b)||"unknown",P=Ft(_.registeredHook.callback);console.log(ue($)+":   Hook -> "+E+" context: "+C+", "+Dt(200,P))}},t.prototype.traceHookResult=function(_,$,b){this.enabled(y.Category.HOOK)&&console.log(ue($)+":   <- Hook returned: "+Dt(200,Bt(_)))},t.prototype.traceResolvePath=function(_,$,b){this.enabled(y.Category.RESOLVE)&&console.log(ue(b)+":         Resolving "+_+" ("+$+")")},t.prototype.traceResolvableResolved=function(_,$){this.enabled(y.Category.RESOLVE)&&console.log(ue($)+":               <- Resolved  "+_+" to: "+Dt(200,Bt(_.data)))},t.prototype.traceError=function(_,$){this.enabled(y.Category.TRANSITION)&&console.log(ue($)+": <- Rejected "+Bt($)+", reason: "+_)},t.prototype.traceSuccess=function(_,$){this.enabled(y.Category.TRANSITION)&&console.log(ue($)+": <- Success  "+Bt($)+", final state: "+_.name)},t.prototype.traceUIViewEvent=function(_,$,b){void 0===b&&(b=""),this.enabled(y.Category.UIVIEW)&&console.log("ui-view: "+qt(30,_)+" "+te($)+b)},t.prototype.traceUIViewConfigUpdated=function(_,$){this.enabled(y.Category.UIVIEW)&&this.traceUIViewEvent("Updating",_," with ViewConfig from context='"+$+"'")},t.prototype.traceUIViewFill=function(_,$){this.enabled(y.Category.UIVIEW)&&this.traceUIViewEvent("Fill",_," with: "+Dt(200,$))},t.prototype.traceViewSync=function(_){if(this.enabled(y.Category.VIEWCONFIG)){var $="uiview component fqn",b=_.map((function(y){var _,b=y.uiView,E=y.viewConfig,C=b&&b.fqn,P=E&&E.viewDecl.$context.name+": ("+E.viewDecl.$name+")";return(_={})[$]=C,_["view config state (view name)"]=P,_})).sort((function(y,_){return(y[$]||"").localeCompare(_[$]||"")}));fe(b)}},t.prototype.traceViewServiceEvent=function(_,$){var b,E,C;this.enabled(y.Category.VIEWCONFIG)&&console.log("VIEWCONFIG: "+_+" "+(C=(E=(b=$).viewDecl).$context.name||"(root)","[View#"+b.$id+" from '"+C+"' state]: target ui-view: '"+E.$uiViewName+"@"+E.$uiViewContextAnchor+"'"))},t.prototype.traceViewServiceUIViewEvent=function(_,$){this.enabled(y.Category.VIEWCONFIG)&&console.log("VIEWCONFIG: "+_+" "+te($))},t}(),ge=new me,ye=function(){function t(y){this.pattern=/.*/,this.inherit=!0,ct(this,y)}return t.prototype.is=function(y,_){return!0},t.prototype.encode=function(y,_){return y},t.prototype.decode=function(y,_){return y},t.prototype.equals=function(y,_){return y==_},t.prototype.$subPattern=function(){var y=this.pattern.toString();return y.substr(1,y.length-2)},t.prototype.toString=function(){return"{ParamType:"+this.name+"}"},t.prototype.$normalize=function(y){return this.is(y)?y:this.decode(y)},t.prototype.$asArray=function(y,_){if(!y)return this;if("auto"===y&&!_)throw new Error("'auto' array mode is for query parameters only");return new le(this,y)},t}();function le(y,_){var $=this;function a(y){return F(y)?y:O(y)?[y]:[]}function u(y,$){return function(b){if(F(b)&&0===b.length)return b;var E=ft(a(b),y);return!0===$?0===ut(E,(function(y){return!y})).length:function(y){switch(y.length){case 0:return;case 1:return"auto"===_?y[0]:y;default:return y}}(E)}}function s(y){return function(_,$){var b=a(_),E=a($);if(b.length!==E.length)return!1;for(var C=0;C<b.length;C++)if(!y(b[C],E[C]))return!1;return!0}}["encode","decode","equals","$normalize"].forEach((function(_){var b=y[_].bind(y),E="equals"===_?s:u;$[_]=E(b)})),ct(this,{dynamic:y.dynamic,name:y.name,pattern:y.pattern,inherit:y.inherit,raw:y.raw,is:u(y.is.bind(y),!0),$arrayMode:_})}var we,_e=Object.prototype.hasOwnProperty,ve=function(y){return 0===["value","type","squash","array","dynamic"].filter(_e.bind(y||{})).length};function de(_,$,b){var E=!1===b.reloadOnSearch&&$===y.DefType.SEARCH||void 0,C=st([b.dynamic,E],O),P=O(C)?{dynamic:C}:{},T=function(y){function e(){return y.value}y=ve(y)?{value:y}:y,e.__cacheable=!0;var _=V(y.value)?y.value:e;return ct(y,{$$fn:_})}(b&&b.params&&b.params[_]);return ct(P,T)}(we=y.DefType||(y.DefType={}))[we.PATH=0]="PATH",we[we.SEARCH=1]="SEARCH",we[we.CONFIG=2]="CONFIG";var $e,Se=function(){function n(_,$,b,E,C){var P=de(_,b,C);$=function(_,$,b,E,C){if(_.type&&$&&"string"!==$.name)throw new Error("Param '"+E+"' has two type configurations.");if(_.type&&$&&"string"===$.name&&C.type(_.type))return C.type(_.type);if($)return $;if(!_.type){var P=b===y.DefType.CONFIG?"any":b===y.DefType.PATH?"path":b===y.DefType.SEARCH?"query":"string";return C.type(P)}return _.type instanceof ye?_.type:C.type(_.type)}(P,$,b,_,E.paramTypes);var T,I,A=(T={array:b===y.DefType.SEARCH&&"auto"},I=_.match(/\[\]$/)?{array:!0}:{},ct(T,I,P).array);$=A?$.$asArray(A,b===y.DefType.SEARCH):$;var D=void 0!==P.value||b===y.DefType.SEARCH,U=O(P.dynamic)?!!P.dynamic:!!$.dynamic,N=O(P.raw)?!!P.raw:!!$.raw,L=function(y,_,$){var b=y.squash;if(!_||!1===b)return!1;if(!O(b)||null==b)return $;if(!0===b||q(b))return b;throw new Error("Invalid squash policy: '"+b+"'. Valid policies: false, true, or arbitrary string")}(P,D,E.defaultSquashPolicy()),M=function(y,_,$,b){var E=[{from:"",to:$||_?void 0:""},{from:null,to:$||_?void 0:""}],C=F(y.replace)?y.replace:[];q(b)&&C.push({from:b,to:void 0});var P=ft(C,w("from"));return ut(E,(function(y){return-1===P.indexOf(y.from)})).concat(C)}(P,A,D,L),J=O(P.inherit)?!!P.inherit:!!$.inherit;ct(this,{id:_,type:$,location:b,isOptional:D,dynamic:U,raw:N,squash:L,replace:M,inherit:J,array:A,config:P})}return n.values=function(y,_){void 0===_&&(_={});for(var $={},b=0,E=y;b<E.length;b++){var C=E[b];$[C.id]=C.value(_[C.id])}return $},n.changed=function(y,_,$){return void 0===_&&(_={}),void 0===$&&($={}),y.filter((function(y){return!y.type.equals(_[y.id],$[y.id])}))},n.equals=function(y,_,$){return void 0===_&&(_={}),void 0===$&&($={}),0===n.changed(y,_,$).length},n.validates=function(y,_){return void 0===_&&(_={}),y.map((function(y){return y.validates(_[y.id])})).reduce(ht,!0)},n.prototype.isDefaultValue=function(y){return this.isOptional&&this.type.equals(this.value(),y)},n.prototype.value=function(y){var _=this;return y=function(y){for(var $=0,b=_.replace;$<b.length;$++){var E=b[$];if(E.from===y)return E.to}return y}(y),T(y)?function(){if(_._defaultValueCache)return _._defaultValueCache.defaultValue;if(!N.$injector)throw new Error("Injectable functions cannot be called at configuration time");var y=N.$injector.invoke(_.config.$$fn);if(null!=y&&!_.type.is(y))throw new Error("Default value ("+y+") for parameter '"+_.id+"' is not an instance of ParamType ("+_.type.name+")");return _.config.$$fn.__cacheable&&(_._defaultValueCache={defaultValue:y}),y}():this.type.$normalize(y)},n.prototype.isSearch=function(){return this.location===y.DefType.SEARCH},n.prototype.validates=function(y){if((T(y)||null===y)&&this.isOptional)return!0;var _=this.type.$normalize(y);if(!this.type.is(_))return!1;var $=this.type.encode(_);return!(q($)&&!this.type.pattern.exec($))},n.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"},n}(),be=function(){function t(){this.enqueue=!0,this.typeQueue=[],this.defaultTypes=it(t.prototype,["hash","string","query","path","int","bool","date","json","any"]),this.types=z(ft(this.defaultTypes,(function(y,_){return new ye(ct({name:_},y))})),{})}return t.prototype.dispose=function(){this.types={}},t.prototype.type=function(y,_,$){if(!O(_))return this.types[y];if(this.types.hasOwnProperty(y))throw new Error("A type named '"+y+"' has already been defined.");return this.types[y]=new ye(ct({name:y},_)),$&&(this.typeQueue.push({name:y,def:$}),this.enqueue||this._flushTypeQueue()),this},t.prototype._flushTypeQueue=function(){for(;this.typeQueue.length;){var y=this.typeQueue.shift();if(y.pattern)throw new Error("You cannot override a type's .pattern at runtime.");ct(this.types[y.name],N.$injector.invoke(y.def))}},t}();$e=function(y){var e=function(y){return null!=y?y.toString():y},_={encode:e,decode:e,is:p(String),pattern:/.*/,equals:function(y,_){return y==_}};return ct({},_,y)},ct(be.prototype,{string:$e({}),path:$e({pattern:/[^/]*/}),query:$e({}),hash:$e({inherit:!1}),int:$e({decode:function(y){return parseInt(y,10)},is:function(y){return!I(y)&&this.decode(y.toString())===y},pattern:/-?\d+/}),bool:$e({encode:function(y){return y?1:0},decode:function(y){return 0!==parseInt(y,10)},is:p(Boolean),pattern:/0|1/}),date:$e({encode:function(y){return this.is(y)?[y.getFullYear(),("0"+(y.getMonth()+1)).slice(-2),("0"+y.getDate()).slice(-2)].join("-"):void 0},decode:function(y){if(this.is(y))return y;var _=this.capture.exec(y);return _?new Date(_[1],_[2]-1,_[3]):void 0},is:function(y){return y instanceof Date&&!isNaN(y.valueOf())},equals:function(y,_){return["getFullYear","getMonth","getDate"].reduce((function($,b){return $&&y[b]()===_[b]()}),!0)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/}),json:$e({encode:K,decode:J,is:p(Object),equals:_t,pattern:/[^/]*/}),any:$e({encode:B,decode:B,is:function(){return!0},equals:_t})});var Ee=function(){function t(y){void 0===y&&(y={}),ct(this,y)}return t.prototype.$inherit=function(y,_,$){var b,E=nt(_,$),C={},P=[];for(var T in E)if(E[T]&&E[T].params&&(b=Object.keys(E[T].params)).length)for(var O in b)0<=P.indexOf(b[O])||(P.push(b[O]),C[b[O]]=this[b[O]]);return ct({},C,y)},t}(),Re=function(){function n(y){if(y instanceof n){var _=y;this.state=_.state,this.paramSchema=_.paramSchema.slice(),this.paramValues=ct({},_.paramValues),this.resolvables=_.resolvables.slice(),this.views=_.views&&_.views.slice()}else{var $=y;this.state=$,this.paramSchema=$.parameters({inherit:!1}),this.paramValues={},this.resolvables=$.resolvables.map((function(y){return y.clone()}))}}return n.prototype.clone=function(){return new n(this)},n.prototype.applyRawParams=function(y){return this.paramValues=this.paramSchema.reduce((function(_,$){return Et(_,[(b=$).id,b.value(y[b.id])]);var b}),{}),this},n.prototype.parameter=function(y){return st(this.paramSchema,C("id",y))},n.prototype.equals=function(y,_){var $=this.diff(y,_);return $&&0===$.length},n.prototype.diff=function(y,_){if(this.state!==y.state)return!1;var $=_?_(this):this.paramSchema;return Se.changed($,this.paramValues,y.paramValues)},n.clone=function(y){return y.clone()},n}(),Ce=function(){function n(y,_,$,b){this._stateRegistry=y,this._identifier=_,this._identifier=_,this._params=ct({},$||{}),this._options=ct({},b||{}),this._definition=y.matcher.find(_,this._options.relative)}return n.prototype.name=function(){return this._definition&&this._definition.name||this._identifier},n.prototype.identifier=function(){return this._identifier},n.prototype.params=function(){return this._params},n.prototype.$state=function(){return this._definition},n.prototype.state=function(){return this._definition&&this._definition.self},n.prototype.options=function(){return this._options},n.prototype.exists=function(){return!(!this._definition||!this._definition.self)},n.prototype.valid=function(){return!this.error()},n.prototype.error=function(){var y=this.options().relative;if(!this._definition&&y){var _=y.name?y.name:y;return"Could not resolve '"+this.name()+"' from state '"+_+"'"}return this._definition?this._definition.self?void 0:"State '"+this.name()+"' has an invalid definition":"No such state '"+this.name()+"'"},n.prototype.toString=function(){return"'"+this.name()+"'"+Bt(this.params())},n.prototype.withState=function(y){return new n(this._stateRegistry,y,this._params,this._options)},n.prototype.withParams=function(y,_){void 0===_&&(_=!1);var $=_?y:ct({},this._params,y);return new n(this._stateRegistry,this._identifier,$,this._options)},n.prototype.withOptions=function(y,_){void 0===_&&(_=!1);var $=_?y:ct({},this._options,y);return new n(this._stateRegistry,this._identifier,this._params,$)},n.isDef=function(y){return y&&y.state&&(q(y.state)||q(y.state.name))},n}(),Pe=function(){function h(){}return h.makeTargetState=function(y,_){var $=Ct(_).state;return new Ce(y,$,_.map(w("paramValues")).reduce(rt,{}),{})},h.buildPath=function(y){var _=y.params();return y.$state().path.map((function(y){return new Re(y).applyRawParams(_)}))},h.buildToPath=function(y,_){var $=h.buildPath(_);return _.options().inherit?h.inheritParams(y,$,Object.keys(_.params())):$},h.applyViewConfigs=function(y,_,$){_.filter((function(y){return St($,y.state)})).forEach((function($){var b=lt($.state.views||{}),E=h.subPath(_,(function(y){return y===$})),C=b.map((function(_){return y.createViewConfig(E,_)}));$.views=C.reduce(vt,[])}))},h.inheritParams=function(y,_,$){void 0===$&&($=[]);var b=y.map((function(y){return y.paramSchema})).reduce(vt,[]).filter((function(y){return!y.inherit})).map(w("id"));return _.map((function(_){var E=ct({},_&&_.paramValues),P=it(E,$);E=ot(E,$);var T,O,I,A=ot((T=y,O=_.state,I=st(T,C("state",O)),ct({},I&&I.paramValues)||{}),b),D=ct(E,A,P);return new Re(_.state).applyRawParams(D)}))},h.treeChanges=function(y,_,$){for(var b,E,C,P,T,O,I=Math.min(y.length,_.length),A=0;A<I&&y[A].state!==$&&(b=y[A],E=_[A],b.equals(E,h.nonDynamicParams));)A++;P=(C=y).slice(0,A),T=C.slice(A);var D=P.map((function(y,$){var b=y.clone();return b.paramValues=_[$].paramValues,b}));return O=_.slice(A),{from:C,to:D.concat(O),retained:P,retainedWithToParams:D,exiting:T,entering:O}},h.matching=function(y,_,$){var b=!1;return Rt(y,_).reduce((function(y,_){var E=_[0],C=_[1];return(b=b||!E.equals(C,$))?y:y.concat(E)}),[])},h.equals=function(y,_,$){return y.length===_.length&&h.matching(y,_,$).length===y.length},h.subPath=function(y,_){var $=st(y,_),b=y.indexOf($);return-1===b?void 0:y.slice(0,b+1)},h.nonDynamicParams=function(y){return y.state.parameters({inherit:!1}).filter((function(y){return!y.dynamic}))},h.paramValues=function(y){return y.reduce((function(y,_){return ct(y,_.paramValues)}),{})},h}(),Te={when:{LAZY:"LAZY",EAGER:"EAGER"},async:{WAIT:"WAIT",NOWAIT:"NOWAIT",RXWAIT:"RXWAIT"}},ke={when:"LAZY",async:"WAIT"},Oe=function(){function a(y,_,$,b,E){if(this.resolved=!1,this.promise=void 0,y instanceof a)ct(this,y);else if(A(_)){if(I(y))throw new Error("new Resolvable(): token argument is required");if(!A(_))throw new Error("new Resolvable(): resolveFn argument must be a function");this.token=y,this.policy=b,this.resolveFn=_,this.deps=$||[],this.data=E,this.resolved=void 0!==E,this.promise=this.resolved?N.$q.when(this.data):void 0}else if(k(y)&&y.token&&(y.hasOwnProperty("resolveFn")||y.hasOwnProperty("data"))){var C=y;return new a(C.token,C.resolveFn,C.deps,C.policy,C.data)}}return a.prototype.getPolicy=function(y){var _=this.policy||{},$=y&&y.resolvePolicy||{};return{when:_.when||$.when||ke.when,async:_.async||$.async||ke.async}},a.prototype.resolve=function(y,_){var $=this,b=N.$q,E=y.findNode(this),C=E&&E.state,P="RXWAIT"===this.getPolicy(C).async?function(y){var _=y.cache(1);return _.take(1).toPromise().then((function(){return _}))}:B;return this.promise=b.when().then((function(){return b.all(y.getDependencies($).map((function($){return $.get(y,_)})))})).then((function(y){return $.resolveFn.apply(null,y)})).then(P).then((function(y){return $.data=y,$.resolved=!0,$.resolveFn=null,ge.traceResolvableResolved($,_),$.data}))},a.prototype.get=function(y,_){return this.promise||this.resolve(y,_)},a.prototype.toString=function(){return"Resolvable(token: "+Bt(this.token)+", requires: ["+this.deps.map(Bt)+"])"},a.prototype.clone=function(){return new a(this)},a.fromData=function(y,_){return new a(y,(function(){return _}),null,null,_)},a}(),xe=Te.when,Fe=[xe.EAGER,xe.LAZY],Ue=[xe.EAGER],Ne="Native Injector",Le=function(){function t(y){this._path=y}return t.prototype.getTokens=function(){return this._path.reduce((function(y,_){return y.concat(_.resolvables.map((function(y){return y.token})))}),[]).reduce(yt,[])},t.prototype.getResolvable=function(y){return Ct(this._path.map((function(y){return y.resolvables})).reduce(vt,[]).filter((function(_){return _.token===y})))},t.prototype.getPolicy=function(y){var _=this.findNode(y);return y.getPolicy(_.state)},t.prototype.subContext=function(y){return new t(Pe.subPath(this._path,(function(_){return _.state===y})))},t.prototype.addResolvables=function(y,_){var $=st(this._path,C("state",_)),b=y.map((function(y){return y.token}));$.resolvables=$.resolvables.filter((function(y){return-1===b.indexOf(y.token)})).concat(y)},t.prototype.resolvePath=function(y,_){var $=this;void 0===y&&(y="LAZY");var b=(St(Fe,y)?y:"LAZY")===Te.when.EAGER?Ue:Fe;ge.traceResolvePath(this._path,y,_);var f=function(y,_){return function(b){return St(y,$.getPolicy(b)[_])}},E=this._path.reduce((function(y,E){var C=E.resolvables.filter(f(b,"when")),P=C.filter(f(["NOWAIT"],"async")),T=C.filter(l(f(["NOWAIT"],"async"))),O=$.subContext(E.state),a=function(y){return y.get(O,_).then((function(_){return{token:y.token,value:_}}))};return P.forEach(a),y.concat(T.map(a))}),[]);return N.$q.all(E)},t.prototype.injector=function(){return this._injector||(this._injector=new Be(this))},t.prototype.findNode=function(y){return st(this._path,(function(_){return St(_.resolvables,y)}))},t.prototype.getDependencies=function(y){var _=this,$=this.findNode(y),b=(Pe.subPath(this._path,(function(y){return y===$}))||this._path).reduce((function(y,_){return y.concat(_.resolvables)}),[]).filter((function(_){return _!==y}));return y.deps.map((function(y){var $=b.filter((function(_){return _.token===y}));if($.length)return Ct($);var E=_.injector().getNative(y);if(T(E))throw new Error("Could not find Dependency Injection token: "+Bt(y));return new Oe(y,(function(){return E}),[],E)}))},t}(),Be=function(){function t(y){this.context=y,this.native=this.get(Ne)||N.$injector}return t.prototype.get=function(y){var _=this.context.getResolvable(y);if(_){if("NOWAIT"===this.context.getPolicy(_).async)return _.get(this.context);if(!_.resolved)throw new Error("Resolvable async .get() not complete:"+Bt(_.token));return _.data}return this.getNative(y)},t.prototype.getAsync=function(y){var _=this.context.getResolvable(y);return _?_.get(this.context):N.$q.when(this.native.get(y))},t.prototype.getNative=function(y){return this.native&&this.native.get(y)},t}();function je(y){return y.name}function Ve(y){return y.self.$$state=function(){return y},y.self}function Ie(y){return y.parent&&y.parent.data&&(y.data=y.self.data=z(y.parent.data,y.data)),y.data}var He=function(y,_){return function($){var b=$.self;b&&b.url&&b.name&&b.name.match(/\.\*\*$/)&&(b.url+="{remainder:any}");var E=$.parent,C=function(y){if(!q(y))return!1;var _="^"===y.charAt(0);return{val:_?y.substring(1):y,root:_}}(b.url),P=C?y.compile(C.val,{state:b}):b.url;if(!P)return null;if(!y.isMatcher(P))throw new Error("Invalid url '"+P+"' in state '"+$+"'");return C&&C.root?P:(E&&E.navigable||_()).url.append(P)}};function Ae(y){return y.parent?y.parent.path.concat(y):[y]}function De(y){var _=y.parent?ct({},y.parent.includes):{};return _[y.name]=!0,_}function qe(y){var _,$,n=function(y){return y.provide||y.token},b=m([[w("resolveFn"),function(y){return new Oe(n(y),y.resolveFn,y.deps,y.policy)}],[w("useFactory"),function(y){return new Oe(n(y),y.useFactory,y.deps||y.dependencies,y.policy)}],[w("useClass"),function(y){return new Oe(n(y),(function(){return new y.useClass}),[],y.policy)}],[w("useValue"),function(y){return new Oe(n(y),(function(){return y.useValue}),[],y.policy,y.useValue)}],[w("useExisting"),function(y){return new Oe(n(y),B,[y.useExisting],y.policy)}]]),E=m([[s(w("val"),q),function(y){return new Oe(y.token,B,[y.val],y.policy)}],[s(w("val"),F),function(y){return new Oe(y.token,Ct(y.val),y.val.slice(0,-1),y.policy)}],[s(w("val"),A),function(y){return new Oe(y.token,y.val,(_=y.val,$=N.$injector,_.$inject||$&&$.annotate(_,$.strictDi)||"deferred"),y.policy);var _,$}]]),C=m([[p(Oe),function(y){return y}],[function(y){return!(!y.token||!y.resolveFn)},b],[function(y){return!(!y.provide&&!y.token||!(y.useValue||y.useFactory||y.useExisting||y.useClass))},b],[function(y){return!!(y&&y.val&&(q(y.val)||F(y.val)||A(y.val)))},E],[v(!0),function(y){throw new Error("Invalid resolve value: "+Bt(y))}]]),P=y.resolve;return(F(P)?P:(_=P,$=y.resolvePolicy||{},Object.keys(_||{}).map((function(y){return{token:y,val:_[y],deps:void 0,policy:$[y]}})))).map(C)}var Me,Ge,We=function(){function t(y,_){this.matcher=y;var $,b,E=this,o=function(){return y.find("")},a=function(y){return""===y.name};this.builders={name:[je],self:[Ve],parent:[function(_){return a(_)?null:y.find(E.parentName(_))||o()}],data:[Ie],url:[He(_,o)],navigable:[(b=a,function(y){return!b(y)&&y.url?y:y.parent?y.parent.navigable:null})],params:[($=_.paramFactory,function(y){var _=y.url&&y.url.parameters({inherit:!1})||[],b=lt(It(ot(y.params||{},_.map(w("id"))),(function(_,b){return $.fromConfig(b,null,y.self)})));return _.concat(b).map((function(y){return[y.id,y]})).reduce(Et,{})})],views:[],path:[Ae],includes:[De],resolvables:[qe]}}return t.prototype.builder=function(y,_){var $=this.builders,b=$[y]||[];return q(y)&&!O(_)?1<b.length?b:b[0]:q(y)&&A(_)?($[y]=b,$[y].push(_),function(){return $[y].splice($[y].indexOf(_,1))&&null}):void 0},t.prototype.build=function(y){var _=this.matcher,$=this.builders,b=this.parentName(y);if(b&&!_.find(b,void 0,!1))return null;for(var E in $)if($.hasOwnProperty(E)){var C=$[E].reduce((function(y,_){return function($){return _($,y)}}),G);y[E]=C(y)}return y},t.prototype.parentName=function(y){var _=y.name||"",$=_.split(".");if("**"===$.pop()&&$.pop(),$.length){if(y.parent)throw new Error("States that specify the 'parent:' property should not have a '.' in their name ("+_+")");return $.join(".")}return y.parent?q(y.parent)?y.parent:y.parent.name:""},t.prototype.name=function(y){var _=y.name;if(-1!==_.indexOf(".")||!y.parent)return _;var $=q(y.parent)?y.parent:y.parent.name;return $?$+"."+_:_},t}(),ze=function(){function r(y){return r.create(y||{})}return r.create=function(y){y=r.isStateClass(y)?new y:y;var _=z(z(y,r.prototype));return y.$$state=function(){return _},_.self=y,_.__stateObjectCache={nameGlob:Mt.fromString(_.name)},_},r.prototype.is=function(y){return this===y||this.self===y||this.fqn()===y},r.prototype.fqn=function(){if(!(this.parent&&this.parent instanceof this.constructor))return this.name;var y=this.parent.fqn();return y?y+"."+this.name:this.name},r.prototype.root=function(){return this.parent&&this.parent.root()||this},r.prototype.parameters=function(y){return((y=et(y,{inherit:!0,matchingKeys:null})).inherit&&this.parent&&this.parent.parameters()||[]).concat(lt(this.params)).filter((function(_){return!y.matchingKeys||y.matchingKeys.hasOwnProperty(_.id)}))},r.prototype.parameter=function(y,_){return void 0===_&&(_={}),this.url&&this.url.parameter(y,_)||st(lt(this.params),C("id",y))||_.inherit&&this.parent&&this.parent.parameter(y)},r.prototype.toString=function(){return this.fqn()},r.isStateClass=function(y){return A(y)&&!0===y.__uiRouterState},r.isState=function(y){return k(y.__stateObjectCache)},r}(),Qe=function(){function t(y){this._states=y}return t.prototype.isRelative=function(y){return 0===(y=y||"").indexOf(".")||0===y.indexOf("^")},t.prototype.find=function(y,_,$){if(void 0===$&&($=!0),y||""===y){var b=q(y),E=b?y:y.name;this.isRelative(E)&&(E=this.resolvePath(E,_));var C=this._states[E];if(C&&(b||!(b||C!==y&&C.self!==y)))return C;if(b&&$){var P=lt(this._states).filter((function(y){return y.__stateObjectCache.nameGlob&&y.__stateObjectCache.nameGlob.matches(E)}));return 1<P.length&&console.log("stateMatcher.find: Found multiple matches for "+E+" using glob: ",P.map((function(y){return y.name}))),P[0]}}},t.prototype.resolvePath=function(y,_){if(!_)throw new Error("No reference point given for path '"+y+"'");for(var $=this.find(_),b=y.split("."),E=b.length,C=0,P=$;C<E;C++)if(""!==b[C]||0!==C){if("^"!==b[C])break;if(!P.parent)throw new Error("Path '"+y+"' not valid for state '"+$.name+"'");P=P.parent}else P=$;var T=b.slice(C).join(".");return P.name+(P.name&&T?".":"")+T},t}(),Ye=function(){function t(y,_,$,b){this.router=y,this.states=_,this.builder=$,this.listeners=b,this.queue=[]}return t.prototype.dispose=function(){this.queue=[]},t.prototype.register=function(y){var _=this.queue,$=ze.create(y),b=$.name;if(!q(b))throw new Error("State must have a valid name");if(this.states.hasOwnProperty(b)||St(_.map(w("name")),b))throw new Error("State '"+b+"' is already defined");return _.push($),this.flush(),$},t.prototype.flush=function(){for(var y=this,_=this.queue,$=this.states,b=this.builder,E=[],C=[],P={},u=function(_){return y.states.hasOwnProperty(_)&&y.states[_]},s=function(){E.length&&y.listeners.forEach((function(y){return y("registered",E.map((function(y){return y.self})))}))};0<_.length;){var T=_.shift(),O=T.name,I=b.build(T),A=C.indexOf(T);if(I){var D=u(O);if(D&&D.name===O)throw new Error("State '"+O+"' is already defined");var q=u(O+".**");q&&this.router.stateRegistry.deregister(q),$[O]=T,this.attachRoute(T),0<=A&&C.splice(A,1),E.push(T)}else{var F=P[O];if(P[O]=_.length,0<=A&&F===_.length)return _.push(T),s(),$;A<0&&C.push(T),_.push(T)}}return s(),$},t.prototype.attachRoute=function(y){if(!y.abstract&&y.url){var _=this.router.urlService.rules;_.rule(_.urlRuleFactory.create(y))}},t}(),Xe=function(){function t(y){this.router=y,this.states={},this.listeners=[],this.matcher=new Qe(this.states),this.builder=new We(this.matcher,y.urlMatcherFactory),this.stateQueue=new Ye(y,this.states,this.builder,this.listeners),this._registerRoot()}return t.prototype._registerRoot=function(){(this._root=this.stateQueue.register({name:"",url:"^",views:null,params:{"#":{value:null,type:"hash",dynamic:!0}},abstract:!0})).navigable=null},t.prototype.dispose=function(){var y=this;this.stateQueue.dispose(),this.listeners=[],this.get().forEach((function(_){return y.get(_)&&y.deregister(_)}))},t.prototype.onStatesChanged=function(y){return this.listeners.push(y),function(){Ot(this.listeners)(y)}.bind(this)},t.prototype.root=function(){return this._root},t.prototype.register=function(y){return this.stateQueue.register(y)},t.prototype._deregisterTree=function(y){var _=this,$=this.get().map((function(y){return y.$$state()})),i=function(y){var _=$.filter((function(_){return-1!==y.indexOf(_.parent)}));return 0===_.length?_:_.concat(i(_))},b=i([y]),E=[y].concat(b).reverse();return E.forEach((function(y){var $=_.router.urlService.rules;$.rules().filter(C("state",y)).forEach((function(y){return $.removeRule(y)})),delete _.states[y.name]})),E},t.prototype.deregister=function(y){var _=this.get(y);if(!_)throw new Error("Can't deregister state; not found: "+y);var $=this._deregisterTree(_.$$state());return this.listeners.forEach((function(y){return y("deregistered",$.map((function(y){return y.self})))})),$},t.prototype.get=function(y,_){var $=this;if(0===arguments.length)return Object.keys(this.states).map((function(y){return $.states[y].self}));var b=this.matcher.find(y,_);return b&&b.self||null},t.prototype.decorator=function(y,_){return this.builder.builder(y,_)},t}();(Me=y.TransitionHookPhase||(y.TransitionHookPhase={}))[Me.CREATE=0]="CREATE",Me[Me.BEFORE=1]="BEFORE",Me[Me.RUN=2]="RUN",Me[Me.SUCCESS=3]="SUCCESS",Me[Me.ERROR=4]="ERROR",(Ge=y.TransitionHookScope||(y.TransitionHookScope={}))[Ge.TRANSITION=0]="TRANSITION",Ge[Ge.STATE=1]="STATE";var Ze={current:G,transition:null,traceData:{},bind:null},er=function(){function o(_,$,b,E){var C=this;this.transition=_,this.stateContext=$,this.registeredHook=b,this.options=E,this.isSuperseded=function(){return C.type.hookPhase===y.TransitionHookPhase.RUN&&!C.options.transition.isActive()},this.options=et(E,Ze),this.type=b.eventType}return o.chain=function(y,_){return y.reduce((function(y,_){return y.then((function(){return _.invokeHook()}))}),_||N.$q.when())},o.invokeHooks=function(y,_){for(var $=0;$<y.length;$++){var b=y[$].invokeHook();if(U(b)){var E=y.slice($+1);return o.chain(E,b).then(_)}}return _()},o.runAllHooks=function(y){y.forEach((function(y){return y.invokeHook()}))},o.prototype.logError=function(y){this.transition.router.stateService.defaultErrorHandler()(y)},o.prototype.invokeHook=function(){var y=this,_=this.registeredHook;if(!_._deregistered){var $=this.getNotCurrentRejection();if($)return $;var b=this.options;ge.traceHookInvocation(this,this.transition,b);var i=function($){return _.eventType.getErrorHandler(y)($)},o=function($){return _.eventType.getResultHandler(y)($)};try{var E=_.callback.call(b.bind,y.transition,y.stateContext);return!this.type.synchronous&&U(E)?E.catch((function(y){return Qt.normalize(y).toPromise()})).then(o,i):o(E)}catch($){return i(Qt.normalize($))}finally{_.invokeLimit&&++_.invokeCount>=_.invokeLimit&&_.deregister()}}},o.prototype.handleHookResult=function(y){var _=this;return this.getNotCurrentRejection()||(U(y)?y.then((function(y){return _.handleHookResult(y)})):(ge.traceHookResult(y,this.transition,this.options),!1===y?Qt.aborted("Hook aborted transition").toPromise():p(Ce)(y)?Qt.redirected(y).toPromise():void 0))},o.prototype.getNotCurrentRejection=function(){var y=this.transition.router;return y._disposed?Qt.aborted("UIRouter instance #"+y.$id+" has been stopped (disposed)").toPromise():this.transition._aborted?Qt.aborted().toPromise():this.isSuperseded()?Qt.superseded(this.options.current()).toPromise():void 0},o.prototype.toString=function(){var y=this.options,_=this.registeredHook;return(R("traceData.hookType")(y)||"internal")+" context: "+(R("traceData.context.state.name")(y)||R("traceData.context")(y)||"unknown")+", "+Dt(200,Nt(_.callback))},o.HANDLE_RESULT=function(y){return function(_){return y.handleHookResult(_)}},o.LOG_REJECTED_RESULT=function(y){return function(_){U(_)&&_.catch((function(_){return y.logError(Qt.normalize(_))}))}},o.LOG_ERROR=function(y){return function(_){return y.logError(_)}},o.REJECT_ERROR=function(y){return function(y){return jt(y)}},o.THROW_ERROR=function(y){return function(y){throw y}},o}();function Je(y,_){var $=q(_)?[_]:_;return!!(A($)?$:function(y){for(var _=$,b=0;b<_.length;b++){var E=new Mt(_[b]);if(E&&E.matches(y.name)||!E&&_[b]===y.name)return!0}return!1})(y)}var rr=function(){function t(y,_,$,b,E,C){void 0===C&&(C={}),this.tranSvc=y,this.eventType=_,this.callback=$,this.matchCriteria=b,this.removeHookFromRegistry=E,this.invokeCount=0,this._deregistered=!1,this.priority=C.priority||0,this.bind=C.bind||null,this.invokeLimit=C.invokeLimit}return t.prototype._matchingNodes=function(y,_){if(!0===_)return y;var $=y.filter((function(y){return Je(y.state,_)}));return $.length?$:null},t.prototype._getDefaultMatchCriteria=function(){return It(this.tranSvc._pluginapi._getPathTypes(),(function(){return!0}))},t.prototype._getMatchingNodes=function(_){var $=this,b=ct(this._getDefaultMatchCriteria(),this.matchCriteria);return lt(this.tranSvc._pluginapi._getPathTypes()).reduce((function(E,C){var P=C.scope===y.TransitionHookScope.STATE,T=_[C.name]||[],O=P?T:[Ct(T)];return E[C.name]=$._matchingNodes(O,b[C.name]),E}),{})},t.prototype.matches=function(y){var _=this._getMatchingNodes(y);return lt(_).every(B)?_:null},t.prototype.deregister=function(){this.removeHookFromRegistry(this),this._deregistered=!0},t}();function Ke(y,_,$){var b=(y._registeredHooks=y._registeredHooks||{})[$.name]=[],E=Ot(b);function e(y,C,P){void 0===P&&(P={});var T=new rr(_,$,C,y,E,P);return b.push(T),T.deregister.bind(T)}return y[$.name]=e}var nr=function(){function t(y){this.transition=y}return t.prototype.buildHooksForPhase=function(y){var _=this;return this.transition.router.transitionService._pluginapi._getEvents(y).map((function(y){return _.buildHooks(y)})).reduce(vt,[]).filter(B)},t.prototype.buildHooks=function(_){var $=this.transition,b=$.treeChanges(),E=this.getMatchingHooks(_,b);if(!E)return[];var C={transition:$,current:$.options().current};return E.map((function(E){return E.matches(b)[_.criteriaMatchPath.name].map((function(b){var P=ct({bind:E.bind,traceData:{hookType:_.name,context:b}},C),T=_.criteriaMatchPath.scope===y.TransitionHookScope.STATE?b.state.self:null,O=new er($,T,E,P);return{hook:E,node:b,transitionHook:O}}))})).reduce(vt,[]).sort(function(y){return void 0===y&&(y=!1),function(_,$){var b=y?-1:1,E=(_.node.state.path.length-$.node.state.path.length)*b;return 0!==E?E:$.hook.priority-_.hook.priority}}(_.reverseSort)).map((function(y){return y.transitionHook}))},t.prototype.getMatchingHooks=function(_,$){var b=_.hookPhase===y.TransitionHookPhase.CREATE,E=this.transition.router.transitionService;return(b?[E]:[this.transition,E]).map((function(y){return y.getHooks(_.name)})).filter(At(F,"broken event named: "+_.name)).reduce(vt,[]).filter((function(y){return y.matches($)}))},t}(),ir=w("self"),or=function(){function e(_,$,b){var E=this;if(this._deferred=N.$q.defer(),this.promise=this._deferred.promise,this._registeredHooks={},this._hookBuilder=new nr(this),this.isActive=function(){return E.router.globals.transition===E},this.router=b,!(this._targetState=$).valid())throw new Error($.error());this._options=ct({current:v(this)},$.options()),this.$id=b.transitionService._transitionCount++;var C=Pe.buildToPath(_,$);this._treeChanges=Pe.treeChanges(_,C,this._options.reloadState),this.createTransitionHookRegFns();var P=this._hookBuilder.buildHooksForPhase(y.TransitionHookPhase.CREATE);er.invokeHooks(P,(function(){return null})),this.applyViewConfigs(b)}return e.prototype.onBefore=function(y,_,$){},e.prototype.onStart=function(y,_,$){},e.prototype.onExit=function(y,_,$){},e.prototype.onRetain=function(y,_,$){},e.prototype.onEnter=function(y,_,$){},e.prototype.onFinish=function(y,_,$){},e.prototype.onSuccess=function(y,_,$){},e.prototype.onError=function(y,_,$){},e.prototype.createTransitionHookRegFns=function(){var _=this;this.router.transitionService._pluginapi._getEvents().filter((function(_){return _.hookPhase!==y.TransitionHookPhase.CREATE})).forEach((function(y){return Ke(_,_.router.transitionService,y)}))},e.prototype.getHooks=function(y){return this._registeredHooks[y]},e.prototype.applyViewConfigs=function(y){var _=this._treeChanges.entering.map((function(y){return y.state}));Pe.applyViewConfigs(y.transitionService.$view,this._treeChanges.to,_)},e.prototype.$from=function(){return Ct(this._treeChanges.from).state},e.prototype.$to=function(){return Ct(this._treeChanges.to).state},e.prototype.from=function(){return this.$from().self},e.prototype.to=function(){return this.$to().self},e.prototype.targetState=function(){return this._targetState},e.prototype.is=function(y){return y instanceof e?this.is({to:y.$to().name,from:y.$from().name}):!(y.to&&!Je(this.$to(),y.to)||y.from&&!Je(this.$from(),y.from))},e.prototype.params=function(y){return void 0===y&&(y="to"),Object.freeze(this._treeChanges[y].map(w("paramValues")).reduce(rt,{}))},e.prototype.paramsChanged=function(){var y=this.params("from"),_=this.params("to"),$=[].concat(this._treeChanges.to).concat(this._treeChanges.from).map((function(y){return y.paramSchema})).reduce(dt,[]).reduce(yt,[]);return Se.changed($,y,_).reduce((function(y,$){return y[$.id]=_[$.id],y}),{})},e.prototype.injector=function(y,_){void 0===_&&(_="to");var $=this._treeChanges[_];return y&&($=Pe.subPath($,(function(_){return _.state===y||_.state.name===y}))),new Le($).injector()},e.prototype.getResolveTokens=function(y){return void 0===y&&(y="to"),new Le(this._treeChanges[y]).getTokens()},e.prototype.addResolvable=function(y,_){void 0===_&&(_=""),y=p(Oe)(y)?y:new Oe(y);var $="string"==typeof _?_:_.name,b=this._treeChanges.to,E=st(b,(function(y){return y.state.name===$}));new Le(b).addResolvables([y],E.state)},e.prototype.redirectedFrom=function(){return this._options.redirectedFrom||null},e.prototype.originalTransition=function(){var y=this.redirectedFrom();return y&&y.originalTransition()||this},e.prototype.options=function(){return this._options},e.prototype.entering=function(){return ft(this._treeChanges.entering,w("state")).map(ir)},e.prototype.exiting=function(){return ft(this._treeChanges.exiting,w("state")).map(ir).reverse()},e.prototype.retained=function(){return ft(this._treeChanges.retained,w("state")).map(ir)},e.prototype.views=function(y,_){void 0===y&&(y="entering");var $=this._treeChanges[y];return($=_?$.filter(C("state",_)):$).map(w("views")).filter(B).reduce(vt,[])},e.prototype.treeChanges=function(y){return y?this._treeChanges[y]:this._treeChanges},e.prototype.redirect=function(y){for(var _=1,$=this;null!=($=$.redirectedFrom());)if(20<++_)throw new Error("Too many consecutive Transition redirects (20+)");var b={redirectedFrom:this,source:"redirect"};"url"===this.options().source&&!1!==y.options().location&&(b.location="replace");var E=ct({},this.options(),y.options(),b);y=y.withOptions(E,!0);var C,P=this.router.transitionService.create(this._treeChanges.from,y),T=this._treeChanges.entering,O=P._treeChanges.entering;return Pe.matching(O,T,Pe.nonDynamicParams).filter(l((C=y.options().reloadState,function(y){return C&&y.state.includes[C.name]}))).forEach((function(y,_){y.resolvables=T[_].resolvables})),P},e.prototype._changedParams=function(){var y=this._treeChanges;if(!(this._options.reload||y.exiting.length||y.entering.length||y.to.length!==y.from.length||Rt(y.to,y.from).map((function(y){return y[0].state!==y[1].state})).reduce(pt,!1))){var _=y.to.map((function(y){return y.paramSchema})),$=[y.to,y.from].map((function(y){return y.map((function(y){return y.paramValues}))}));return Rt(_,$[0],$[1]).map((function(y){var _=y[0],$=y[1],b=y[2];return Se.changed(_,$,b)})).reduce(vt,[])}},e.prototype.dynamic=function(){var y=this._changedParams();return!!y&&y.map((function(y){return y.dynamic})).reduce(pt,!1)},e.prototype.ignored=function(){return!!this._ignoredReason()},e.prototype._ignoredReason=function(){var y=this.router.globals.transition,_=this._options.reloadState,e=function(y,$){if(y.length!==$.length)return!1;var b=Pe.matching(y,$);return y.length===b.filter((function(y){return!_||!y.state.includes[_.name]})).length},$=this.treeChanges(),b=y&&y.treeChanges();return b&&e(b.to,$.to)&&e(b.exiting,$.exiting)?"SameAsPending":0===$.exiting.length&&0===$.entering.length&&e($.from,$.to)?"SameAsCurrent":void 0},e.prototype.run=function(){var _=this,$=er.runAllHooks,n=function(y){return _._hookBuilder.buildHooksForPhase(y)},b=n(y.TransitionHookPhase.BEFORE);return er.invokeHooks(b,(function(){var y=_.router.globals;return y.lastStartedTransitionId=_.$id,y.transition=_,y.transitionHistory.enqueue(_),ge.traceTransitionStart(_),N.$q.when(void 0)})).then((function(){var _=n(y.TransitionHookPhase.RUN);return er.invokeHooks(_,(function(){return N.$q.when(void 0)}))})).then((function(){ge.traceSuccess(_.$to(),_),_.success=!0,_._deferred.resolve(_.to()),$(n(y.TransitionHookPhase.SUCCESS))}),(function(b){ge.traceError(b,_),_.success=!1,_._deferred.reject(b),_._error=b,$(n(y.TransitionHookPhase.ERROR))})),this.promise},e.prototype.valid=function(){return!this.error()||void 0!==this.success},e.prototype.abort=function(){T(this.success)&&(this._aborted=!0)},e.prototype.error=function(){var y=this.$to();if(y.self.abstract)return Qt.invalid("Cannot transition to abstract state '"+y.name+"'");var _=y.parameters(),$=this.params(),b=_.filter((function(y){return!y.validates($[y.id])}));if(b.length){var E=b.map((function(y){return"["+y.id+":"+Bt($[y.id])+"]"})).join(", "),C="The following parameter values are not valid for state '"+y.name+"': "+E;return Qt.invalid(C)}return!1===this.success?this._error:void 0},e.prototype.toString=function(){var y=this.from(),_=this.to(),r=function(y){return null!==y["#"]&&void 0!==y["#"]?y:ot(y,["#"])};return"Transition#"+this.$id+"( '"+(k(y)?y.name:y)+"'"+Bt(r(this._treeChanges.from.map(w("paramValues")).reduce(rt,{})))+" -> "+(this.valid()?"":"(X) ")+"'"+(k(_)?_.name:_)+"'"+Bt(r(this.params()))+" )"},e.diToken=e}();function tr(y,_){var $=["",""],b=y.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!_)return b;switch(_.squash){case!1:$=["(",")"+(_.isOptional?"?":"")];break;case!0:b=b.replace(/\/$/,""),$=["(?:/(",")|/)?"];break;default:$=["("+_.squash+"|",")?"]}return b+$[0]+_.type.pattern.source+$[1]}var ar,ur=Zt("/"),cr={state:{params:{}},strict:!0,caseInsensitive:!0},fr=function(){function m(y,_,$,b){var E=this;this._cache={path:[this]},this._children=[],this._params=[],this._segments=[],this._compiled=[],this.config=b=et(b,cr),this.pattern=y;for(var P,T,O,I=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,A=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,D=[],q=0,h=function(_){if(!m.nameValidator.test(_))throw new Error("Invalid parameter name '"+_+"' in pattern '"+y+"'");if(st(E._params,C("id",_)))throw new Error("Duplicate parameter name '"+_+"' in pattern '"+y+"'")},p=function($,b){var C,P=$[2]||$[3],T=b?$[4]:$[4]||("*"===$[1]?"[\\s\\S]*":null);return{id:P,regexp:T,segment:y.substring(q,$.index),type:T?_.type(T)||(C=T,z(_.type(b?"query":"path"),{pattern:new RegExp(C,E.config.caseInsensitive?"i":void 0)})):null}};(P=I.exec(y))&&!(0<=(T=p(P,!1)).segment.indexOf("?"));)h(T.id),this._params.push($.fromPath(T.id,T.type,b.state)),this._segments.push(T.segment),D.push([T.segment,Ct(this._params)]),q=I.lastIndex;var F=(O=y.substring(q)).indexOf("?");if(0<=F){var U=O.substring(F);if(O=O.substring(0,F),0<U.length)for(q=0;P=A.exec(U);)h((T=p(P,!0)).id),this._params.push($.fromSearch(T.id,T.type,b.state)),q=I.lastIndex}this._segments.push(O),this._compiled=D.map((function(y){return tr.apply(null,y)})).concat(tr(O))}return m.encodeDashes=function(y){return encodeURIComponent(y).replace(/-/g,(function(y){return"%5C%"+y.charCodeAt(0).toString(16).toUpperCase()}))},m.pathSegmentsAndParams=function(_){return Rt(_._segments,_._params.filter((function(_){return _.location===y.DefType.PATH})).concat(void 0)).reduce(vt,[]).filter((function(y){return""!==y&&O(y)}))},m.queryParams=function(_){return _._params.filter((function(_){return _.location===y.DefType.SEARCH}))},m.compare=function(y,_){var r=function(y){return y._cache.weights=y._cache.weights||(_=y,_._cache.segments=_._cache.segments||_._cache.path.map(m.pathSegmentsAndParams).reduce(vt,[]).reduce(Xt,[]).map((function(y){return q(y)?ur(y):y})).reduce(vt,[])).map((function(y){return"/"===y?1:q(y)?2:y instanceof Se?3:void 0}));var _},$=r(y),b=r(_);!function(y,_,$){for(var b=Math.max(y.length,_.length);y.length<b;)y.push($);for(;_.length<b;)_.push($)}($,b,0);var E,C,P=Rt($,b);for(C=0;C<P.length;C++)if(0!=(E=P[C][0]-P[C][1]))return E;return 0},m.prototype.append=function(y){return this._children.push(y),y._cache={path:this._cache.path.concat(y),parent:this,pattern:null},y},m.prototype.isRoot=function(){return this._cache.path[0]===this},m.prototype.toString=function(){return this.pattern},m.prototype.exec=function(y,_,$,b){var E=this;void 0===_&&(_={}),void 0===b&&(b={});var C,P,T,I=(C=this._cache,P="pattern",T=function(){return new RegExp(["^",gt(E._cache.path.map(w("_compiled"))).join(""),!1===E.config.strict?"/?":"","$"].join(""),E.config.caseInsensitive?"i":void 0)},C[P]=C[P]||T()).exec(y);if(!I)return null;var A,D=this.parameters(),q=D.filter((function(y){return!y.isSearch()})),F=D.filter((function(y){return y.isSearch()})),U=this._cache.path.map((function(y){return y._segments.length-1})).reduce((function(y,_){return y+_})),N={};if(U!==I.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");for(var L=0;L<U;L++){for(var M=q[L],J=I[L+1],K=0;K<M.replace.length;K++)M.replace[K].from===J&&(J=M.replace[K].to);J&&!0===M.array&&(J=ft(ft((A=function(y){return y.split("").reverse().join("")})(J).split(/-(?!\\)/),A),(function(y){return y.replace(/\\-/g,"-")})).reverse()),O(J)&&(J=M.type.decode(J)),N[M.id]=M.value(J)}return F.forEach((function(y){for(var $=_[y.id],b=0;b<y.replace.length;b++)y.replace[b].from===$&&($=y.replace[b].to);O($)&&($=y.type.decode($)),N[y.id]=y.value($)})),$&&(N["#"]=$),N},m.prototype.parameters=function(y){return void 0===y&&(y={}),!1===y.inherit?this._params:gt(this._cache.path.map((function(y){return y._params})))},m.prototype.parameter=function(y,_){var $=this;void 0===_&&(_={});var b=this._cache.parent;return function(){for(var _=0,b=$._params;_<b.length;_++){var E=b[_];if(E.id===y)return E}}()||!1!==_.inherit&&b&&b.parameter(y,_)||null},m.prototype.validates=function(y){return y=y||{},this.parameters().filter((function(_){return y.hasOwnProperty(_.id)})).map((function(_){return b=y[($=_).id],!$||$.validates(b);var $,b})).reduce(ht,!0)},m.prototype.format=function(y){void 0===y&&(y={});var _=this._cache.path,$=_.map(m.pathSegmentsAndParams).reduce(vt,[]).map((function(y){return q(y)?y:n(y)})),b=_.map(m.queryParams).reduce(vt,[]).map(n);if($.concat(b).filter((function(y){return!1===y.isValid})).length)return null;function n(_){var $=_.value(y[_.id]),b=_.validates($),E=_.isDefaultValue($),C=!!E&&_.squash,P=_.type.encode($);return{param:_,value:$,isValid:b,isDefaultValue:E,squash:C,encoded:P}}var E=$.reduce((function(y,_){if(q(_))return y+_;var $=_.squash,b=_.encoded,E=_.param;return!0===$?y.match(/\/$/)?y.slice(0,-1):y:q($)?y+$:!1!==$||null==b?y:F(b)?y+ft(b,m.encodeDashes).join("-"):E.raw?y+b:y+encodeURIComponent(b)}),""),C=b.map((function(y){var _=y.param,$=y.squash,b=y.encoded,E=y.isDefaultValue;if(!(null==b||E&&!1!==$)&&(F(b)||(b=[b]),0!==b.length))return _.raw||(b=ft(b,encodeURIComponent)),b.map((function(y){return _.id+"="+y}))})).filter(B).reduce(vt,[]).join("&");return E+(C?"?"+C:"")+(y["#"]?"#"+y["#"]:"")},m.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/,m}(),hr=Object.assign||function(y){for(var _,$=1,b=arguments.length;$<b;$++)for(var E in _=arguments[$])Object.prototype.hasOwnProperty.call(_,E)&&(y[E]=_[E]);return y},lr=function(){function t(y){this.router=y}return t.prototype.fromConfig=function(_,$,b){return new Se(_,$,y.DefType.CONFIG,this.router.urlService.config,b)},t.prototype.fromPath=function(_,$,b){return new Se(_,$,y.DefType.PATH,this.router.urlService.config,b)},t.prototype.fromSearch=function(_,$,b){return new Se(_,$,y.DefType.SEARCH,this.router.urlService.config,b)},t}(),vr=function(){function t(y){var _=this;this.router=y,this.paramFactory=new lr(this.router),this.caseInsensitive=function(y){return _.router.urlService.config.caseInsensitive(y)},this.defaultSquashPolicy=function(y){return _.router.urlService.config.defaultSquashPolicy(y)},this.strictMode=function(y){return _.router.urlService.config.strictMode(y)},this.type=function(y,$,b){return _.router.urlService.config.type(y,$,b)||_},ct(this,{UrlMatcher:fr,Param:Se})}return t.prototype.compile=function(y,_){var $=this.router.urlService.config,b=_&&!_.state&&_.params;_=b?hr({state:{params:b}},_):_;var E={strict:$._isStrictMode,caseInsensitive:$._isCaseInsensitive};return new fr(y,$.paramTypes,this.paramFactory,ct(E,_))},t.prototype.isMatcher=function(y){if(!k(y))return!1;var _=!0;return Z(fr.prototype,(function($,b){A($)&&(_=_&&O(y[b])&&A(y[b]))})),_},t.prototype.$get=function(){var y=this.router.urlService.config;return y.paramTypes.enqueue=!1,y.paramTypes._flushTypeQueue(),this},t}(),dr=function(){function t(y){this.router=y}return t.prototype.compile=function(y){return this.router.urlMatcherFactory.compile(y)},t.prototype.create=function(y,_){var $=this,b=ze.isState,E=m([[q,function(y){return E($.compile(y))}],[p(fr),function(y){return $.fromUrlMatcher(y,_)}],[b,function(y){return $.fromState(y,$.router)}],[p(RegExp),function(y){return $.fromRegExp(y,_)}],[A,function(y){return new sr(y,_)}]]),C=E(y);if(!C)throw new Error("invalid 'what' in when()");return C},t.prototype.fromUrlMatcher=function(y,_){var $=_;q(_)&&(_=this.router.urlMatcherFactory.compile(_)),p(fr)(_)&&($=function(y){return _.format(y)});var b={urlMatcher:y,matchPriority:function(_){var $=y.parameters().filter((function(y){return y.isOptional}));return $.length?$.filter((function(y){return _[y.id]})).length/$.length:1e-6},type:"URLMATCHER"};return ct(new sr((function(_){var $=y.exec(_.path,_.search,_.hash);return y.validates($)&&$}),$),b)},t.prototype.fromState=function(y,_){var $={state:y,type:"STATE"};return ct(this.fromUrlMatcher(y.url,(function($){var b=_.stateService,E=_.globals;b.href(y,$)!==b.href(E.current,E.params)&&b.transitionTo(y,$,{inherit:!0,source:"url"})})),$)},t.prototype.fromRegExp=function(y,_){if(y.global||y.sticky)throw new Error("Rule RegExp must not be global or sticky");var $=q(_)?function(y){return _.replace(/\$(\$|\d{1,2})/,(function(_,$){return y["$"===$?0:Number($)]}))}:_,b={regexp:y,type:"REGEXP"};return ct(new sr((function(_){return y.exec(_.path)}),$),b)},t.isUrlRule=function(y){return y&&["type","match","handler"].every((function(_){return O(y[_])}))},t}(),sr=function(y,_){var $=this;this.match=y,this.type="RAW",this.matchPriority=function(y){return 0-$.$id},this.handler=_||B},mr=function(){function t(y){var _=this;this.router=y,this.sync=function(y){return _.router.urlService.sync(y)},this.listen=function(y){return _.router.urlService.listen(y)},this.deferIntercept=function(y){return _.router.urlService.deferIntercept(y)},this.match=function(y){return _.router.urlService.match(y)},this.initial=function(y){return _.router.urlService.rules.initial(y)},this.otherwise=function(y){return _.router.urlService.rules.otherwise(y)},this.removeRule=function(y){return _.router.urlService.rules.removeRule(y)},this.rule=function(y){return _.router.urlService.rules.rule(y)},this.rules=function(){return _.router.urlService.rules.rules()},this.sort=function(y){return _.router.urlService.rules.sort(y)},this.when=function(y,$,b){return _.router.urlService.rules.when(y,$,b)},this.urlRuleFactory=new dr(y)}return t.prototype.update=function(y){var _=this.router.locationService;y?this.location=_.url():_.url()!==this.location&&_.url(this.location,!0)},t.prototype.push=function(y,_,$){var b=$&&!!$.replace;this.router.urlService.url(y.format(_||{}),b)},t.prototype.href=function(y,_,$){var b=y.format(_);if(null==b)return null;$=$||{absolute:!1};var E,C,P,T,O=this.router.urlService.config,I=O.html5Mode();if(I||null===b||(b="#"+O.hashPrefix()+b),E=b,C=I,P=$.absolute,b="/"===(T=O.baseHref())?E:C?zt(T)+E:P?T.slice(1)+E:E,!$.absolute||!b)return b;var A=!I&&b?"/":"",D=O.port(),q=80===D||443===D?"":":"+D;return[O.protocol(),"://",O.host(),q,A,b].join("")},Object.defineProperty(t.prototype,"interceptDeferred",{get:function(){return this.router.urlService.interceptDeferred},enumerable:!0,configurable:!0}),t}(),gr=function(){function s(y){var _=this;this.router=y,this._uiViews=[],this._viewConfigs=[],this._viewConfigFactories={},this._listeners=[],this._pluginapi={_rootViewContext:this._rootViewContext.bind(this),_viewConfigFactory:this._viewConfigFactory.bind(this),_registeredUIView:function(y){return st(_._uiViews,(function($){return _.router.$id+"."+$.id===y}))},_registeredUIViews:function(){return _._uiViews},_activeViewConfigs:function(){return _._viewConfigs},_onSync:function(y){return _._listeners.push(y),function(){return Ot(_._listeners,y)}}}}return s.normalizeUIViewTarget=function(y,_){void 0===_&&(_="");var $=_.split("@"),b=$[0]||"$default",E=q($[1])?$[1]:"^",C=/^(\^(?:\.\^)*)\.(.*$)/.exec(b);return C&&(E=C[1],b=C[2]),"!"===b.charAt(0)&&(b=b.substr(1),E=""),/^(\^(?:\.\^)*)$/.exec(E)?E=E.split(".").reduce((function(y,_){return y.parent}),y).name:"."===E&&(E=y.name),{uiViewName:b,uiViewContextAnchor:E}},s.prototype._rootViewContext=function(y){return this._rootContext=y||this._rootContext},s.prototype._viewConfigFactory=function(y,_){this._viewConfigFactories[y]=_},s.prototype.createViewConfig=function(y,_){var $=this._viewConfigFactories[_.$type];if(!$)throw new Error("ViewService: No view config factory registered for type "+_.$type);var b=$(y,_);return F(b)?b:[b]},s.prototype.deactivateViewConfig=function(y){ge.traceViewServiceEvent("<- Removing",y),Ot(this._viewConfigs,y)},s.prototype.activateViewConfig=function(y){ge.traceViewServiceEvent("-> Registering",y),this._viewConfigs.push(y)},s.prototype.sync=function(){var y=this,_=this._uiViews.map((function(y){return[y.fqn,y]})).reduce(Et,{});function i(y){for(var _=y.viewDecl.$context,$=0;++$&&_.parent;)_=_.parent;return $}var $=c((function(y,_,$,b){return _*(y($)-y(b))})),b=this._uiViews.sort($((function(y){var e=function(y){return y&&y.parent?e(y.parent)+1:1};return 1e4*y.fqn.split(".").length+e(y.creationContext)}),1)).map((function(b){var E=y._viewConfigs.filter(s.matches(_,b));return 1<E.length&&E.sort($(i,-1)),{uiView:b,viewConfig:E[0]}})),E=b.map((function(y){return y.viewConfig})),C=this._viewConfigs.filter((function(y){return!St(E,y)})).map((function(y){return{uiView:void 0,viewConfig:y}}));b.forEach((function(_){-1!==y._uiViews.indexOf(_.uiView)&&_.uiView.configUpdated(_.viewConfig)}));var P=b.concat(C);this._listeners.forEach((function(y){return y(P)})),ge.traceViewSync(P)},s.prototype.registerUIView=function(y){ge.traceViewServiceUIViewEvent("-> Registering",y);var _=this._uiViews;return _.filter((function(_){return _.fqn===y.fqn&&_.$type===y.$type})).length&&ge.traceViewServiceUIViewEvent("!!!! duplicate uiView named:",y),_.push(y),this.sync(),function(){-1!==_.indexOf(y)?(ge.traceViewServiceUIViewEvent("<- Deregistering",y),Ot(_)(y)):ge.traceViewServiceUIViewEvent("Tried removing non-registered uiView",y)}},s.prototype.available=function(){return this._uiViews.map(w("fqn"))},s.prototype.active=function(){return this._uiViews.filter(w("$config")).map(w("name"))},s.matches=function(y,_){return function($){if(_.$type!==$.viewDecl.$type)return!1;var b=$.viewDecl,E=b.$uiViewName.split("."),C=_.fqn.split(".");if(!_t(E,C.slice(0-E.length)))return!1;var P=1-E.length||void 0,T=C.slice(0,P).join("."),O=y[T].creationContext;return b.$uiViewContextAnchor===(O&&O.name)}},s}(),yr=function(){function t(){this.params=new Ee,this.lastStartedTransitionId=-1,this.transitionHistory=new Wt([],1),this.successfulTransitions=new Wt([],1)}return t.prototype.dispose=function(){this.transitionHistory.clear(),this.successfulTransitions.clear(),this.transition=null},t}();function pr(y){if(!(A(y)||q(y)||p(Ce)(y)||Ce.isDef(y)))throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property");return A(y)?y:v(y)}ar=function(y,_){var $,b,E,C,P,T,O,I,A=($=y,(_.priority||0)-($.priority||0));return 0!==A?A:(b=_,0!=(A=((E={STATE:4,URLMATCHER:4,REGEXP:3,RAW:2,OTHER:1})[y.type]||0)-(E[b.type]||0))?A:(P=_,0!==(A=(C=y).urlMatcher&&P.urlMatcher?fr.compare(C.urlMatcher,P.urlMatcher):0)?A:(O=_,(I={STATE:!0,URLMATCHER:!0})[(T=y).type]&&I[O.type]?0:(T.$id||0)-(O.$id||0))))};var wr=function(){function t(y){this.router=y,this._sortFn=ar,this._rules=[],this._id=0,this.urlRuleFactory=new dr(y)}return t.prototype.dispose=function(y){this._rules=[],delete this._otherwiseFn},t.prototype.initial=function(y){var _=pr(y);this.rule(this.urlRuleFactory.create((function(y,_){return 0===_.globals.transitionHistory.size()&&!!/^\/?$/.exec(y.path)}),_))},t.prototype.otherwise=function(y){var _=pr(y);this._otherwiseFn=this.urlRuleFactory.create(v(!0),_),this._sorted=!1},t.prototype.removeRule=function(y){Ot(this._rules,y)},t.prototype.rule=function(y){var _=this;if(!dr.isUrlRule(y))throw new Error("invalid rule");return y.$id=this._id++,y.priority=y.priority||0,this._rules.push(y),this._sorted=!1,function(){return _.removeRule(y)}},t.prototype.rules=function(){return this.ensureSorted(),this._rules.concat(this._otherwiseFn?[this._otherwiseFn]:[])},t.prototype.sort=function(y){for(var _=this.stableSort(this._rules,this._sortFn=y||this._sortFn),$=0,b=0;b<_.length;b++)_[b]._group=$,b<_.length-1&&0!==this._sortFn(_[b],_[b+1])&&$++;this._rules=_,this._sorted=!0},t.prototype.ensureSorted=function(){this._sorted||this.sort()},t.prototype.stableSort=function(y,_){var $=y.map((function(y,_){return{elem:y,idx:_}}));return $.sort((function(y,$){var b=_(y.elem,$.elem);return 0===b?y.idx-$.idx:b})),$.map((function(y){return y.elem}))},t.prototype.when=function(y,_,$){var b=this.urlRuleFactory.create(y,_);return O($&&$.priority)&&(b.priority=$.priority),this.rule(b),b},t}(),_r=function(){function t(y){var _=this;this.router=y,this.paramTypes=new be,this._isCaseInsensitive=!1,this._isStrictMode=!0,this._defaultSquashPolicy=!1,this.dispose=function(){return _.paramTypes.dispose()},this.baseHref=function(){return _.router.locationConfig.baseHref()},this.hashPrefix=function(y){return _.router.locationConfig.hashPrefix(y)},this.host=function(){return _.router.locationConfig.host()},this.html5Mode=function(){return _.router.locationConfig.html5Mode()},this.port=function(){return _.router.locationConfig.port()},this.protocol=function(){return _.router.locationConfig.protocol()}}return t.prototype.caseInsensitive=function(y){return this._isCaseInsensitive=O(y)?y:this._isCaseInsensitive},t.prototype.defaultSquashPolicy=function(y){if(O(y)&&!0!==y&&!1!==y&&!q(y))throw new Error("Invalid squash policy: "+y+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=O(y)?y:this._defaultSquashPolicy},t.prototype.strictMode=function(y){return this._isStrictMode=O(y)?y:this._isStrictMode},t.prototype.type=function(y,_,$){var b=this.paramTypes.type(y,_,$);return O(_)?this:b},t}(),$r=function(){function t(y){var _=this;this.router=y,this.interceptDeferred=!1,this.rules=new wr(this.router),this.config=new _r(this.router),this.url=function(y,$,b){return _.router.locationService.url(y,$,b)},this.path=function(){return _.router.locationService.path()},this.search=function(){return _.router.locationService.search()},this.hash=function(){return _.router.locationService.hash()},this.onChange=function(y){return _.router.locationService.onChange(y)}}return t.prototype.dispose=function(){this.listen(!1),this.rules.dispose()},t.prototype.parts=function(){return{path:this.path(),search:this.search(),hash:this.hash()}},t.prototype.sync=function(y){if(!y||!y.defaultPrevented){var _=this.router,$=_.urlService,b=_.stateService,E={path:$.path(),search:$.search(),hash:$.hash()},C=this.match(E);m([[q,function(y){return $.url(y,!0)}],[Ce.isDef,function(y){return b.go(y.state,y.params,y.options)}],[p(Ce),function(y){return b.go(y.state(),y.params(),y.options())}]])(C&&C.rule.handler(C.match,E,this.router))}},t.prototype.listen=function(y){var _=this;if(!1!==y)return this._stopListeningFn=this._stopListeningFn||this.router.urlService.onChange((function(y){return _.sync(y)}));this._stopListeningFn&&this._stopListeningFn(),delete this._stopListeningFn},t.prototype.deferIntercept=function(y){void 0===y&&(y=!0),this.interceptDeferred=y},t.prototype.match=function(y){var _=this;y=ct({path:"",search:{},hash:""},y);for(var $,b,E,C=this.rules.rules(),P=0;P<C.length&&(!$||$.rule._group===C[P]._group);P++){var T=(E=(b=C[P]).match(y,_.router))&&{match:E,rule:b,weight:b.matchPriority(E)};$=!$||T&&T.weight>$.weight?T:$}return $},t}(),Cr=0,Pr=H("LocationServices",["url","path","search","hash","onChange"]),Tr=H("LocationConfig",["port","protocol","host","baseHref","html5Mode","hashPrefix"]),Nr=function(){function t(y,_){void 0===y&&(y=Pr),void 0===_&&(_=Tr),this.locationService=y,this.locationConfig=_,this.$id=Cr++,this._disposed=!1,this._disposables=[],this.trace=ge,this.viewService=new gr(this),this.globals=new yr,this.transitionService=new zr(this),this.urlMatcherFactory=new vr(this),this.urlRouter=new mr(this),this.urlService=new $r(this),this.stateRegistry=new Xe(this),this.stateService=new Jr(this),this._plugins={},this.viewService._pluginapi._rootViewContext(this.stateRegistry.root()),this.globals.$current=this.stateRegistry.root(),this.globals.current=this.globals.$current.self,this.disposable(this.globals),this.disposable(this.stateService),this.disposable(this.stateRegistry),this.disposable(this.transitionService),this.disposable(this.urlService),this.disposable(y),this.disposable(_)}return t.prototype.disposable=function(y){this._disposables.push(y)},t.prototype.dispose=function(y){var _=this;y&&A(y.dispose)?y.dispose(this):(this._disposed=!0,this._disposables.slice().forEach((function(y){try{"function"==typeof y.dispose&&y.dispose(_),Ot(_._disposables,y)}catch(y){}})))},t.prototype.plugin=function(y,_){void 0===_&&(_={});var $=new y(this,_);if(!$.name)throw new Error("Required property `name` missing on plugin: "+$);return this._disposables.push($),this._plugins[$.name]=$},t.prototype.getPlugin=function(y){return y?this._plugins[y]:lt(this._plugins)},t}();function Sr(y){y.addResolvable(Oe.fromData(Nr,y.router),""),y.addResolvable(Oe.fromData(or,y),""),y.addResolvable(Oe.fromData("$transition$",y),""),y.addResolvable(Oe.fromData("$stateParams",y.params()),""),y.entering().forEach((function(_){y.addResolvable(Oe.fromData("$state$",_),_)}))}var Lr=St(["$transition$",or]),br=function(y){var _=lt(y.treeChanges()).reduce(vt,[]).reduce(yt,[]),r=function(y){return Lr(y.token)?Oe.fromData(y.token,null):y};_.forEach((function(y){y.resolvables=y.resolvables.map(r)}))},Rr=function(y){var _=y.to().redirectTo;if(_){var $=y.router.stateService;return A(_)?N.$q.when(_(y)).then(n):n(_)}function n(_){if(_)return _ instanceof Ce?_:q(_)?$.target(_,y.params(),y.options()):_.state||_.params?$.target(_.state||y.to(),_.params||y.params(),y.options()):void 0}};function Er(y){return function(_,$){return(0,$.$$state()[y])(_,$)}}var Br=Er("onExit"),Mr=Er("onRetain"),Gr=Er("onEnter"),kr=function(y){return new Le(y.treeChanges().to).resolvePath("EAGER",y).then(G)},Or=function(y,_){return new Le(y.treeChanges().to).subContext(_.$$state()).resolvePath("LAZY",y).then(G)},xr=function(y){return new Le(y.treeChanges().to).resolvePath("LAZY",y).then(G)},jr=function(y){var _=N.$q,$=y.views("entering");if($.length)return _.all($.map((function(y){return _.when(y.load())}))).then(G)},Vr=function(y){var _=y.views("entering"),$=y.views("exiting");if(_.length||$.length){var b=y.router.viewService;$.forEach((function(y){return b.deactivateViewConfig(y)})),_.forEach((function(y){return b.activateViewConfig(y)})),b.sync()}},Ir=function(y){var _=y.router.globals,r=function(){_.transition===y&&(_.transition=null)};y.onSuccess({},(function(){_.successfulTransitions.enqueue(y),_.$current=y.$to(),_.current=_.$current.self,Tt(y.params(),_.params)}),{priority:1e4}),y.promise.then(r,r)},Hr=function(y){var _=y.options(),$=y.router.stateService,b=y.router.urlRouter;if("url"!==_.source&&_.location&&$.$current.navigable){var E={replace:"replace"===_.location};b.push($.$current.navigable.url,$.params,E)}b.update(!0)},Ar=function(y){var _=y.router,$=y.entering().filter((function(y){return!!y.$$state().lazyLoad})).map((function(_){return Dr(y,_)}));return N.$q.all($).then((function(){if("url"!==y.originalTransition().options().source){var $=y.targetState();return _.stateService.target($.identifier(),$.params(),$.options())}var b=_.urlService,E=b.match(b.parts()),C=E&&E.rule;if(C&&"STATE"===C.type){var P=C.state,T=E.match;return _.stateService.target(P,T,y.options())}_.urlService.sync()}))};function Dr(y,_){var $=_.$$state().lazyLoad,b=$._promise;return b||(b=$._promise=N.$q.when($(y,_)).then((function(_){return _&&Array.isArray(_.states)&&_.states.forEach((function(_){return y.router.stateRegistry.register(_)})),_})).then((function(y){return delete _.lazyLoad,delete _.$$state().lazyLoad,delete $._promise,y}),(function(y){return delete $._promise,N.$q.reject(y)}))),b}var qr=function(y,_,$,b,E,C,P,T){void 0===E&&(E=!1),void 0===C&&(C=er.HANDLE_RESULT),void 0===P&&(P=er.REJECT_ERROR),void 0===T&&(T=!1),this.name=y,this.hookPhase=_,this.hookOrder=$,this.criteriaMatchPath=b,this.reverseSort=E,this.getResultHandler=C,this.getErrorHandler=P,this.synchronous=T};function Ur(y){var _=y._ignoredReason();if(_){ge.traceTransitionIgnored(y);var $=y.router.globals.transition;return"SameAsCurrent"===_&&$&&$.abort(),Qt.ignored().toPromise()}}function Fr(y){if(!y.valid())throw new Error(y.error().toString())}var Wr={location:!0,relative:null,inherit:!1,notify:!0,reload:!1,custom:{},current:function(){return null},source:"unknown"},zr=function(){function t(y){this._transitionCount=0,this._eventTypes=[],this._registeredHooks={},this._criteriaPaths={},this._router=y,this.$view=y.viewService,this._deregisterHookFns={},this._pluginapi=W(v(this),{},v(this),["_definePathType","_defineEvent","_getPathTypes","_getEvents","getHooks"]),this._defineCorePaths(),this._defineCoreEvents(),this._registerCoreTransitionHooks(),y.globals.successfulTransitions.onEvict(br)}return t.prototype.onCreate=function(y,_,$){},t.prototype.onBefore=function(y,_,$){},t.prototype.onStart=function(y,_,$){},t.prototype.onExit=function(y,_,$){},t.prototype.onRetain=function(y,_,$){},t.prototype.onEnter=function(y,_,$){},t.prototype.onFinish=function(y,_,$){},t.prototype.onSuccess=function(y,_,$){},t.prototype.onError=function(y,_,$){},t.prototype.dispose=function(y){lt(this._registeredHooks).forEach((function(y){return y.forEach((function(_){_._deregistered=!0,Ot(y,_)}))}))},t.prototype.create=function(y,_){return new or(y,_,this._router)},t.prototype._defineCoreEvents=function(){var _=y.TransitionHookPhase,$=er,b=this._criteriaPaths;this._defineEvent("onCreate",_.CREATE,0,b.to,!1,$.LOG_REJECTED_RESULT,$.THROW_ERROR,!0),this._defineEvent("onBefore",_.BEFORE,0,b.to),this._defineEvent("onStart",_.RUN,0,b.to),this._defineEvent("onExit",_.RUN,100,b.exiting,!0),this._defineEvent("onRetain",_.RUN,200,b.retained),this._defineEvent("onEnter",_.RUN,300,b.entering),this._defineEvent("onFinish",_.RUN,400,b.to),this._defineEvent("onSuccess",_.SUCCESS,0,b.to,!1,$.LOG_REJECTED_RESULT,$.LOG_ERROR,!0),this._defineEvent("onError",_.ERROR,0,b.to,!1,$.LOG_REJECTED_RESULT,$.LOG_ERROR,!0)},t.prototype._defineCorePaths=function(){var _=y.TransitionHookScope.STATE,$=y.TransitionHookScope.TRANSITION;this._definePathType("to",$),this._definePathType("from",$),this._definePathType("exiting",_),this._definePathType("retained",_),this._definePathType("entering",_)},t.prototype._defineEvent=function(y,_,$,b,E,C,P,T){void 0===E&&(E=!1),void 0===C&&(C=er.HANDLE_RESULT),void 0===P&&(P=er.REJECT_ERROR),void 0===T&&(T=!1);var O=new qr(y,_,$,b,E,C,P,T);this._eventTypes.push(O),Ke(this,this,O)},t.prototype._getEvents=function(y){return(O(y)?this._eventTypes.filter((function(_){return _.hookPhase===y})):this._eventTypes.slice()).sort((function(y,_){var $=y.hookPhase-_.hookPhase;return 0===$?y.hookOrder-_.hookOrder:$}))},t.prototype._definePathType=function(y,_){this._criteriaPaths[y]={name:y,scope:_}},t.prototype._getPathTypes=function(){return this._criteriaPaths},t.prototype.getHooks=function(y){return this._registeredHooks[y]},t.prototype._registerCoreTransitionHooks=function(){var y=this._deregisterHookFns;y.addCoreResolves=this.onCreate({},Sr),y.ignored=this.onBefore({},Ur,{priority:-9999}),y.invalid=this.onBefore({},Fr,{priority:-1e4}),y.redirectTo=this.onStart({to:function(y){return!!y.redirectTo}},Rr),y.onExit=this.onExit({exiting:function(y){return!!y.onExit}},Br),y.onRetain=this.onRetain({retained:function(y){return!!y.onRetain}},Mr),y.onEnter=this.onEnter({entering:function(y){return!!y.onEnter}},Gr),y.eagerResolve=this.onStart({},kr,{priority:1e3}),y.lazyResolve=this.onEnter({entering:v(!0)},Or,{priority:1e3}),y.resolveAll=this.onFinish({},xr,{priority:1e3}),y.loadViews=this.onFinish({},jr),y.activateViews=this.onSuccess({},Vr),y.updateGlobals=this.onCreate({},Ir),y.updateUrl=this.onSuccess({},Hr,{priority:9999}),y.lazyLoad=this.onBefore({entering:function(y){return!!y.lazyLoad}},Ar)},t}(),Jr=function(){function r(y){this.router=y,this.invalidCallbacks=[],this._defaultErrorHandler=function(y){y instanceof Error&&y.stack?(console.error(y),console.error(y.stack)):y instanceof Qt?(console.error(y.toString()),y.detail&&y.detail.stack&&console.error(y.detail.stack)):console.error(y)};var _=Object.keys(r.prototype).filter(l(St(["current","$current","params","transition"])));W(v(r.prototype),this,v(this),_)}return Object.defineProperty(r.prototype,"transition",{get:function(){return this.router.globals.transition},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"params",{get:function(){return this.router.globals.params},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"current",{get:function(){return this.router.globals.current},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"$current",{get:function(){return this.router.globals.$current},enumerable:!0,configurable:!0}),r.prototype.dispose=function(){this.defaultErrorHandler(G),this.invalidCallbacks=[]},r.prototype._handleInvalidTargetState=function(y,_){var $=this,b=Pe.makeTargetState(this.router.stateRegistry,y),E=this.router.globals,o=function(){return E.transitionHistory.peekTail()},C=o(),P=new Wt(this.invalidCallbacks.slice()),T=new Le(y).injector(),c=function(y){if(y instanceof Ce){var _=y;return(_=$.target(_.identifier(),_.params(),_.options())).valid()?o()!==C?Qt.superseded().toPromise():$.transitionTo(_.identifier(),_.params(),_.options()):Qt.invalid(_.error()).toPromise()}};return function e(){var y=P.dequeue();return void 0===y?Qt.invalid(_.error()).toPromise():N.$q.when(y(_,b,T)).then(c).then((function(y){return y||e()}))}()},r.prototype.onInvalid=function(y){return this.invalidCallbacks.push(y),function(){Ot(this.invalidCallbacks)(y)}.bind(this)},r.prototype.reload=function(y){return this.transitionTo(this.current,this.params,{reload:!O(y)||y,inherit:!1,notify:!1})},r.prototype.go=function(y,_,$){var b=et($,{relative:this.$current,inherit:!0},Wr);return this.transitionTo(y,_,b)},r.prototype.target=function(y,_,$){if(void 0===$&&($={}),k($.reload)&&!$.reload.name)throw new Error("Invalid reload state object");var b=this.router.stateRegistry;if($.reloadState=!0===$.reload?b.root():b.matcher.find($.reload,$.relative),$.reload&&!$.reloadState)throw new Error("No such reload state '"+(q($.reload)?$.reload:$.reload.name)+"'");return new Ce(this.router.stateRegistry,y,_,$)},r.prototype.getCurrentPath=function(){var y=this,_=this.router.globals.successfulTransitions.peekTail();return _?_.treeChanges().to:[new Re(y.router.stateRegistry.root())]},r.prototype.transitionTo=function(_,$,b){var E=this;void 0===$&&($={}),void 0===b&&(b={});var C=this.router,P=C.globals;b=et(b,Wr),b=ct(b,{current:function(){return P.transition}});var T=this.target(_,$,b),O=this.getCurrentPath();if(!T.exists())return this._handleInvalidTargetState(O,T);if(!T.valid())return jt(T.error());var s=function(_){return function($){if($ instanceof Qt){var b=C.globals.lastStartedTransitionId===_.$id;if($.type===y.RejectType.IGNORED)return b&&C.urlRouter.update(),N.$q.when(P.current);var T=$.detail;if($.type===y.RejectType.SUPERSEDED&&$.redirected&&T instanceof Ce){var O=_.redirect(T);return O.run().catch(s(O))}if($.type===y.RejectType.ABORTED)return b&&C.urlRouter.update(),N.$q.reject($)}return E.defaultErrorHandler()($),N.$q.reject($)}},I=this.router.transitionService.create(O,T),A=I.run().catch(s(I));return xt(A),ct(A,{transition:I})},r.prototype.is=function(y,_,$){$=et($,{relative:this.$current});var b=this.router.stateRegistry.matcher.find(y,$.relative);if(O(b)){if(this.$current!==b)return!1;if(!_)return!0;var E=b.parameters({inherit:!0,matchingKeys:_});return Se.equals(E,Se.values(E,_),this.params)}},r.prototype.includes=function(y,_,$){$=et($,{relative:this.$current});var b=q(y)&&Mt.fromString(y);if(b){if(!b.matches(this.$current.name))return!1;y=this.$current.name}var E=this.router.stateRegistry.matcher.find(y,$.relative),C=this.$current.includes;if(O(E)){if(!O(C[E.name]))return!1;if(!_)return!0;var P=E.parameters({inherit:!0,matchingKeys:_});return Se.equals(P,Se.values(P,_),this.params)}},r.prototype.href=function(y,_,$){$=et($,{lossy:!0,inherit:!0,absolute:!1,relative:this.$current}),_=_||{};var b=this.router.stateRegistry.matcher.find(y,$.relative);if(!O(b))return null;$.inherit&&(_=this.params.$inherit(_,this.$current,b));var E=b&&$.lossy?b.navigable:b;return E&&void 0!==E.url&&null!==E.url?this.router.urlRouter.href(E.url,_,{absolute:$.absolute}):null},r.prototype.defaultErrorHandler=function(y){return this._defaultErrorHandler=y||this._defaultErrorHandler},r.prototype.get=function(y,_){var $=this.router.stateRegistry;return 0===arguments.length?$.get():$.get(y,_||this.$current)},r.prototype.lazyLoad=function(y,_){var $=this.get(y);if(!$||!$.lazyLoad)throw new Error("Can not lazy load "+y);var b=this.getCurrentPath(),E=Pe.makeTargetState(this.router.stateRegistry,b);return Dr(_=_||this.router.transitionService.create(b,E),$)},r}(),tn={when:function(y){return new Promise((function(_,$){return _(y)}))},reject:function(y){return new Promise((function(_,$){$(y)}))},defer:function(){var y={};return y.promise=new Promise((function(_,$){y.resolve=_,y.reject=$})),y},all:function(y){if(F(y))return Promise.all(y);if(k(y)){var _=Object.keys(y).map((function(_){return y[_].then((function(y){return{key:_,val:y}}))}));return tn.all(_).then((function(y){return y.reduce((function(y,_){return y[_.key]=_.val,y}),{})}))}}},en={},rn=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,nn=/([^\s,]+)/g,on={get:function(y){return en[y]},has:function(y){return null!=on.get(y)},invoke:function(y,_,$){var b=ct({},en,$||{}),E=on.annotate(y),C=At((function(y){return b.hasOwnProperty(y)}),(function(y){return"DI can't find injectable: '"+y+"'"})),P=E.filter(C).map((function(y){return b[y]}));return A(y)?y.apply(_,P):y.slice(-1)[0].apply(_,P)},annotate:function(y){if(!V(y))throw new Error("Not an injectable function: "+y);if(y&&y.$inject)return y.$inject;if(F(y))return y.slice(0,-1);var _=y.toString().replace(rn,"");return _.slice(_.indexOf("(")+1,_.indexOf(")")).match(nn)||[]}},Qr=function(y,_){var $=_[0],b=_[1];return y.hasOwnProperty($)?F(y[$])?y[$].push(b):y[$]=[y[$],b]:y[$]=b,y},Kr=function(y){return y.split("&").filter(B).map(ae).reduce(Qr,{})};function Yr(y){var e=function(y){return y||""},_=ie(y).map(e),$=_[0],b=_[1],E=oe($).map(e);return{path:E[0],search:E[1],hash:b,url:y}}var Zr=function(y){var _=y.path(),$=y.search(),b=y.hash(),E=Object.keys($).map((function(y){var _=$[y];return(F(_)?_:[_]).map((function(_){return y+"="+_}))})).reduce(vt,[]).join("&");return _+(E?"?"+E:"")+(b?"#"+b:"")};function Xr(y,_,$,b){return function(E){var C=E.locationService=new $(E),P=E.locationConfig=new b(E,_);return{name:y,service:C,configuration:P,dispose:function(y){y.dispose(C),y.dispose(P)}}}}var an,un,sn,cn=function(){function t(y,_){var $=this;this.fireAfterUpdate=_,this._listeners=[],this._listener=function(y){return $._listeners.forEach((function(_){return _(y)}))},this.hash=function(){return Yr($._get()).hash},this.path=function(){return Yr($._get()).path},this.search=function(){return Kr(Yr($._get()).search)},this._location=L.location,this._history=L.history}return t.prototype.url=function(y,_){return void 0===_&&(_=!0),O(y)&&y!==this._get()&&(this._set(null,null,y,_),this.fireAfterUpdate&&this._listeners.forEach((function(_){return _({url:y})}))),Zr(this)},t.prototype.onChange=function(y){var _=this;return this._listeners.push(y),function(){return Ot(_._listeners,y)}},t.prototype.dispose=function(y){tt(this._listeners)},t}(),fn=(an=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,_){y.__proto__=_}||function(y,_){for(var $ in _)_.hasOwnProperty($)&&(y[$]=_[$])},function(y,_){function r(){this.constructor=y}an(y,_),y.prototype=null===_?Object.create(_):(r.prototype=_.prototype,new r)}),hn=function(y){function t(_){var $=y.call(this,_,!1)||this;return L.addEventListener("hashchange",$._listener,!1),$}return fn(t,y),t.prototype._get=function(){return Yt(this._location.hash)},t.prototype._set=function(y,_,$,b){this._location.hash=$},t.prototype.dispose=function(_){y.prototype.dispose.call(this,_),L.removeEventListener("hashchange",this._listener)},t}(cn),vn=(un=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,_){y.__proto__=_}||function(y,_){for(var $ in _)_.hasOwnProperty($)&&(y[$]=_[$])},function(y,_){function r(){this.constructor=y}un(y,_),y.prototype=null===_?Object.create(_):(r.prototype=_.prototype,new r)}),dn=function(y){function t(_){return y.call(this,_,!0)||this}return vn(t,y),t.prototype._get=function(){return this._url},t.prototype._set=function(y,_,$,b){this._url=$},t}(cn),mn=(sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,_){y.__proto__=_}||function(y,_){for(var $ in _)_.hasOwnProperty($)&&(y[$]=_[$])},function(y,_){function r(){this.constructor=y}sn(y,_),y.prototype=null===_?Object.create(_):(r.prototype=_.prototype,new r)}),gn=function(y){function t(_){var $=y.call(this,_,!0)||this;return $._config=_.urlService.config,L.addEventListener("popstate",$._listener,!1),$}return mn(t,y),t.prototype._getBasePrefix=function(){return zt(this._config.baseHref())},t.prototype._get=function(){var y=this._location,_=y.pathname,$=y.hash,b=y.search;b=oe(b)[1],$=ie($)[1];var E=this._getBasePrefix(),C=_===this._config.baseHref(),P=_.substr(0,E.length)===E;return(_=C?"/":P?_.substring(E.length):_)+(b?"?"+b:"")+($?"#"+$:"")},t.prototype._set=function(y,_,$,b){var E=this._getBasePrefix(),C=$&&"/"!==$[0]?"/":"",P=""===$||"/"===$?this._config.baseHref():E+C+$;b?this._history.replaceState(y,_,P):this._history.pushState(y,_,P)},t.prototype.dispose=function(_){y.prototype.dispose.call(this,_),L.removeEventListener("popstate",this._listener)},t}(cn),ln=function(){var y=this;this.dispose=G,this._baseHref="",this._port=80,this._protocol="http",this._host="localhost",this._hashPrefix="",this.port=function(){return y._port},this.protocol=function(){return y._protocol},this.host=function(){return y._host},this.baseHref=function(){return y._baseHref},this.html5Mode=function(){return!1},this.hashPrefix=function(_){return O(_)?y._hashPrefix=_:y._hashPrefix}},yn=function(){function t(y,_){void 0===_&&(_=!1),this._isHtml5=_,this._baseHref=void 0,this._hashPrefix=""}return t.prototype.port=function(){return location.port?Number(location.port):"https"===this.protocol()?443:80},t.prototype.protocol=function(){return location.protocol.replace(/:/g,"")},t.prototype.host=function(){return location.hostname},t.prototype.html5Mode=function(){return this._isHtml5},t.prototype.hashPrefix=function(y){return O(y)?this._hashPrefix=y:this._hashPrefix},t.prototype.baseHref=function(y){return O(y)&&(this._baseHref=y),T(this._baseHref)&&(this._baseHref=this.getBaseHref()),this._baseHref},t.prototype.getBaseHref=function(){var y=document.getElementsByTagName("base")[0];return y&&y.href?y.href.replace(/^(https?:)?\/\/[^/]*/,""):this._isHtml5?"/":location.pathname||"/"},t.prototype.dispose=function(){},t}();function pn(y){return N.$injector=on,{name:"vanilla.services",$q:N.$q=tn,$injector:on,dispose:function(){return null}}}var $n=Xr("vanilla.hashBangLocation",!1,hn,yn),bn=Xr("vanilla.pushStateLocation",!0,gn,yn),Rn=Xr("vanilla.memoryLocation",!1,dn,ln),Tn=function(){function t(){}return t.prototype.dispose=function(y){},t}(),kn=Object.freeze({root:L,fromJson:J,toJson:K,forEach:Z,extend:ct,equals:_t,identity:B,noop:G,createProxyFunctions:W,inherit:z,inArray:St,_inArray:Q,removeFrom:Ot,_removeFrom:Y,pushTo:Vt,_pushTo:X,deregAll:tt,defaults:et,mergeR:rt,ancestors:nt,pick:it,omit:ot,pluck:at,filter:ut,find:st,mapObj:It,map:ft,values:lt,allTrueR:ht,anyTrueR:pt,unnestR:vt,flattenR:dt,pushR:mt,uniqR:yt,unnest:gt,flatten:wt,assertPredicate:At,assertMap:Ht,assertFn:$t,pairs:bt,arrayTuples:Rt,applyPairs:Et,tail:Ct,copy:Tt,_extend:Pt,silenceUncaughtInPromise:xt,silentRejection:jt,makeStub:H,services:N,Glob:Mt,curry:c,compose:r,pipe:s,prop:w,propEq:C,parse:R,not:l,and:n,or:i,all:f,any:h,is:p,eq:o,val:v,invoke:a,pattern:m,isUndefined:T,isDefined:O,isNull:S,isNullOrUndefined:I,isFunction:A,isNumber:D,isString:q,isObject:k,isArray:F,isDate:x,isRegExp:j,isInjectable:V,isPromise:U,Queue:Wt,maxLength:Dt,padString:qt,kebobString:Ut,functionToString:Ft,fnToString:Nt,stringify:Bt,beforeAfterSubstr:Gt,hostRegex:ne,stripLastPathElement:zt,splitHash:ie,splitQuery:oe,splitEqual:ae,trimHashVal:Yt,splitOnDelim:Zt,joinNeighborsR:Xt,get Category(){return y.Category},Trace:me,trace:ge,get DefType(){return y.DefType},Param:Se,ParamTypes:be,StateParams:Ee,ParamType:ye,PathNode:Re,PathUtils:Pe,resolvePolicies:Te,defaultResolvePolicy:ke,Resolvable:Oe,NATIVE_INJECTOR_TOKEN:Ne,ResolveContext:Le,resolvablesBuilder:qe,StateBuilder:We,StateObject:ze,StateMatcher:Qe,StateQueueManager:Ye,StateRegistry:Xe,StateService:Jr,TargetState:Ce,get TransitionHookPhase(){return y.TransitionHookPhase},get TransitionHookScope(){return y.TransitionHookScope},HookBuilder:nr,matchState:Je,RegisteredHook:rr,makeEvent:Ke,get RejectType(){return y.RejectType},Rejection:Qt,Transition:or,TransitionHook:er,TransitionEventType:qr,defaultTransOpts:Wr,TransitionService:zr,UrlRules:wr,UrlConfig:_r,UrlMatcher:fr,ParamFactory:lr,UrlMatcherFactory:vr,UrlRouter:mr,UrlRuleFactory:dr,BaseUrlRule:sr,UrlService:$r,ViewService:gr,UIRouterGlobals:yr,UIRouter:Nr,$q:tn,$injector:on,BaseLocationServices:cn,HashLocationService:hn,MemoryLocationService:dn,PushStateLocationService:gn,MemoryLocationConfig:ln,BrowserLocationConfig:yn,keyValsToObjectR:Qr,getParams:Kr,parseUrl:Yr,buildUrl:Zr,locationPluginFactory:Xr,servicesPlugin:pn,hashLocationPlugin:$n,pushStateLocationPlugin:bn,memoryLocationPlugin:Rn,UIRouterPluginBase:Tn});function wn(){var y=null;return function(_,$){return y=y||N.$injector.get("$templateFactory"),[new xn(_,$,y)]}}var _n=function(y,_){return y.reduce((function(y,$){return y||O(_[$])}),!1)};function Sn(y){if(!y.parent)return{};var _=["component","bindings","componentProvider"],$=["templateProvider","templateUrl","template","notify","async"].concat(["controller","controllerProvider","controllerAs","resolveAs"]),b=_.concat($);if(O(y.views)&&_n(b,y))throw new Error("State '"+y.name+"' has a 'views' object. It cannot also have \"view properties\" at the state level.  Move the following properties into a view (in the 'views' object):  "+b.filter((function(_){return O(y[_])})).join(", "));var E={},C=y.views||{$default:it(y,b)};return Z(C,(function(b,C){if(C=C||"$default",q(b)&&(b={component:b}),b=ct({},b),_n(_,b)&&_n($,b))throw new Error("Cannot combine: "+_.join("|")+" with: "+$.join("|")+" in stateview: '"+C+"@"+y.name+"'");b.resolveAs=b.resolveAs||"$resolve",b.$type="ng1",b.$context=y,b.$name=C;var P=gr.normalizeUIViewTarget(b.$context,b.$name);b.$uiViewName=P.uiViewName,b.$uiViewContextAnchor=P.uiViewContextAnchor,E[C]=b})),E}var On=0,xn=function(){function t(y,_,$){var b=this;this.path=y,this.viewDecl=_,this.factory=$,this.$id=On++,this.loaded=!1,this.getTemplate=function(y,_){return b.component?b.factory.makeComponentTemplate(y,_,b.component,b.viewDecl.bindings):b.template}}return t.prototype.load=function(){var y=this,_=N.$q,$=new Le(this.path),b=this.path.reduce((function(y,_){return ct(y,_.paramValues)}),{}),E={template:_.when(this.factory.fromConfig(this.viewDecl,b,$)),controller:_.when(this.getController($))};return _.all(E).then((function(_){return ge.traceViewServiceEvent("Loaded",y),y.controller=_.controller,ct(y,_.template),y}))},t.prototype.getController=function(y){var _=this.viewDecl.controllerProvider;if(!V(_))return this.viewDecl.controller;var $=N.$injector.annotate(_),b=F(_)?Ct(_):_;return new Oe("",b,$).get(y)},t}(),jn=function(){function t(){var y=this;this._useHttp=E.version.minor<3,this.$get=["$http","$templateCache","$injector",function(_,$,b){return y.$templateRequest=b.has&&b.has("$templateRequest")&&b.get("$templateRequest"),y.$http=_,y.$templateCache=$,y}]}return t.prototype.useHttpService=function(y){this._useHttp=y},t.prototype.fromConfig=function(y,_,$){var n=function(y){return N.$q.when(y).then((function(y){return{template:y}}))},i=function(y){return N.$q.when(y).then((function(y){return{component:y}}))};return O(y.template)?n(this.fromString(y.template,_)):O(y.templateUrl)?n(this.fromUrl(y.templateUrl,_)):O(y.templateProvider)?n(this.fromProvider(y.templateProvider,_,$)):O(y.component)?i(y.component):O(y.componentProvider)?i(this.fromComponentProvider(y.componentProvider,_,$)):n("<ui-view></ui-view>")},t.prototype.fromString=function(y,_){return A(y)?y(_):y},t.prototype.fromUrl=function(y,_){return A(y)&&(y=y(_)),null==y?null:this._useHttp?this.$http.get(y,{cache:this.$templateCache,headers:{Accept:"text/html"}}).then((function(y){return y.data})):this.$templateRequest(y)},t.prototype.fromProvider=function(y,_,$){var b=N.$injector.annotate(y),E=F(y)?Ct(y):y;return new Oe("",E,b).get($)},t.prototype.fromComponentProvider=function(y,_,$){var b=N.$injector.annotate(y),E=F(y)?Ct(y):y;return new Oe("",E,b).get($)},t.prototype.makeComponentTemplate=function(y,_,$,b){b=b||{};var C=3<=E.version.minor?"::":"",h=function(y){var _=Ut(y);return/^(x|data)-/.exec(_)?"x-"+_:_},P=function(y){var _=N.$injector.get(y+"Directive");if(!_||!_.length)throw new Error("Unable to find component named '"+y+"'");return _.map(En).reduce(vt,[])}($).map((function($){var E=$.name,P=$.type,T=h(E);if(y.attr(T)&&!b[E])return T+"='"+y.attr(T)+"'";var O=b[E]||E;if("@"===P)return T+"='{{"+C+"$resolve."+O+"}}'";if("&"===P){var I=_.getResolvable(O),A=I&&I.data,D=A&&N.$injector.annotate(A)||[];return T+"='$resolve."+O+(F(A)?"["+(A.length-1)+"]":"")+"("+D.join(",")+")'"}return T+"='"+C+"$resolve."+O+"'"})).join(" "),T=h($);return"<"+T+" "+P+"></"+T+">"},t}(),En=function(y){return k(y.bindToController)?Cn(y.bindToController):Cn(y.scope)},Cn=function(y){return Object.keys(y||{}).map((function(_){return[_,/^([=<@&])[?]?(.*)/.exec(y[_])]})).filter((function(y){return O(y)&&F(y[1])})).map((function(y){return{name:y[1][2]||y[0],type:y[1][1]}}))},Vn=function(){function r(y,_){this.stateRegistry=y,this.stateService=_,W(v(r.prototype),this,v(this))}return r.prototype.decorator=function(y,_){return this.stateRegistry.decorator(y,_)||this},r.prototype.state=function(y,_){return k(y)?_=y:_.name=y,this.stateRegistry.register(_),this},r.prototype.onInvalid=function(y){return this.stateService.onInvalid(y)},r}(),Pn=function(y){return function(_,$){var b=_[y],E="onExit"===y?"from":"to";return b?function(y,_){var $=new Le(y.treeChanges(E)).subContext(_.$$state()),C=ct(Gn($),{$state$:_,$transition$:y});return N.$injector.invoke(b,this,C)}:void 0}},In=function(){function t(y){this._urlListeners=[],this.$locationProvider=y;var _=v(y);W(_,this,_,["hashPrefix"])}return t.monkeyPatchPathParameterType=function(y){var _=y.urlMatcherFactory.type("path");_.encode=function(y){return null!=y?y.toString().replace(/(~|\/)/g,(function(y){return{"~":"~~","/":"~2F"}[y]})):y},_.decode=function(y){return null!=y?y.toString().replace(/(~~|~2F)/g,(function(y){return{"~~":"~","~2F":"/"}[y]})):y}},t.prototype.dispose=function(){},t.prototype.onChange=function(y){var _=this;return this._urlListeners.push(y),function(){return Ot(_._urlListeners)(y)}},t.prototype.html5Mode=function(){var y=this.$locationProvider.html5Mode();return(y=k(y)?y.enabled:y)&&this.$sniffer.history},t.prototype.baseHref=function(){return this._baseHref||(this._baseHref=this.$browser.baseHref()||this.$window.location.pathname)},t.prototype.url=function(y,_,$){return void 0===_&&(_=!1),O(y)&&this.$location.url(y),_&&this.$location.replace(),$&&this.$location.state($),this.$location.url()},t.prototype._runtimeServices=function(y,_,$,b,E){var C=this;this.$location=_,this.$sniffer=$,this.$browser=b,this.$window=E,y.$on("$locationChangeSuccess",(function(y){return C._urlListeners.forEach((function(_){return _(y)}))}));var P=v(_);W(P,this,P,["replace","path","search","hash"]),W(P,this,P,["port","protocol","host"])},t}(),An=function(){function r(y){this.router=y}return r.injectableHandler=function(y,_){return function($){return N.$injector.invoke(_,null,{$match:$,$stateParams:y.globals.params})}},r.prototype.$get=function(){var y=this.router.urlService;return this.router.urlRouter.update(!0),y.interceptDeferred||y.listen(),this.router.urlRouter},r.prototype.rule=function(y){var _=this;if(!A(y))throw new Error("'rule' must be a function");var $=new sr((function(){return y(N.$injector,_.router.locationService)}),B);return this.router.urlService.rules.rule($),this},r.prototype.otherwise=function(y){var _=this,$=this.router.urlService.rules;if(q(y))$.otherwise(y);else{if(!A(y))throw new Error("'rule' must be a string or function");$.otherwise((function(){return y(N.$injector,_.router.locationService)}))}return this},r.prototype.when=function(y,_){return(F(_)||A(_))&&(_=r.injectableHandler(this.router,_)),this.router.urlService.rules.when(y,_),this},r.prototype.deferIntercept=function(y){this.router.urlService.deferIntercept(y)},r}();E.module("ui.router.angular1",[]);var Hn=E.module("ui.router.init",["ng"]),Nn=E.module("ui.router.util",["ui.router.init"]),Ln=E.module("ui.router.router",["ui.router.util"]),Bn=E.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]),Mn=E.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]),ei=(E.module("ui.router.compat",["ui.router"]),null);function Dn(y){(ei=this.router=new Nr).stateProvider=new Vn(ei.stateRegistry,ei.stateService),ei.stateRegistry.decorator("views",Sn),ei.stateRegistry.decorator("onExit",Pn("onExit")),ei.stateRegistry.decorator("onRetain",Pn("onRetain")),ei.stateRegistry.decorator("onEnter",Pn("onEnter")),ei.viewService._pluginapi._viewConfigFactory("ng1",wn());var _=ei.locationService=ei.locationConfig=new In(y);function e(y,$,b,E,C,P,T){return _._runtimeServices(C,y,E,$,b),delete ei.router,delete ei.$get,ei}return In.monkeyPatchPathParameterType(ei),((ei.router=ei).$get=e).$inject=["$location","$browser","$window","$sniffer","$rootScope","$http","$templateCache"],ei}Dn.$inject=["$locationProvider"];var qn=function(y){return["$uiRouterProvider",function(_){var $=_.router[y];return $.$get=function(){return $},$}]};function Un(y,_,$){if(N.$injector=y,N.$q=_,!y.hasOwnProperty("strictDi"))try{y.invoke((function(y){}))}catch(_){y.strictDi=!!/strict mode/.exec(_&&_.toString())}$.stateRegistry.get().map((function(y){return y.$$state().resolvables})).reduce(vt,[]).filter((function(y){return"deferred"===y.deps})).forEach((function(_){return _.deps=y.annotate(_.resolveFn,y.strictDi)}))}function Fn(y){y.$watch((function(){ge.approximateDigests++}))}Un.$inject=["$injector","$q","$uiRouter"],Fn.$inject=["$rootScope"],Hn.provider("$uiRouter",Dn),Ln.provider("$urlRouter",["$uiRouterProvider",function(y){return y.urlRouterProvider=new An(y)}]),Nn.provider("$urlService",qn("urlService")),Nn.provider("$urlMatcherFactory",["$uiRouterProvider",function(){return ei.urlMatcherFactory}]),Nn.provider("$templateFactory",(function(){return new jn})),Bn.provider("$stateRegistry",qn("stateRegistry")),Bn.provider("$uiRouterGlobals",qn("globals")),Bn.provider("$transitions",qn("transitionService")),Bn.provider("$state",["$uiRouterProvider",function(){return ct(ei.stateProvider,{$get:function(){return ei.stateService}})}]),Bn.factory("$stateParams",["$uiRouter",function(y){return y.globals.params}]),Mn.factory("$view",(function(){return ei.viewService})),Mn.service("$trace",(function(){return ge})),Mn.run(Fn),Nn.run(["$urlMatcherFactory",function(y){}]),Bn.run(["$state",function(y){}]),Ln.run(["$urlRouter",function(y){}]),Hn.run(Un);var ri,ii,oi,ai,Gn=function(y){return y.getTokens().filter(q).map((function(_){var $=y.getResolvable(_);return[_,"NOWAIT"===y.getPolicy($).async?$.promise:$.data]})).reduce(Et,{})};function Wn(y){var _,$=y.match(/^\s*({[^}]*})\s*$/);if($&&(y="("+$[1]+")"),!(_=y.replace(/\n/g," ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/))||4!==_.length)throw new Error("Invalid state ref '"+y+"'");return{state:_[1]||null,paramExpr:_[3]||null}}function zn(y){var _=y.parent().inheritedData("$uiView"),$=R("$cfg.path")(_);return $?Ct($).state.name:void 0}function Jn(y,_,$){var b,E=$.uiState||y.current.name,C=ct((b=y,{relative:zn(_)||b.$current,inherit:!0,source:"sref"}),$.uiStateOpts||{}),P=y.href(E,$.uiStateParams,C);return{uiState:E,uiStateParams:$.uiStateParams,uiStateOpts:C,href:P}}function Qn(y){var _="[object SVGAnimatedString]"===Object.prototype.toString.call(y.prop("href")),$="FORM"===y[0].nodeName;return{attr:$?"action":_?"xlink:href":"href",isAnchor:"A"===y.prop("tagName").toUpperCase(),clickable:!$}}function Kn(y,_,$,b,E){return function(C){var P=C.which||C.button,T=E();if(!(1<P||C.ctrlKey||C.metaKey||C.shiftKey||y.attr("target"))){var O=$((function(){y.attr("disabled")||_.go(T.uiState,T.uiStateParams,T.uiStateOpts)}));C.preventDefault();var I=b.isAnchor&&!T.href?1:0;C.preventDefault=function(){I--<=0&&$.cancel(O)}}}}function Yn(y,_,$,b){var E;b&&(E=b.events),F(E)||(E=["click"]);for(var C=y.on?"on":"bind",P=0,T=E;P<T.length;P++){var O=T[P];y[C](O,$)}_.$on("$destroy",(function(){for(var _=y.off?"off":"unbind",b=0,C=E;b<C.length;b++){var P=C[b];y[_](P,$)}}))}function Zn(y){var t=function(_,$,b){return y.is(_,$,b)};return t.$stateful=!0,t}function Xn(y){var t=function(_,$,b){return y.includes(_,$,b)};return t.$stateful=!0,t}function ti(y,_,$,b,C,P){var T=R("viewDecl.controllerAs"),O=R("viewDecl.resolveAs");return{restrict:"ECA",priority:-400,compile:function(b){var P=b.html();return b.empty(),function(b,I){var A=I.data("$uiView");if(!A)return I.html(P),void y(I.contents())(b);var D=A.$cfg||{viewDecl:{},getTemplate:G},F=D.path&&new Le(D.path);I.html(D.getTemplate(I,F)||P),ge.traceUIViewFill(A.$uiView,I.html());var U=y(I.contents()),N=D.controller,L=T(D),M=O(D),J=F&&Gn(F);if(b[M]=J,N){var K=_(N,ct({},J,{$scope:b,$element:I}));L&&(b[L]=K,b[L][M]=J),I.data("$ngControllerController",K),I.children().data("$ngControllerController",K),ni(C,$,K,b,D)}if(q(D.component))var Z=Ut(D.component),_t=new RegExp("^(x-|data-)?"+Z+"$","i"),St=b.$watch((function(){var y=[].slice.call(I[0].children).filter((function(y){return y&&y.tagName&&_t.exec(y.tagName)}));return y&&E.element(y).data("$"+D.component+"Controller")}),(function(y){y&&(ni(C,$,y,b,D),St())}));U(b)}}}}ri=["$uiRouter","$timeout",function(y,_){var $=y.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(b,E,C,P){var T,O=Qn(E),I=P[1]||P[0],A=null,D={},c=function(){return Jn($,E,D)},q=Wn(C.uiSref);function l(){var y=c();A&&A(),I&&(A=I.$$addStateInfo(y.uiState,y.uiStateParams)),null!=y.href&&C.$set(O.attr,y.href)}D.uiState=q.state,D.uiStateOpts=C.uiSrefOpts?b.$eval(C.uiSrefOpts):{},q.paramExpr&&(b.$watch(q.paramExpr,(function(y){D.uiStateParams=ct({},y),l()}),!0),D.uiStateParams=ct({},b.$eval(q.paramExpr))),l(),b.$on("$destroy",y.stateRegistry.onStatesChanged(l)),b.$on("$destroy",y.transitionService.onSuccess({},l)),O.clickable&&(T=Kn(E,$,_,O,c),Yn(E,b,T,D.uiStateOpts))}}}],ii=["$uiRouter","$timeout",function(y,_){var $=y.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(b,E,C,P){var T,O=Qn(E),I=P[1]||P[0],A=null,D={},c=function(){return Jn($,E,D)},q=["uiState","uiStateParams","uiStateOpts"],F=q.reduce((function(y,_){return y[_]=G,y}),{});function h(){var y=c();A&&A(),I&&(A=I.$$addStateInfo(y.uiState,y.uiStateParams)),null!=y.href&&C.$set(O.attr,y.href)}q.forEach((function(y){D[y]=C[y]?b.$eval(C[y]):null,C.$observe(y,(function(_){F[y](),F[y]=b.$watch(_,(function(_){D[y]=_,h()}),!0)}))})),h(),b.$on("$destroy",y.stateRegistry.onStatesChanged(h)),b.$on("$destroy",y.transitionService.onSuccess({},h)),O.clickable&&(T=Kn(E,$,_,O,c),Yn(E,b,T,D.uiStateOpts))}}}],oi=["$state","$stateParams","$interpolate","$uiRouter",function(y,_,$,b){return{restrict:"A",controller:["$scope","$element","$attrs",function(_,E,C){var P,T,O,I,A,D=[];P=$(C.uiSrefActiveEq||"",!1)(_);try{T=_.$eval(C.uiSrefActive)}catch(C){}function o(y){y.promise.then(p,G)}function a(){l(T)}function l(y){k(y)&&(D=[],Z(y,(function(y,$){var r=function(y,$){var b=Wn(y);h(b.state,_.$eval(b.paramExpr),$)};q(y)?r(y,$):F(y)&&Z(y,(function(y){r(y,$)}))})))}function h(_,$,b){var C={state:y.get(_,zn(E))||{name:_},params:$,activeClass:b};return D.push(C),function(){Ot(D)(C)}}function p(){var e=function(y){return y.split(/\s/).filter(B)},t=function(y){return y.map((function(y){return y.activeClass})).map(e).reduce(vt,[])},$=t(D).concat(e(P)).reduce(yt,[]),b=t(D.filter((function(_){return y.includes(_.state.name,_.params)}))),C=D.filter((function(_){return y.is(_.state.name,_.params)})).length?e(P):[],T=b.concat(C).reduce(yt,[]),O=$.filter((function(y){return!St(T,y)}));_.$evalAsync((function(){T.forEach((function(y){return E.addClass(y)})),O.forEach((function(y){return E.removeClass(y)}))}))}l(T=T||$(C.uiSrefActive||"",!1)(_)),this.$$addStateInfo=function(y,_){if(!(k(T)&&0<D.length)){var $=h(y,_,T);return p(),$}},_.$on("$destroy",(O=b.stateRegistry.onStatesChanged(a),I=b.transitionService.onStart({},o),A=_.$on("$stateChangeSuccess",p),function(){O(),I(),A()})),b.globals.transition&&o(b.globals.transition),p()}]}}],E.module("ui.router.state").directive("uiSref",ri).directive("uiSrefActive",oi).directive("uiSrefActiveEq",oi).directive("uiState",ii),Zn.$inject=["$state"],Xn.$inject=["$state"],E.module("ui.router.state").filter("isState",Zn).filter("includedByState",Xn),ai=["$view","$animate","$uiViewScroll","$interpolate","$q",function(y,_,$,b,C){var P={$cfg:{viewDecl:{$context:y._pluginapi._rootViewContext()}},$uiView:{}},T={count:0,restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(I,A,D){return function(I,A,q){var F,U,N,L,M,J=q.onload||"",K=q.autoscroll,Z={enter:function(y,$,b){2<E.version.minor?_.enter(y,null,$).then(b):_.enter(y,null,$,b)},leave:function(y,$){2<E.version.minor?_.leave(y).then($):_.leave(y,$)}},ct=A.inheritedData("$uiView")||P,_t=b(q.uiView||q.name||"")(I)||"$default",St={$type:"ng1",id:T.count++,name:_t,fqn:ct.$uiView.fqn?ct.$uiView.fqn+"."+_t:_t,config:null,configUpdated:function(y){(!y||y instanceof xn)&&L!==y&&(ge.traceUIViewConfigUpdated(St,y&&y.viewDecl&&y.viewDecl.$context),n(L=y))},get creationContext(){var y=R("$cfg.viewDecl.$context")(ct),_=R("$uiView.creationContext")(ct);return y||_}};function n(y){var _=I.$new(),b=C.defer(),E=C.defer(),P={$cfg:y,$uiView:St},T={$animEnter:b.promise,$animLeave:E.promise,$$animLeave:E};_.$emit("$viewContentLoading",_t),U=D(_,(function(y){y.data("$uiViewAnim",T),y.data("$uiView",P),Z.enter(y,A,(function(){b.resolve(),N&&N.$emit("$viewContentAnimationEnded"),(O(K)&&!K||I.$eval(K))&&$(y)})),function(){if(F&&(ge.traceUIViewEvent("Removing (previous) el",F.data("$uiView")),F.remove(),F=null),N&&(ge.traceUIViewEvent("Destroying scope",St),N.$destroy(),N=null),U){var y=U.data("$uiViewAnim");ge.traceUIViewEvent("Animate out",y),Z.leave(U,(function(){y.$$animLeave.resolve(),F=null})),F=U,U=null}}()})),(N=_).$emit("$viewContentLoaded",y||L),N.$eval(J)}ge.traceUIViewEvent("Linking",St),A.data("$uiView",{$uiView:St}),n(),M=y.registerUIView(St),I.$on("$destroy",(function(){ge.traceUIViewEvent("Destroying/Unregistering",St),M()}))}}};return T}],ti.$inject=["$compile","$controller","$transitions","$view","$q","$timeout"];var ui="function"==typeof E.module("ui.router").component,si=0;function ni(y,_,$,b,E){!A($.$onInit)||E.viewDecl.component&&ui||$.$onInit();var C=Ct(E.path).state.self,P={bind:$};if(A($.uiOnParamsChanged)){var T=new Le(E.path).getResolvable("$transition$").data;b.$on("$destroy",_.onSuccess({},(function(y){if(y!==T&&-1===y.exiting().indexOf(C)){var _=y.params("to"),b=y.params("from"),e=function(y){return y.paramSchema},E=y.treeChanges("to").map(e).reduce(vt,[]),P=y.treeChanges("from").map(e).reduce(vt,[]),O=E.filter((function(y){var $=P.indexOf(y);return-1===$||!P[$].type.equals(_[y.id],b[y.id])}));if(O.length){var I=O.map((function(y){return y.id})),A=ut(_,(function(y,_){return-1!==I.indexOf(_)}));$.uiOnParamsChanged(A,y)}}}),P))}if(A($.uiCanExit)){var O=si++,I="_uiCanExitIds",u=function(y){return!!y&&(y[I]&&!0===y[I][O]||u(y.redirectedFrom()))},D={exiting:C.name};b.$on("$destroy",_.onBefore(D,(function(_){var b,E=_[I]=_[I]||{};return u(_)||(b=y.when($.uiCanExit(_))).then((function(y){return E[O]=!1!==y})),b}),P))}}E.module("ui.router.state").directive("uiView",ai),E.module("ui.router.state").directive("uiView",ti),E.module("ui.router.state").provider("$uiViewScroll",(function(){var y=!1;this.useAnchorScroll=function(){y=!0},this.$get=["$anchorScroll","$timeout",function(_,$){return y?_:function(y){return $((function(){y[0].scrollIntoView()}),0,!1)}}]})),y.default="ui.router",y.core=kn,y.watchDigests=Fn,y.getLocals=Gn,y.getNg1ViewConfigFactory=wn,y.ng1ViewsBuilder=Sn,y.Ng1ViewConfig=xn,y.StateProvider=Vn,y.UrlRouterProvider=An,y.root=L,y.fromJson=J,y.toJson=K,y.forEach=Z,y.extend=ct,y.equals=_t,y.identity=B,y.noop=G,y.createProxyFunctions=W,y.inherit=z,y.inArray=St,y._inArray=Q,y.removeFrom=Ot,y._removeFrom=Y,y.pushTo=Vt,y._pushTo=X,y.deregAll=tt,y.defaults=et,y.mergeR=rt,y.ancestors=nt,y.pick=it,y.omit=ot,y.pluck=at,y.filter=ut,y.find=st,y.mapObj=It,y.map=ft,y.values=lt,y.allTrueR=ht,y.anyTrueR=pt,y.unnestR=vt,y.flattenR=dt,y.pushR=mt,y.uniqR=yt,y.unnest=gt,y.flatten=wt,y.assertPredicate=At,y.assertMap=Ht,y.assertFn=$t,y.pairs=bt,y.arrayTuples=Rt,y.applyPairs=Et,y.tail=Ct,y.copy=Tt,y._extend=Pt,y.silenceUncaughtInPromise=xt,y.silentRejection=jt,y.makeStub=H,y.services=N,y.Glob=Mt,y.curry=c,y.compose=r,y.pipe=s,y.prop=w,y.propEq=C,y.parse=R,y.not=l,y.and=n,y.or=i,y.all=f,y.any=h,y.is=p,y.eq=o,y.val=v,y.invoke=a,y.pattern=m,y.isUndefined=T,y.isDefined=O,y.isNull=S,y.isNullOrUndefined=I,y.isFunction=A,y.isNumber=D,y.isString=q,y.isObject=k,y.isArray=F,y.isDate=x,y.isRegExp=j,y.isInjectable=V,y.isPromise=U,y.Queue=Wt,y.maxLength=Dt,y.padString=qt,y.kebobString=Ut,y.functionToString=Ft,y.fnToString=Nt,y.stringify=Bt,y.beforeAfterSubstr=Gt,y.hostRegex=ne,y.stripLastPathElement=zt,y.splitHash=ie,y.splitQuery=oe,y.splitEqual=ae,y.trimHashVal=Yt,y.splitOnDelim=Zt,y.joinNeighborsR=Xt,y.Trace=me,y.trace=ge,y.Param=Se,y.ParamTypes=be,y.StateParams=Ee,y.ParamType=ye,y.PathNode=Re,y.PathUtils=Pe,y.resolvePolicies=Te,y.defaultResolvePolicy=ke,y.Resolvable=Oe,y.NATIVE_INJECTOR_TOKEN=Ne,y.ResolveContext=Le,y.resolvablesBuilder=qe,y.StateBuilder=We,y.StateObject=ze,y.StateMatcher=Qe,y.StateQueueManager=Ye,y.StateRegistry=Xe,y.StateService=Jr,y.TargetState=Ce,y.HookBuilder=nr,y.matchState=Je,y.RegisteredHook=rr,y.makeEvent=Ke,y.Rejection=Qt,y.Transition=or,y.TransitionHook=er,y.TransitionEventType=qr,y.defaultTransOpts=Wr,y.TransitionService=zr,y.UrlRules=wr,y.UrlConfig=_r,y.UrlMatcher=fr,y.ParamFactory=lr,y.UrlMatcherFactory=vr,y.UrlRouter=mr,y.UrlRuleFactory=dr,y.BaseUrlRule=sr,y.UrlService=$r,y.ViewService=gr,y.UIRouterGlobals=yr,y.UIRouter=Nr,y.$q=tn,y.$injector=on,y.BaseLocationServices=cn,y.HashLocationService=hn,y.MemoryLocationService=dn,y.PushStateLocationService=gn,y.MemoryLocationConfig=ln,y.BrowserLocationConfig=yn,y.keyValsToObjectR=Qr,y.getParams=Kr,y.parseUrl=Yr,y.buildUrl=Zr,y.locationPluginFactory=Xr,y.servicesPlugin=pn,y.hashLocationPlugin=$n,y.pushStateLocationPlugin=bn,y.memoryLocationPlugin=Rn,y.UIRouterPluginBase=Tn,Object.defineProperty(y,"__esModule",{value:!0})}(_,$("./node_modules/angular/index.js"))},"./node_modules/angular-ui-router/release/stateEvents.min.js":function(y,_,$){!function(y,_){"use strict";var $=angular,b=_&&_.module?_:$;!function(){var y=b.isFunction,_=b.isString;function s(y,$){var b,E;if(Array.isArray($)&&(b=$[0],E=$[1]),!_(b))throw new Error("invalid parameters to applyPairs");return y[b]=E,y}function i(y){if(y.options().notify&&y.valid()&&!y.ignored()){var _=y.injector(),$=_.get("$stateEvents"),b=_.get("$rootScope"),E=_.get("$state"),C=_.get("$urlRouter"),P=$.provider.enabled(),T=y.params("to"),O=y.params("from");if(P.$stateChangeSuccess){if(b.$broadcast("$stateChangeStart",y.to(),T,y.from(),O,y.options(),y).defaultPrevented)return P.$stateChangeCancel&&b.$broadcast("$stateChangeCancel",y.to(),T,y.from(),O,y.options(),y),null==E.transition&&C.update(),!1;y.onSuccess({},(function(){b.$broadcast("$stateChangeSuccess",y.to(),T,y.from(),O,y.options(),y)}),{priority:9999})}P.$stateChangeError&&y.promise.catch((function(_){(!_||2!==_.type&&3!==_.type)&&(b.$broadcast("$stateChangeError",y.to(),T,y.from(),O,_,y.options(),y).defaultPrevented||C.update())}))}}function u(_,$,b){var E=b.get("$state"),C=b.get("$rootScope"),P=b.get("$urlRouter"),T={to:_.identifier(),toParams:_.params(),options:_.options()},O=C.$broadcast("$stateNotFound",T,$.state(),$.params());function u(){return E.target(T.to,T.toParams,T.options)}return(O.defaultPrevented||O.retry)&&P.update(),!O.defaultPrevented&&(O.retry||E.get(T.to)?O.retry&&y(O.retry.then)?O.retry.then(u):u():void 0)}function d(y){d.prototype.instance=this;var _=!1,$=["$stateChangeStart","$stateNotFound","$stateChangeSuccess","$stateChangeError"],b=$.map((function(y){return[y,!0]})).reduce(s,{});function a(){if(_)throw new Error("Cannot enable events at runtime (use $stateEventsProvider")}function t($){return _=!0,b.$stateNotFound&&y.onInvalid(u),b.$stateChangeStart&&$.onBefore({},i,{priority:1e3}),{provider:d.prototype.instance}}this.enable=function(){for(var y=[],_=0;_<arguments.length;_++)y[_]=arguments[_];a(),y&&y.length||(y=$),y.forEach((function(y){return b[y]=!0}))},this.disable=function(){for(var y=[],_=0;_<arguments.length;_++)y[_]=arguments[_];a(),y&&y.length||(y=$),y.forEach((function(y){return delete b[y]}))},this.enabled=function(){return b},(this.$get=t).$inject=["$transitions"]}u.$inject=["$to$","$from$","$state","$rootScope","$urlRouter"],d.$inject=["$stateProvider"],b.module("ui.router.state.events",["ui.router.state"]).provider("$stateEvents",d).run(["$stateEvents",function(y){}])}(),y.$stateChangeStart=void 0,y.$stateChangeCancel=void 0,y.$stateChangeSuccess=void 0,y.$stateChangeError=void 0,y.$stateNotFound=void 0,Object.defineProperty(y,"__esModule",{value:!0})}(_,$("./node_modules/angular/index.js"))}}]);