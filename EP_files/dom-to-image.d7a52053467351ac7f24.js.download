(self.webpackChunkep_web=self.webpackChunkep_web||[]).push([["../libs/wp/dom-to-image/dom-to-image"],{"./node_modules/dom-to-image/src/dom-to-image.js":function(e){!function(n){"use strict";var t=function newUtil(){return{escape:function escape(e){return e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:parseExtension,mimeType:function mimeType(e){var n=parseExtension(e).toLowerCase();return function mimes(){var e="application/font-woff",n="image/jpeg";return{woff:e,woff2:e,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:n,jpeg:n,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[n]||""},dataAsUrl:function dataAsUrl(e,n){return"data:"+n+";base64,"+e},isDataUrl:function isDataUrl(e){return-1!==e.search(/^(data:)/)},canvasToBlob:function canvasToBlob(e){return e.toBlob?new Promise((function(n){e.toBlob(n)})):function toBlob(e){return new Promise((function(n){for(var t=window.atob(e.toDataURL().split(",")[1]),r=t.length,o=new Uint8Array(r),i=0;i<r;i++)o[i]=t.charCodeAt(i);n(new Blob([o],{type:"image/png"}))}))}(e)},resolveUrl:function resolveUrl(e,n){var t=document.implementation.createHTMLDocument(),r=t.createElement("base");t.head.appendChild(r);var o=t.createElement("a");return t.body.appendChild(o),r.href=n,o.href=e,o.href},getAndEncode:function getAndEncode(e){var n=3e4;u.impl.options.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());return new Promise((function(t){var r,o=new XMLHttpRequest;if(o.onreadystatechange=done,o.ontimeout=timeout,o.responseType="blob",o.timeout=n,o.open("GET",e,!0),o.send(),u.impl.options.imagePlaceholder){var i=u.impl.options.imagePlaceholder.split(/,/);i&&i[1]&&(r=i[1])}function done(){if(4===o.readyState)if(200===o.status){var n=new FileReader;n.onloadend=function(){var e=n.result.split(/,/)[1];t(e)},n.readAsDataURL(o.response)}else r?t(r):fail("cannot fetch resource: "+e+", status: "+o.status)}function timeout(){r?t(r):fail("timeout of "+n+"ms occured while fetching resource: "+e)}function fail(e){console.error(e),t("")}}))},uid:function uid(){var e=0;return function(){return"u"+fourRandomChars()+e++;function fourRandomChars(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}(),delay:function delay(e){return function(n){return new Promise((function(t){setTimeout((function(){t(n)}),e)}))}},asArray:function asArray(e){for(var n=[],t=e.length,r=0;r<t;r++)n.push(e[r]);return n},escapeXhtml:function escapeXhtml(e){return e.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function makeImage(e){return new Promise((function(n,t){var r=new Image;r.onload=function(){n(r)},r.onerror=t,r.src=e}))},width:function width(e){var n=px(e,"border-left-width"),t=px(e,"border-right-width");return e.scrollWidth+n+t},height:function height(e){var n=px(e,"border-top-width"),t=px(e,"border-bottom-width");return e.scrollHeight+n+t}};function parseExtension(e){var n=/\.([^\.\/]*?)$/g.exec(e);return n?n[1]:""}function px(e,n){var t=window.getComputedStyle(e).getPropertyValue(n);return parseFloat(t.replace("px",""))}}(),r=function newInliner(){var e=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function inlineAll(e,n,t){return nothingToInline()?Promise.resolve(e):Promise.resolve(e).then(readUrls).then((function(r){var o=Promise.resolve(e);return r.forEach((function(e){o=o.then((function(r){return inline(r,e,n,t)}))})),o}));function nothingToInline(){return!shouldProcess(e)}},shouldProcess:shouldProcess,impl:{readUrls:readUrls,inline:inline}};function shouldProcess(n){return-1!==n.search(e)}function readUrls(n){for(var r,o=[];null!==(r=e.exec(n));)o.push(r[1]);return o.filter((function(e){return!t.isDataUrl(e)}))}function inline(e,n,r,o){return Promise.resolve(n).then((function(e){return r?t.resolveUrl(e,r):e})).then(o||t.getAndEncode).then((function(e){return t.dataAsUrl(e,t.mimeType(n))})).then((function(r){return e.replace(function urlAsRegex(e){return new RegExp("(url\\(['\"]?)("+t.escape(e)+")(['\"]?\\))","g")}(n),"$1"+r+"$3")}))}}(),o=function newFontFaces(){return{resolveAll:function resolveAll(){return readAll(document).then((function(e){return Promise.all(e.map((function(e){return e.resolve()})))})).then((function(e){return e.join("\n")}))},impl:{readAll:readAll}};function readAll(){return Promise.resolve(t.asArray(document.styleSheets)).then((function getCssRules(e){var n=[];return e.forEach((function(e){try{t.asArray(e.cssRules||[]).forEach(n.push.bind(n))}catch(n){console.log("Error while reading CSS rules from "+e.href,n.toString())}})),n})).then((function selectWebFontRules(e){return e.filter((function(e){return e.type===CSSRule.FONT_FACE_RULE})).filter((function(e){return r.shouldProcess(e.style.getPropertyValue("src"))}))})).then((function(e){return e.map(newWebFont)}));function newWebFont(e){return{resolve:function resolve(){var n=(e.parentStyleSheet||{}).href;return r.inlineAll(e.cssText,n)},src:function(){return e.style.getPropertyValue("src")}}}}}(),i=function newImages(){return{inlineAll:function inlineAll(e){return e instanceof Element?inlineBackground(e).then((function(){return e instanceof HTMLImageElement?newImage(e).inline():Promise.all(t.asArray(e.childNodes).map((function(e){return inlineAll(e)})))})):Promise.resolve(e);function inlineBackground(e){var n=e.style.getPropertyValue("background");return n?r.inlineAll(n).then((function(n){e.style.setProperty("background",n,e.style.getPropertyPriority("background"))})).then((function(){return e})):Promise.resolve(e)}},impl:{newImage:newImage}};function newImage(e){return{inline:function inline(n){return t.isDataUrl(e.src)?Promise.resolve():Promise.resolve(e.src).then(n||t.getAndEncode).then((function(n){return t.dataAsUrl(n,t.mimeType(e.src))})).then((function(n){return new Promise((function(t,r){e.onload=t,e.onerror=r,e.src=n}))}))}}}}(),a={imagePlaceholder:void 0,cacheBust:!1},u={toSvg:toSvg,toPng:function toPng(e,n){return draw(e,n||{}).then((function(e){return e.toDataURL()}))},toJpeg:function toJpeg(e,n){return draw(e,n=n||{}).then((function(e){return e.toDataURL("image/jpeg",n.quality||1)}))},toBlob:function toBlob(e,n){return draw(e,n||{}).then(t.canvasToBlob)},toPixelData:function toPixelData(e,n){return draw(e,n||{}).then((function(n){return n.getContext("2d").getImageData(0,0,t.width(e),t.height(e)).data}))},impl:{fontFaces:o,images:i,util:t,inliner:r,options:{}}};function toSvg(e,n){return function copyOptions(e){void 0===e.imagePlaceholder?u.impl.options.imagePlaceholder=a.imagePlaceholder:u.impl.options.imagePlaceholder=e.imagePlaceholder;void 0===e.cacheBust?u.impl.options.cacheBust=a.cacheBust:u.impl.options.cacheBust=e.cacheBust}(n=n||{}),Promise.resolve(e).then((function(e){return cloneNode(e,n.filter,!0)})).then(embedFonts).then(inlineImages).then((function applyOptions(e){n.bgcolor&&(e.style.backgroundColor=n.bgcolor);n.width&&(e.style.width=n.width+"px");n.height&&(e.style.height=n.height+"px");n.style&&Object.keys(n.style).forEach((function(t){e.style[t]=n.style[t]}));return e})).then((function(r){return function makeSvgDataUri(e,n,r){return Promise.resolve(e).then((function(e){return e.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(e)})).then(t.escapeXhtml).then((function(e){return'<foreignObject x="0" y="0" width="100%" height="100%">'+e+"</foreignObject>"})).then((function(e){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+n+'" height="'+r+'">'+e+"</svg>"})).then((function(e){return"data:image/svg+xml;charset=utf-8,"+e}))}(r,n.width||t.width(e),n.height||t.height(e))}))}function draw(e,n){return toSvg(e,n).then(t.makeImage).then(t.delay(100)).then((function(r){var o=function newCanvas(e){var r=document.createElement("canvas");if(r.width=n.width||t.width(e),r.height=n.height||t.height(e),n.bgcolor){var o=r.getContext("2d");o.fillStyle=n.bgcolor,o.fillRect(0,0,r.width,r.height)}return r}(e);return o.getContext("2d").drawImage(r,0,0),o}))}function cloneNode(e,n,r){return r||!n||n(e)?Promise.resolve(e).then((function makeNodeCopy(e){return e instanceof HTMLCanvasElement?t.makeImage(e.toDataURL()):e.cloneNode(!1)})).then((function(r){return function cloneChildren(e,n,r){var o=e.childNodes;return 0===o.length?Promise.resolve(n):cloneChildrenInOrder(n,t.asArray(o),r).then((function(){return n}));function cloneChildrenInOrder(e,n,t){var r=Promise.resolve();return n.forEach((function(n){r=r.then((function(){return cloneNode(n,t)})).then((function(n){n&&e.appendChild(n)}))})),r}}(e,r,n)})).then((function(n){return function processClone(e,n){return n instanceof Element?Promise.resolve().then(cloneStyle).then(clonePseudoElements).then(copyUserInput).then(fixSvg).then((function(){return n})):n;function cloneStyle(){function copyStyle(e,n){function copyProperties(e,n){t.asArray(e).forEach((function(t){n.setProperty(t,e.getPropertyValue(t),e.getPropertyPriority(t))}))}e.cssText?n.cssText=e.cssText:copyProperties(e,n)}copyStyle(window.getComputedStyle(e),n.style)}function clonePseudoElements(){function clonePseudoElement(r){var o=window.getComputedStyle(e,r),i=o.getPropertyValue("content");if(""!==i&&"none"!==i){var a=t.uid();n.className=n.className+" "+a;var u=document.createElement("style");u.appendChild(formatPseudoElementStyle(a,r,o)),n.appendChild(u)}function formatPseudoElementStyle(e,n,r){var o="."+e+":"+n,i=r.cssText?formatCssText(r):formatCssProperties(r);return document.createTextNode(o+"{"+i+"}");function formatCssText(e){var n=e.getPropertyValue("content");return e.cssText+" content: "+n+";"}function formatCssProperties(e){return t.asArray(e).map(formatProperty).join("; ")+";";function formatProperty(n){return n+": "+e.getPropertyValue(n)+(e.getPropertyPriority(n)?" !important":"")}}}}[":before",":after"].forEach((function(e){clonePseudoElement(e)}))}function copyUserInput(){e instanceof HTMLTextAreaElement&&(n.innerHTML=e.value),e instanceof HTMLInputElement&&n.setAttribute("value",e.value)}function fixSvg(){n instanceof SVGElement&&(n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n instanceof SVGRectElement&&["width","height"].forEach((function(e){var t=n.getAttribute(e);t&&n.style.setProperty(e,t)})))}}(e,n)})):Promise.resolve()}function embedFonts(e){return o.resolveAll().then((function(n){var t=document.createElement("style");return e.appendChild(t),t.appendChild(document.createTextNode(n)),e}))}function inlineImages(e){return i.inlineAll(e).then((function(){return e}))}e.exports=u}()}}]);