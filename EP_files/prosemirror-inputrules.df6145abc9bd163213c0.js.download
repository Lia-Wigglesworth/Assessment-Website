(self.webpackChunkep_web=self.webpackChunkep_web||[]).push([["../libs/wp/prosemirror-inputrules/prosemirror-inputrules"],{"./node_modules/prosemirror-inputrules/dist/index.es.js":function(e,n,t){"use strict";t.d(n,{VK:function(){return o},Hw:function(){return inputRules},zK:function(){return textblockTypeInputRule},dU:function(){return undoInputRule},S0:function(){return wrappingInputRule}});var r=t("./node_modules/prosemirror-state/dist/index.es.js"),u=t("./node_modules/prosemirror-transform/dist/index.es.js"),o=function InputRule(e,n){this.match=e,this.handler="string"==typeof n?function stringHandler(e){return function(n,t,r,u){var o=e;if(t[1]){var i=t[0].lastIndexOf(t[1]);o+=t[0].slice(i+t[1].length);var s=(r+=i)-u;s>0&&(o=t[0].slice(i-s,i)+o,r=u)}return n.tr.insertText(o,r,u)}}(n):n};function inputRules(e){var n=e.rules,t=new r.Plugin({state:{init:function init(){return null},apply:function apply(e,n){var t=e.getMeta(this);return t||(e.selectionSet||e.docChanged?null:n)}},props:{handleTextInput:function handleTextInput(e,r,u,o){return run(e,r,u,o,n,t)},handleDOMEvents:{compositionend:function(e){setTimeout((function(){var r=e.state.selection.$cursor;r&&run(e,r.pos,r.pos,"",n,t)}))}}},isInputRules:!0});return t}function run(e,n,t,r,u,o){if(e.composing)return!1;var i=e.state,s=i.doc.resolve(n);if(s.parent.type.spec.code)return!1;for(var l=s.parent.textBetween(Math.max(0,s.parentOffset-500),s.parentOffset,null,"￼")+r,p=0;p<u.length;p++){var a=u[p].match.exec(l),c=a&&u[p].handler(i,a,n-(a[0].length-r.length),t);if(c)return e.dispatch(c.setMeta(o,{transform:c,from:n,to:t,text:r})),!0}return!1}function undoInputRule(e,n){for(var t=e.plugins,r=0;r<t.length;r++){var u=t[r],o=void 0;if(u.spec.isInputRules&&(o=u.getState(e))){if(n){for(var i=e.tr,s=o.transform,l=s.steps.length-1;l>=0;l--)i.step(s.steps[l].invert(s.docs[l]));var p=i.doc.resolve(o.from).marks();n(i.replaceWith(o.from,o.to,e.schema.text(o.text,p)))}return!0}}return!1}new o(/--$/,"—"),new o(/\.\.\.$/,"…"),new o(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),new o(/"$/,"”"),new o(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),new o(/'$/,"’");function wrappingInputRule(e,n,t,r){return new o(e,(function(e,o,i,s){var l=t instanceof Function?t(o):t,p=e.tr.delete(i,s),a=p.doc.resolve(i).blockRange(),c=a&&(0,u.findWrapping)(a,n,l);if(!c)return null;p.wrap(a,c);var f=p.doc.resolve(i-1).nodeBefore;return f&&f.type==n&&(0,u.canJoin)(p.doc,i-1)&&(!r||r(o,f))&&p.join(i-1),p}))}function textblockTypeInputRule(e,n,t){return new o(e,(function(e,r,u,o){var i=e.doc.resolve(u),s=t instanceof Function?t(r):t;return i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n)?e.tr.delete(u,o).setBlockType(u,u,n,s):null}))}}}]);