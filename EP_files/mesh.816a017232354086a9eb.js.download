(self.webpackChunkep_web=self.webpackChunkep_web||[]).push([["../libs/wp/@pixi/mesh/mesh"],{"./node_modules/@pixi/mesh/lib/mesh.es.js":function(t,e,r){"use strict";r.d(e,{Kj:function(){return f},wQ:function(){return h},xc:function(){return p},rY:function(){return c}});var i=r("./node_modules/@pixi/core/lib/core.es.js"),n=r("./node_modules/@pixi/math/lib/math.es.js"),s=r("./node_modules/@pixi/constants/lib/constants.es.js"),a=r("./node_modules/@pixi/display/lib/display.es.js"),o=r("./node_modules/@pixi/settings/lib/settings.es.js"),u=r("./node_modules/@pixi/utils/lib/utils.es.js"),extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function __extends(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}var h=function(){function MeshBatchUvs(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return MeshBatchUvs.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},MeshBatchUvs}(),l=new n.E9,d=new n.mg,f=function(t){function Mesh(e,r,n,a){void 0===a&&(a=s.lg.TRIANGLES);var u=t.call(this)||this;return u.geometry=e,e.refCount++,u.shader=r,u.state=n||i.ZM.for2d(),u.drawMode=a,u.start=0,u.size=0,u.uvs=null,u.indices=null,u.vertexData=new Float32Array(1),u.vertexDirty=0,u._transformID=-1,u._roundPixels=o.X.ROUND_PIXELS,u.batchUvs=null,u}return __extends(Mesh,t),Object.defineProperty(Mesh.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"tint",{get:function(){return this.shader.tint},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),Mesh.prototype._render=function(t){var e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===s.lg.TRIANGLES&&e.length<2*Mesh.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},Mesh.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.program.uniformData.translationMatrix&&(e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},Mesh.prototype._renderToBatch=function(t){var e=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var r=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[r]),t.plugins[r].render(this)},Mesh.prototype.calculateVertices=function(){var t=this.geometry,e=t.buffers[0].data;if(t.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var r=this.transform.worldTransform,i=r.a,n=r.b,s=r.c,a=r.d,u=r.tx,h=r.ty,l=this.vertexData,d=0;d<l.length/2;d++){var f=e[2*d],c=e[2*d+1];l[2*d]=i*f+s*c+u,l[2*d+1]=n*f+a*c+h}if(this._roundPixels){var p=o.X.RESOLUTION;for(d=0;d<l.length;++d)l[d]=Math.round((l[d]*p|0)/p)}this.vertexDirty=t.vertexDirtyId}},Mesh.prototype.calculateUvs=function(){var t=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new h(t,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},Mesh.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},Mesh.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,l);for(var e=this.geometry.getBuffer("aVertexPosition").data,r=d.points,i=this.geometry.getIndex().data,n=i.length,s=4===this.drawMode?3:1,a=0;a+2<n;a+=s){var o=2*i[a],u=2*i[a+1],h=2*i[a+2];if(r[0]=e[o],r[1]=e[o+1],r[2]=e[u],r[3]=e[u+1],r[4]=e[h],r[5]=e[h+1],d.contains(l.x,l.y))return!0}return!1},Mesh.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},Mesh.BATCHABLE_SIZE=100,Mesh}(a.W2),c=function(t){function MeshMaterial(e,r){var s=this,a={uSampler:e,alpha:1,uTextureMatrix:n.y3.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r)).uniforms&&Object.assign(a,r.uniforms),(s=t.call(this,r.program||i.$r.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),a)||this)._colorDirty=!1,s.uvMatrix=new i.UX(e),s.batchable=void 0===r.program,s.pluginName=r.pluginName,s.tint=r.tint,s.alpha=r.alpha,s}return __extends(MeshMaterial,t),Object.defineProperty(MeshMaterial.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(MeshMaterial.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(MeshMaterial.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),MeshMaterial.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;(0,u.premultiplyTintToRgba)(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},MeshMaterial}(i.ex),p=function(t){function MeshGeometry(e,r,n){var a=t.call(this)||this,o=new i.lW(e),u=new i.lW(r,!0),h=new i.lW(n,!0,!0);return a.addAttribute("aVertexPosition",o,2,!1,s.vK.FLOAT).addAttribute("aTextureCoord",u,2,!1,s.vK.FLOAT).addIndex(h),a._updateId=-1,a}return __extends(MeshGeometry,t),Object.defineProperty(MeshGeometry.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),MeshGeometry}(i.ZX)}}]);