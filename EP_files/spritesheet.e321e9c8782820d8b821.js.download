(self.webpackChunkep_web=self.webpackChunkep_web||[]).push([["../libs/wp/@pixi/spritesheet/spritesheet"],{"./node_modules/@pixi/spritesheet/lib/spritesheet.es.js":function(e,t,s){"use strict";s.d(t,{c:function(){return h},o:function(){return n}});var r=s("./node_modules/@pixi/math/lib/math.es.js"),i=s("./node_modules/@pixi/core/lib/core.es.js"),o=s("./node_modules/@pixi/utils/lib/utils.es.js"),a=s("./node_modules/@pixi/loaders/lib/loaders.es.js"),h=function(){function Spritesheet(e,t,s){void 0===s&&(s=null),this._texture=e instanceof i.xE?e:null,this.baseTexture=e instanceof i.VL?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var r=this.baseTexture.resource;this.resolution=this._updateResolution(s||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return Spritesheet.prototype._updateResolution=function(e){void 0===e&&(e=null);var t=this.data.meta.scale,s=(0,o.getResolutionOfUrl)(e,null);return null===s&&(s=void 0!==t?parseFloat(t):1),1!==s&&this.baseTexture.setResolution(s),s},Spritesheet.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=Spritesheet.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},Spritesheet.prototype._processFrames=function(e){for(var t=e,s=Spritesheet.BATCH_SIZE;t-e<s&&t<this._frameKeys.length;){var o=this._frameKeys[t],a=this._frames[o],h=a.frame;if(h){var n=null,l=null,u=!1!==a.trimmed&&a.sourceSize?a.sourceSize:a.frame,p=new r.Ae(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);n=a.rotated?new r.Ae(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.h)/this.resolution,Math.floor(h.w)/this.resolution):new r.Ae(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution),!1!==a.trimmed&&a.spriteSourceSize&&(l=new r.Ae(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution)),this.textures[o]=new i.xE(this.baseTexture,n,p,l,a.rotated?2:0,a.anchor),i.xE.addToCache(this.textures[o],o)}t++}},Spritesheet.prototype._processAnimations=function(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];for(var s=0;s<e[t].length;s++){var r=e[t][s];this.animations[t].push(this.textures[r])}}},Spritesheet.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},Spritesheet.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*Spritesheet.BATCH_SIZE),this._batchIndex++,setTimeout((function(){e._batchIndex*Spritesheet.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())}),0)},Spritesheet.prototype.destroy=function(e){var t;for(var s in void 0===e&&(e=!1),this.textures)this.textures[s].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(null===(t=this._texture)||void 0===t||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},Spritesheet.BATCH_SIZE=1e3,Spritesheet}(),n=function(){function SpritesheetLoader(){}return SpritesheetLoader.use=function(e,t){var s=this,r=e.name+"_image";if(e.data&&e.type===a.kC.TYPE.JSON&&e.data.frames&&!s.resources[r]){var i={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},o=SpritesheetLoader.getResourcePath(e,s.baseUrl);s.add(r,o,i,(function onImageLoad(s){if(s.error)t(s.error);else{var r=new h(s.texture,e.data,e.url);r.parse((function(){e.spritesheet=r,e.textures=r.textures,t()}))}}))}else t()},SpritesheetLoader.getResourcePath=function(e,t){return e.isDataUrl?e.data.meta.image:o.url.resolve(e.url.replace(t,""),e.data.meta.image)},SpritesheetLoader}()}}]);